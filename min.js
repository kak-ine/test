(async()=>{String.prototype.r=function(e,t){return this.replace(e,t)};let e=new TextDecoder;function t(t){let l=atob(t.r(/-/g,"+").r(/_/g,"/").r(/\./g,"=")),r=new Uint8Array(l.length);for(let e=0;e<r.length;e++)r[e]=l.charCodeAt(e);return e.decode(r)}let l,r,i,a,o,c,s,u,p=t("REMg65287J2067iM7LGX"),d=t("7LWc6re8IOyCrOyaqQ.."),h=t("PHA-PGJyPjwvcD4."),f=t("64uJ64Sk7J6E7J2EIOyeheugpe2VmOyEuOyalC4."),g=t("67mE67CA67KI7Zi466W8IDLsnpDrpqwg7J207IOBIOyeheugpe2VmOyEuOyalC4."),m=t("64-E67CwIOuwqeyngCDsvZTrk5zrpbwg7J6F66Cl7ZWY7IS47JqULg.."),_=t("7J20IOq4sOuKpeydgCBEQ-yduOyCrOydtOuTnCDqsKTrn6zrpqzsl5DshJzrp4wg7IKs7Jqp7ZWgIOyImCDsnojsirXri4jri6Qu"),y=t("7J20IOq4sOuKpeydgCDquIAg66qp66GdIO2OmOydtOyngOyXkOyEnOunjCDsgqzsmqntlaAg7IiYIOyeiOyKteuLiOuLpC4."),w=t("UEPrsoTsoIQg7Y6Y7J207KeA7JeQ7IScIOuLpOyLnCDsi5zrj4TtlbTso7zshLjsmpQu"),O=t("66Gc6re47JWE7JuD"),v=t("7ZmV7J24"),k=t("7Leo7IaM"),b=t("64Sk"),I=t("7KO87IaM6rCAIOyYrOuwlOultOyngCDslYrsirXri4jri6Qu"),x=t("7J20IOuwqeyGoeydhCDsi5zssq3tlZjsi5zqsqDsirXri4jquYw_"),C=t("7IOIIOywveyXkOyEnCDsl7TquLA."),A=t("7IOd67Cp7IahIOyjvOyGjA.."),L=t("66mU7Iuc7KeAIOuztOuCtOq4sA.."),E=t("64u16riAIOyeheugpQ.."),D=t("64yT6riAIOyeheugpQ.."),T=t("7IOd67Cp7IahIOyxhO2MhQ.."),q=t("7Iqk7YGs66Gk7ZW07IScIOyxhO2MheydtCDrqYjst4TsirXri4jri6Q."),J=t("7IOIIOuplOyLnOyngCDrs7TquLA."),K=t("67O06riw"),j=t("MjDqsJwg7J207IOB"),G=t("6rCc"),z=t("7IOIIOuplOyLnOyngCA."),Y=t("64uJ64Sk7J6E"),S=t("67mE67CA67KI7Zi4"),U=t("7L2U65OcIOyeheugpQ.."),$=t("7JeQ6rKMIOuLteq4gA.."),B=t("7JeQ6rKMIOuMk-q4gA.."),M=t("64yT6riAIOyTsOq4sA.."),Z=t("7IOIIOuMk-q4gCDsk7DripQg7KSR"),X=(t("66Gc65Sp7KSR7J6F64uI64ukLg.."),t("7LGE7YyFIOyEpOyglQ..")),N=t("64uk7KSRIO2ZlOuptCDsgqzsmqkgKOuniOuPhCk."),Q=t("67aA65Oc65-s7Jq0IOyKpO2BrOuhpCDslaDri4jrqZTsnbTshZg."),P=t("7Y-w7Yq4IO2BrOq4sCDtmZXrjIA."),R=t("67CY6rOg64uJIOyVhOydtOuUlCDtkZzsi5w."),F=t("65SU7Iuc7L2YIO2BrOq4sCDspITsnbTquLA."),H=t("6riAIOuCtOyaqeyXkCDrp4Htgawg7LaU6rCA"),V=t("7Ken7J2AIOyxhO2MhSDsp4Dsl7Dsi5zqsIQ."),W=t("67Cp7IahIOyXhuydtCDssYTtjIXssL3rp4wg7IKs7Jqp"),ee=t("7Jyg64-ZIOuhnOq3uOyduCDsiKjquLDquLA."),te=t("64uk7YGsIOuqqOuTnA.."),le=t("7LGE7YyFIO2RnOyLnCDrsKnrspU."),re=t("7J6Q64-Z7Kek67CpIOuwjyDqvKzrpqzrp5A."),ne=t("7J6Q64-Z7Kek67CpIOyCrOyaqQ.."),ie=t("6rys66as66eQIOyImOyglQ.."),ae=t("64uJ64Sk7J6EIOyVhOydtOy9mCDtkZzsi5w."),oe=t("7LGE7YyF"),ce=t("7IKt7KCc65CY7JeI6rGw64KYIOyhtOyerO2VmOyngCDslYrripQg6rKM7Iuc66y87J6F64uI64ukLg.."),se=t("6rO17KeA"),ue=t("7ISk66y4"),pe=t("7LGE7YyF67Cp7JeQIOyYpOyLoCDqsoPsnYQg7ZmY7JiB7ZWp64uI64ukIQ.."),de=t("7LGE7YyF7LC97JeQIOuLpOyLnCDsl7DqsrDtlojsirXri4jri6Qu"),he=t("7JWMIOyImCDsl4bripQg7Jik66WY"),fe=t("7JWMIOyImCDsl4bripQg7Jik66WYIChibG9ja19rZXkp"),ge=t("7J6Y66q765CcIOyalOyyreyeheuLiOuLpC4."),me=t("7J2066-47KeA6rCAIOuEiOustCDtgb3ri4jri6Qu"),_e=t("7J2066-47KeAIOyXheuhnOuTnOyXkCDsi6TtjKjtlojsirXri4jri6Qu"),ye=t("7J2066-47KeAIOyCreygnOyXkCDsi6TtjKjtlojsirXri4jri6Qu"),we=t("7JWE7KeBIOyXheuhnOuTnCDspJHsnbgg7J2066-47KeA6rCAIOyeiOyKteuLiOuLpC4."),Oe=t("7J2066-47KeAIOyXhuydtCDsmKzrpqzsi5zqsqDsirXri4jquYw_"),ve=t("7JeF66Gc65Oc7JeQIOyLpO2MqO2VnCDsnbTrr7jsp4DqsIAg7J6I7Iq164uI64ukLg.."),ke=t("7LGE7YyF7J20IOu5hO2ZnOyEse2ZlOuQmOyXiOyKteuLiOuLpC4."),be=t("7J2066-4IOyLpO2WieykkeyeheuLiOuLpC4."),Ie=t("7J2066-47KeAIOyyqOu2gA.."),xe=t("65Oc656Y6re4IOyVpCDrk5zroa3snLzroZwg7J2066-47KeAIOyYrOumrOq4sA.."),Ce=t("7J2066-47KeA66eMIOyYrOumtCDsiJgg7J6I7Iq164uI64ukLg.."),Ae=t("7LGE7YyF7J20IOu5hO2ZnOyEse2ZlOuQnCDqsKTrn6zrpqzsnoXri4jri6Qu"),Le=t("4oCA4oCB4oCE4oCF4oCG4oCH4oCI4oCJ4oCK"),Ee=t("64yT6riA7IiYIO2VmOydtOudvOydtO2KuA.."),De=t("7JiB7IOBIOy2lOqwgA.."),Te=t("67Cw7LmYIOuwlOq-uOq4sA.."),qe=t("67Cw7LmYIOyZhOujjCE."),Je=t("66qo67CU7J28IO2ZmOqyveyXkOyEnOuKlCDqtozsnqXtlZjsp4Ag7JWK7Iq164uI64ukLgrqt7jrnpjrj4Qg7IKs7Jqp7ZWY7Iuc6rKg7Iq164uI6rmMPw.."),Ke=t("7KCE7LK0IOuLq-q4sA.."),je=t("64uk7Jq066Gc65Oc"),Ge=t("64ur6riw"),ze=t("7J6Q64-Z7Kek67CpIOydtOuvuOyngOulvCDsgq3soJztlZjsi5zqsqDsirXri4jquYw_"),Ye=t("7J2066-47KeAIOyXheuhnOuTnA.."),Se=t("7J6Q64-Z7Kek67CpIOyXheuhnOuTnA.."),Ue=t("67KE7KCEIOyXheuNsOydtO2KuOuQqA.."),$e=t("7KCE7LK0IOuzgOqyveyCrO2VrSDrs7TquLA."),Be=t("6rWs66ek7ZWY7KeAIOyViuydgCDrlJTsi5zsvZjsnoXri4jri6Qu"),Me=t("7IKt7KCc"),Ze=t("7IKt7KCc7ZWY7Iuc6rKg7Iq164uI6rmMPw.."),Xe=t("7IKt7KCc65CcIOqyjOyLnOusvOydgCDrs7XqtaztlaAg7IiYIOyXhuyKteuLiOuLpC4."),Ne=t("VVJMIOuzteyCrA.."),Qe=t("SUQg7LCo64uo"),Pe=t("SVAg7LCo64uo"),Re=t("64uJ64Sk7J6EIOywqOuLqA.."),Fe=t("64uk7J2MIOydtOyaqeyekOulvCDssKjri6jtlZjsi5zqsqDsirXri4jquYw_"),He=t("7YKk7JuM65OcIOywqOuLqA.."),Ve=t("7KCE7LK0IOywqOuLqA.."),We=t("6rCk65-s66asIOywqOuLqA.."),et=t("7LaU6rCA"),tt=t("7LCo64uoIOyEpOyglQ.."),lt=t("7J207KCcIOq4gOydhCDsmKTrpbjsqr0g7YG066at7ZWY66m0PGJyPuuLpOydjCDrqZTribTrpbwg7IKs7Jqp7ZWgIOyImCDsnojsirXri4jri6Qh"),rt=document,nt=rt.body,it=rt.head,at=localStorage??null,ot=window.Worker&&!0,ct=window.navigator.clipboard.read&&!0,st=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent),ut=st&&/Safari/i.test(navigator.userAgent),pt=[5e3,3e3,1e3],dt="getElementsByClassName",ht="querySelector",ft="innerText",gt="placeholder",mt="onclick",_t="dclivechat",yt="onopenlink",wt="ondcconerror",Ot="onimageclick",vt="hidden",kt="disabled",bt="div",It="span",xt="g-recaptcha-response",Ct="6Lc-Fr0UAAAAAOdqLYqPy53MxlRMIXpNXFvBliwI",At="subdirectory_arrow_right",Lt="arrow_downward",Et=(e,t=!0)=>(e=e.r("?","\\?"),t?new RegExp(e,"g"):new RegExp(e)),Dt=/:([^,:]+), ([^,:]+):/g,Tt=/dccon\.php\?no=([a-z0-9]+)/,qt=/twitch.tv\/(\?channel=)?([A-Za-z0-9_-]+)/,Jt=/href="(https?:\/\/)?(www.)?twitch.tv\/([^"]+)"/g,Kt=/youtu(.be\/|be.com\/watch\?v=|be.com\/v\/|be.com\/shorts\/|be.com\/live\/|be.com\/embed\/)([A-Za-z0-9_-]+)/,jt=/href="(https?:\/\/)?(www.)?youtu(.be\/|be.com\/watch\?v=|be.com\/v\/|be.com\/shorts\/|be.com\/live\/)([^"]+)"/g,Gt="https://",zt=Gt+"gall.dcinside.com/",Yt=Gt+"github.com/Joh1ah/dclivechat",St="/board/forms",Ut=St+"/article_submit",$t=St+"/comment_submit",Bt="/dccon/insert_icon",Mt=St+"/delete_submit",Zt=St+"/delete_password_submit",Xt=Number.parseInt,Nt=requestAnimationFrame,Qt=setTimeout,Pt=encodeURIComponent,Rt=String.fromCharCode,Ft=Date.now,Ht=Ft(),Vt="",Wt="",el="",tl="",ll="",rl=!1,nl=!0,il=!1,al=!1,ol=!1,cl=!0,sl="",ul="",pl="",dl=!1,hl=!1,fl=!1,gl=0,ml=0,_l="",yl=pt[0],wl=0,Ol=0,vl=!0,kl=!0,bl=!1,Il=99999,xl=!0,Cl="",Al=null,Ll=null,El=()=>0==gl,Dl=()=>El()?hl:fl,Tl=(...e)=>{let t="["+((Ft()-Ht)/1e3).toFixed(2)+"]";if(console.log(t,...e),DEBUG&&s){for(let l of e)t+=void 0===l?" undefined":" "+(l.toString?.()??"");Ql("p",s,{[ft]:t})}},ql=()=>{let e,t=new Promise((t=>e=t));return{r:e,p:t}},Jl=(e,t)=>{let l=t-e+1,r=Math.random()*l;return Math.min(e+Math.floor(r),t)},Kl=(e,t)=>{let l=e.indexOf(t);-1!=l&&e.splice(l,1)},jl=new TextEncoder,Gl=Le.split(""),zl=e=>{let t="";for(let l=0;l<e;l++)t+=Gl[Jl(0,Gl.length-1)];return t},Yl=e=>e.split("||"),Sl=e=>{let t,l,r=rt.cookie.split(";");for(let n=0;n<r.length;n++)if(t=r[n].substring(0,r[n].indexOf("=")),l=r[n].substring(r[n].indexOf("=")+1),t=t.r(/^\s+|\s+$/g,""),t==e)return l;return"undefined"},Ul=e=>{let t=e.split(".");return t[0]+"."+t[1]},$l=(e,t)=>((e,t,l)=>e.style.setProperty(t,l))(rt.documentElement,e,t),Bl=async()=>{let{r:e,p:t}=ql();return Ql("script",nt,{onload:()=>{if("undefined"==typeof grecaptcha)return Tl("recaptcha is undefined");Tl("recaptcha v3 loaded"),e()},type:"text/javascript",src:Gt+"www.google.com/recaptcha/api.js?render="+Ct}),await t},Ml=async(e,t,l,r)=>{let n,i=0,a=async()=>{if(i>1)return n;if(i+=1,n=await e(...t,l),!n)return jo(ge);let o=Yl(n);if("false"==o[0]){if(1==o.length)return jo(n);if("captcha"==o[1])return await(async(e,t,l)=>{if("v3"==e)return t["g-recaptcha-token"]=await(async e=>{"undefined"==typeof grecaptcha&&await Bl();let{r:t,p:l}=ql();return grecaptcha.ready((()=>grecaptcha.execute(Ct,{action:e}).then(t).catch((e=>{Tl(e),t("")})))),await l})(l);Tl("recaptcha",e,"is not supported")})(o[2],l,r),await a()}return n};return await a()},Zl=1024,Xl="B.KB.MB.GB.TB.PB".split("."),Nl=e=>{let t=0,l=1,r=Zl;for(;t<Xl.length;){if(e<r){let r=e/l,n=10,i=2;for(;;){if(r<n)return r.toFixed(i)+Xl[t];n*=10}}l*=Zl,r*=Zl,t++}},Ql=(e,t,l,...r)=>{let n=rt.createElement(e);if(l)if("object"==typeof l)for(let e in l)n[e]=l[e];else"string"==typeof l&&r.push(l);for(let e of r)n.classList.add(...e.split("."));return t&&t.appendChild&&t.appendChild(n),n},Pl=(e,t,...l)=>Ql(It,e,{[ft]:t},"material-symbols-outlined.icon",...l),Rl=e=>{for(;e.lastChild;)e.removeChild(e.lastChild)},Fl=(e,...t)=>(e.classList.add(...t),e),Hl=(e,...t)=>(e.classList.remove(...t),e),Vl=()=>scrollTo(0,0),Wl=!1,er=(e,t,l=!1,r=!1)=>{e.onkeypress=n=>{!r&&Wl||"Enter"==n.key&&(DEBUG&&Tl(n),st&&l||!st&&l&&n.shiftKey||(n.preventDefault(),t.click(),e.oninput?.()))}},tr=()=>zt+(nl?"mgallery/":il?"mini/":"")+"board/",lr=()=>zt+"board/",rr=()=>tr()+"lists?id="+Vt,nr=()=>tr()+"write/?id="+Vt,ir=e=>tr()+"view/?id="+Vt+"&no="+e,ar=(...e)=>{let t="";for(let l of e)for(let e in l){let r=l[e];null==r&&(r="undefined"),t+="&"+e+"="+r}return t.substring(1)},or=e=>{let t=e.match(/var _r = _d\('([A-Za-z0-9+=\/]+)'\)/);return t?(e=>{let t,l,r,n,i,a,o,c="yL/M=zNa0bcPQdReSfTgUhViWjXkYIZmnpo+qArOBslCt2D3uE4Fv5G6wH178xJ9K",s="",u=0;for(e=e.r(/[^A-Za-z0-9+/=]/g,"");u<e.length;)n=c.indexOf(e.charAt(u++)),i=c.indexOf(e.charAt(u++)),a=c.indexOf(e.charAt(u++)),o=c.indexOf(e.charAt(u++)),t=n<<2|i>>4,l=(15&i)<<4|a>>2,r=(3&a)<<6|o,s+=Rt(t),64!=a&&(s+=Rt(l)),64!=o&&(s+=Rt(r));return s})(t[1]):""},cr=(e,t)=>{let l=(t=(e=>{let t=Xt(e.substring(0,1));return t=t>5?t-5:t+4,e.r(/^./,t)})(t??u)).split(","),r="";for(n=0;n<l.length;n++)r+=Rt(2*(l[n]-n-1)/(13-n-1));return e.r(/(.{10})$/,r)},sr=()=>{let e;try{e=Tl}catch{e=console.log}let t={},l=(e,t,l)=>{let n=r(e,t,l);return n?n[0]:""},r=(e,l,r)=>{let n,i=l+r;void 0!==t[i]?n=t[i]:(n=new RegExp(`<${l}[^>]*class=["'][^"]*${r}[^"]*["'][^>]*(/?)>`,"g"),t[i]=n);let a=e.matchAll(n);if(!a)return null;let o=[];for(match of a){if(match[1]){o.push([match[0],""]);continue}let t=match.index,r=0,n=e.substring(t),i=0,a=n.matchAll(new RegExp(`<(/?)${l}[^>]*(/?)>`,"g"));for(let e of a)if(e[1]){if(i-=1,0==i){t=e.index,r=e[0].length;break}}else e[2]||(i+=1);o.push([n.substring(0,t+r),n.substring(match[0].length,t)])}return o},n=(e,t,r)=>{let n=l(e,t,r);return n?n[1]:""},i=e=>{let t="";for(let l of e.matchAll(/(>|$)(.*?)(<|^)/g))t+=l[2].trim();return t},a={},o=(e,t)=>{let l;void 0!==a[t]?l=a[t]:(l=new RegExp(`${t}="([^"]+)"`),a[t]=l);let r=e.match(l);return r?r[1]:null};return{_IH:n,_OH:(e,t,r)=>{let n=l(e,t,r);return n?n[0]:""},_OHA:(e,t,l)=>{let n=[],i=r(e,t,l);if(!i)return"";for(let e of i)n.push(e[0]);return n},_IT:(e,t,l)=>{let r=n(e,t,l);return r?i(r):""},_AT:(e,t,l,r)=>{let n=o(e,t);null!=n&&(l[r]=n)},_A:o,_TF:e=>/fix/.test(e),_DEBUG:e,_IO:i}},{_IH:ur,_OH:pr,_OHA:dr,_IT:hr,_AT:fr,_A:gr,_TF:mr,_DEBUG:_r,_IO:yr}=sr(),wr={},Or=(e,t)=>{let l;wr[t]?l=wr[t]:(l=new RegExp(`<[^>]+(id|name)=["']${t}["'][^>]+value=["']([^"']+)["']`),wr[t]=l);let r=e.match(l);return r?r[2]:""},vr=(e,t,l)=>{let r=new RegExp(`<form[^>]+id=["']${t}["'][^>]*>.*?</form>`),n=e.match(r);return!!n&&(Hr(n[0],l),!0)},kr=()=>{let e;try{e=_DEBUG}catch{e=Tl}return{_TEXT:async(t,l={})=>{l.credentials||(l.credentials="include");let r=await fetch(t,l).catch(e);return r&&r.ok?(await r.text().catch(e)).replace(/(\n|\r|\t)/g,""):""}}},{_TEXT:br}=kr(),Ir=async(e,t={},l="")=>{t.credentials||(t.credentials="include"),t.method||(t.method="POST"),t.mode||(t.mode="cors"),t.body||(t.body=l);let r=await fetch(e,t).catch(Tl);return r&&r.ok?await r.text().catch(Tl):""},xr={"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","X-Requested-With":"XMLHttpRequest"},Cr=async(e,...t)=>{let l=ar(...t),r={headers:xr,referrer:nr()};return Ir(e,r,l).catch(Tl)},Ar=async(e,t,...l)=>{let r=ar(...l),n={headers:xr,referrer:ir(e)};return Ir(t,n,r).catch(Tl)},Lr=async(e,{num:t,id:l,value:r,vCurT:n},i="")=>{let a={ci_t:Sl("ci_c"),id:Vt,re_no:e,mode:"del",[xt]:"",_GALLTYPE_:Wt};return i&&(a[l]=r,a.no=t,a.re_password=i,a.v_cur_t=n),await Ml(Ar,[e,"/board/comment/comment_delete_submit"],a,"comment_delete_submit")},Er=e=>{let t=ar({id:Vt,r_key:el,temp_no:e}),l={headers:xr,credentials:"same-origin",referrer:zt+"/upload/image?xssDomain=dcinside.com",referrerPolicy:"strict-origin-when-cross-origin"},r=lr()+"temp/upimg_pop_del";Ir(r,l,t).catch(Tl).then((e=>"true"!=e&&bn(ye)))},Dr={},Tr=[],qr=!1,Jr=[],Kr=async()=>{if(!Jr.length)return qr=!1;let e=Jr.shift(),t=e[0],l=e[1];if(null!=Dr[t])return l(Dr[t]),Qt(Kr,1);let r=await(async e=>{let t=zt+"dccon/package_detail",l={headers:xr},r=ar({ci_t:Sl("ci_c"),package_idx:"",code:e}),n=await Ir(t,l,r).catch(Tl);if(!n)return null;try{return JSON.parse(n)}catch(e){return Tl(e),null}})(t).catch(Tl);if(!r)return l();let n=r.info.title,i=r.info.package_idx,a=[];for(let e of r.detail)a.push({title:e.title,buy:!1,package_idx:i,package_title:n,code:e.path});let o={title:n,idx:i,buy:!1,code:r.info.list_img_path,detail:a};Gr(o),l(Dr[t]),Qt(Kr,1)},jr=e=>{let{r:t,p:l}=ql();return Jr.push([e,t]),qr||(qr=!0,Kr()),l},Gr=e=>{let t=nn("dccon-pk")??{};if(null!=t[e.idx]){let l=t[e.idx];if(l.buy||!e.buy)return;l.detail=e.detail,l.buy=!0}else t[e.idx]=e;rn("dccon-pk",t)},zr=(e,t)=>{let l=(e=>{let t=nn("dccon-pk");if(!t)return null;for(let l in t)if(t[l].title==e)return t[l];return null})(e);if(!l||!l.detail)return null;for(let e of l.detail)if(e.title==t)return e;return null},Yr=(e,t)=>{let l=zr(e,t);return l?Sr(l.code):null},Sr=e=>Gt+"dcimg5.dcinside.com/dccon.php?no="+e,Ur=async(e,t)=>{let l,r=await Cr(zt+"dccon/lists",{ci_t:Sl("ci_c"),target:e,page:t}).catch(Tl);if(!r)return 0;if("not_login"==r)return 0;if("{"!=r.substring(0,1))return 0;try{l=JSON.parse(r)}catch(e){return Tl(e),{}}let n=l.list,i=1;if("recent"==e){let e=[];for(let t of n){let l=t.list_img.match(Tt);l&&e.push({package_title:d,package_idx:t.package_idx,idx:t.idx,code:l[1],title:t.title})}ka({title:d,idx:-1,detail:e})}else if("icon"==e){i=l.max_page;for(let e of n){let t=e.title,l=e.package_idx,r=e.main_img_url.match(Tt);if(!r)continue;let n=[];for(let r of e.detail){let e=r.list_img.match(Tt);e&&n.push({package_title:t,package_idx:l,idx:r.detail_idx,buy:!0,code:e[1],title:r.title})}let i={title:t,idx:l,buy:!0,code:r[1],detail:n};ka(i),Gr(i)}}return i},$r=async e=>{if(!e.buy)return bn(Be);let t=e.package_idx,l=e.idx,r={id:Vt,no:void 0,package_idx:t,detail_idx:l,ci_t:Sl("ci_c"),input_type:"write",t_vch2:void 0,t_vch2_chk:void 0,c_gall_id:Vt,c_gall_no:void 0,[xt]:"",check_6:void 0,check_7:void 0,check_8:void 0,_GALLTYPE_:Wt};await Ml(Cr,[Bt],r,"insert_icon"),ba("recent").catch(Tl)},Br=async(e,t)=>{if(!e.buy)return bn(Be);let l=e.package_idx,r=e.idx,n=la();if(!n.length)return bn(f);let a=vo[t],o={id:Vt,no:t,package_idx:l,detail_idx:r,name:n,ci_t:Sl("ci_c"),input_type:"comment",t_vch2:a.t_vch2,t_vch2_chk:a.t_vch2_chk,c_gall_id:Vt,c_gall_no:t,[xt]:"",check_6:a.check_6,check_7:a.check_7,check_8:a.check_8,_GALLTYPE_:Wt},c={};if(!al){let e=ra();if(e.length<2)return bn(g);c.password=e}if(Dl()){let e=na();if(!e.length)return bn(m);c.code=e}ml&&(c.c_no=ml);let s=await Cr(Bt,o,c);"ok"==s?(Yi[t](-1,!0),i(0)):DEBUG&&Tl("insert dccon comment fail",s),Qt(ea,500),ba("recent")},Mr=(e,t,l)=>{let r=`<img class="dccon" src="${l}">`;e.innerHTML=e.innerHTML.r(t,r)},Zr=0,Xr=e=>{let t=(e=e.r(/onmousedown="[^"]+"/g,"").r(/class="written_dccon[^"]*"/g,'class="d"')).matchAll(/onerror="[^"]+"/g);for(let l of t){Zr++;let t="error-"+Zr;e=e.r(l[0],`id="${t}" onerror="window.postMessage(JSON.stringify({type:'${wt}',id:'${t}' }),'*')"`)}return e},Nr=(e,t)=>{let l=e.match(t);if(l){DEBUG&&Tl("replacing",e);for(let t of l)e=e.r(Et(t),(r=Pt(t.split('"')[1]),`onclick="window.postMessage(JSON.stringify({type:'${yt}',url:'${r}' }),'*')"`));DEBUG&&Tl("replaced",e)}var r;return e},Qr=e=>(e=Nr(e,Jt),Nr(e,jt)),Pr=e=>"https://image.dcinside.com/viewimage.php?id=&no="+e,Rr=e=>{yl=pt[e],Ll&&Ll.postMessage({type:"iv",iv:yl})},Fr=(e,t)=>{for(let l in t){let r=Or(e,l);r&&(t[l]=r)}!Wt&&qo._GALLTYPE_&&(Wt=qo._GALLTYPE_),!tl&&qo.gallery_no&&(tl=qo.gallery_no),qo.r_key&&(el=qo.r_key)},Hr=(e,t)=>{let l=e.matchAll(/<input[^>]+name=["']([^"']+)["'][^>]+value=["']([^"']*)["']/g);if(l)for(let e of l)t[e[1]]=e[2]};DEBUG&&Tl("initializing");let Vr=e=>(alert(e),0);if(!(()=>{let e=location.href.match(/^https?:\/\/(gall|m).dcinside.com\/([^\n]+)$/);if(!e)return Vr(_);let t=null;return"gall"==e[1]?(t=e[2].match(/id=([A-Za-z0-9_]+)($|\&|#)/),nl=/^mgallery/.test(e[2]),il=/^mini/.test(e[2])):(rl=!0,t=e[2].match(/(board|mini)\/([A-Za-z0-9_]+)($|\?|\/|#)/),nl=rt[dt]("micon").length>0,il=rt[dt]("mnicon").length>0),t&&t.length?(Vt=rl?t[2]:t[1],1):Vr(y)})())return;if(rt.cookie="m_dcinside_web=done; path=/; domain=.dcinside.com",Ql("meta",it,{name:"viewport",content:"width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0"}),rl)return Vr(w),location.href=rr();if(rt[_t])return rt[_t]();rt[_t]=()=>bn(be),rt.title=p+" :: "+rt.title;let Wr={},en={},tn=e=>{let t=JSON.stringify(e??Wr);at?.setItem(_t,t)},ln=(e,t)=>{Wr[e]=t,en[e]?.(t)},rn=(e,t)=>{ln(e,t),tn()},nn=e=>Wr[e]??null,an=()=>{let e=at?.getItem("block_all");return e?JSON.parse(e):{on:1,word:"",id:"",nick:"",ip:""}},on=()=>{let e=at?.getItem("block_parts");return e?JSON.parse(e):{}},cn=(e,t)=>on()[e]??{on:1,word:"",id:"",nick:"",ip:"",name:t},sn=(e,t)=>!!t.on&&(un(e,"title",t,"word",!0)||un(e,"nickname",t,"nick")||un(e,"id",t,"id")||un(e,"ip",t,"ip")),un=(e,t,l,r,n=!1)=>{if(!l[r])return!1;let i=Yl(l[r]);for(let l of i)if(n){if(e[t].includes(l))return!0}else if(e[t]==l)return!0;return!1},pn=e=>{e.on=1,(e=>{at?.setItem("block_all",JSON.stringify(e))})(e);for(let t of ji)sn(t,e)?Fl(t.chat,"block"):Hl(t.chat,"block")},dn=(e,t)=>{e.on=1;let l=on();l[t]=e,(e=>{at?.setItem("block_parts",JSON.stringify(e))})(l);for(let t of ji)sn(t,e)?Fl(t.chat,"block"):Hl(t.chat,"block")},hn=(e,t,l)=>{let r=Yl(e[t]).filter((e=>""!=e));r.includes(l)||r.push(l),e[t]=r.join("||")},fn=(e,t,l)=>{let r=Yl(e[t]).filter((e=>""!=e));for(let e=0;e<r.length;e++)if(r[e]==l){r.splice(e,1);break}e[t]=r.join("||")};(async()=>{let e=await br(rr()).catch(Tl),t=ur(e,bt,"login_box");if(DEBUG&&Tl("login",t),t){let e=ur(t,"button","btn_inout");if(DEBUG&&Tl("string",e),e&&e==O){al=!0;let e=hr(t,"strong","nickname");e&&(sl=e);let l=pr(t,"strong","writer_nikcon");if(l){let e=gr(l,"onClick").match(/\/([a-zA-Z0-9_-]+)['"]/);e&&(ul=e[1]),e=l.match(/src=["']([^"']+)["']/),e&&(pl=e[1],dl=mr(e[1]))}}}DEBUG&&Tl("login",al),l?.(),ll=Or(e,"gallery_name"),io[ft]=We+" - "+ll})(),Rl(nt),Fl(nt,vt);for(var gn=1;gn<99999;gn++)window.clearInterval(gn);for(gn=1;gn<99999;gn++)window.clearTimeout(gn);let mn=STYLESHEET.r(/_w/g,"width").r(/_h/g,"height").r(/_b/g,"background").r(/_m/g,"margin").r(/_p/g,"padding").r(/_d/g,"display").r(/_i/g,"!important").r(/_P/g,"position").r(/_T/g,"top").r(/_B/g,"bottom").r(/_L/g,"left").r(/_R/g,"right").r(/_r/g,"relative").r(/_a/g,"absolute").r(/_o/g,"overflow").r(/_f/g,"flex").r(/_F/g,"font").r(/_j/g,"justify-content").r(/_g/g,"grid-").r(/_c/g,"calc").r(/_x/g,"100%");mn=ut?mn.r(/_s/g,""):mn.r(/_s/g," or (max-width:700px)"),Ql("style",it,{[ft]:mn}),Ql("link",it,{rel:"stylesheet",href:Gt+"fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"}),st&&Bl(),DEBUG&&Tl("ui"),s=Ql(bt,nt,"log",vt),Vl();let _n=Ql(bt,nt,"o");Ql(bt,_n,{[ft]:xe},"drop");let yn=Ql(bt,nt,"o"),wn=(e=!1)=>{DEBUG&&Tl("render overlay",e&&1==yn.childNodes.length,yn.childNodes.length),e&&1==yn.childNodes.length||!yn.lastChild?Hl(yn,"wait"):Fl(yn,"wait"),Wl=0!==yn.childNodes.length},On=!0;rt.addEventListener("keyup",(e=>{"Enter"==e.key&&(On=!0)})),rt.addEventListener("keypress",(e=>{On&&"Enter"===e.key&&Wl&&(yn.lastChild&&yn.lastChild.enter?.(),On=!1)}));let vn,kn=({title:e,desc:t,options:l,close:r,html:n,input:i,nowrap:a})=>{l||(l=[{text:v,[mt]:e=>e()}]);let o=Ql(bt,yn,"modal");e&&Ql(bt,o,{[ft]:e},"tt");let c=Ql(bt,o,"desc");o.content=c,t&&(n?c.innerHTML=t:c[ft]=t);let s=()=>{Fl(o,vt),o.remove(),wn()};r&&Pl(Ql("a",o,{[mt]:s},"b.close.abs-tr"),"close"),void 0!==i&&(o.input=a?Ql("input",o,{type:"password",value:i},"nowrap"):Ql("textarea",o,{value:i}));let u=Ql(bt,o,"opts.fr");1===l.length&&(l[0].enter=!0);for(let e of l){let t=()=>{r[ft]="",Pl(r,"progress_activity","progress")},l=null!=e.icon,r=Ql("a",u,{[ft]:l?"":e.text??e,[mt]:e.onclick?()=>e.onclick(s,t):s},"sb.r");l&&(Pl(r,e.icon),Ql(It,r,{[ft]:e.text})),e.enter&&Qt((()=>{o.enter=()=>r.click(),a&&er(o.input,r,!1,!0)}),100)}return wn(),o},bn=e=>kn({desc:e}),In=(e,{text:t,top:l=!1},...r)=>{Fl(e,"has-tooltip");let n=Ql(bt,e,"tooltip",l?"tp":"bt",...r);return Ql(It,n,{innerText:t}),n},xn=(e,t=[])=>{e.oncontextmenu=e=>{e.preventDefault();let l=e.clientX,r=e.clientY;for(option of(vn&&vn.remove(),vn=Ql(bt,nt,"p.ctx"),vn.style.left=l+"px",vn.style.top=r+"px",t)){if(option.hr){Ql("hr",vn);continue}let e=Ql("a",vn,"fr.b");option.icon&&Pl(e,option.icon),option.text&&Ql(It,e,{[ft]:option.text}),option[mt]&&(e[mt]=option[mt])}return vn}};rt.addEventListener("click",(()=>{vn&&vn.remove(),vn=null}));let Cn=Ql("main",nt);DEBUG&&Tl("video");let An,Ln=Ql(bt,Cn,"video"),En=Ql(bt,Ln,"menu"),Dn=Ql(bt,Ln,"main"),Tn=!0,qn=e=>{Tn="boolean"==typeof e?e:!Tn,Tn?(Hl(En,"e"),An[ft]="expand_less"):(Kn&&jn.click(),Fl(En,"e"),An[ft]="expand_more")};Ql(bt,En,{[mt]:qn},"stretch");let Jn=Ql("a",En,{[mt]:()=>{Fl(Dn,"go"),Hl(Sn,vt)}},"b");Pl(Jn,"add"),Ql(It,Jn,{[ft]:De});let Kn=!1,jn=Ql("a",En,"b",kt),Gn=Pl(jn,"pan_tool"),zn=Ql(It,jn,{[ft]:Te});jn.onclick=()=>{Kn=!Kn,Kn?(Fl(jn,".t"),Gn[ft]="check",zn[ft]=qe,Fl(Dn,"rlc")):(Hl(jn,".t"),Gn[ft]="pan_tool",zn[ft]=Te,Hl(Dn,"rlc"))};let Yn=Ql("a",En,"b",kt);Pl(Yn,"close"),Ql(It,Yn,{[ft]:Ke}),An=Pl(Ql("a",En,{[mt]:qn},"b.fix-tl"),"expand_less");let Sn=Ql(bt,Dn,"p.fr.blank"),Un=Ql("a",Sn,{[mt]:()=>{Hl(Dn,"go"),Fl(Sn,vt)}},"b.abs-tr",vt);Pl(Un,"close"),Pl(Sn,"link","ph").onclick=()=>Bn.focus();let $n=()=>{""!==Bn.value?Hl(Sn,"blank"):Fl(Sn,"blank")},Bn=Ql("textarea",Sn,{[gt]:A,oninput:$n,onchange:$n},"src"),Mn=Ql("a",Sn,{[mt]:()=>Pn(Bn.value)},"sb");Ql(It,Mn,{[ft]:v}),er(Bn,Mn);let Zn=[],Xn=[],Nn=()=>{if(cl)Hl(En,vt);else{let e=Math.min(Xn.length,1);Fl(En,vt),Zn.length=e;for(let e=1;e<Xn.length;e++)Xn[e]?.remove();Xn.length=e,Kn&&jn.click()}if(Fl(jn,kt),Hl(jn,".t"),Hl(Dn,"go"),!Xn.length)return Kn&&jn.click(),Fl(Yn,kt),Fl(Un,vt),void Hl(Sn,vt);Hl(Yn,kt),Hl(jn,kt),Hl(Un,vt),Fl(Sn,vt),1==Xn.length?$l("--r2t","0px"):$l("--r2t","50%");let e=(Xn.length-1)/2,t=0,l=0;for(let r=0;r<Xn.length;r++){let n=Xn[r];Hl(n,..."r1.r2.c1.c2.c3.c4".split(".")),r<e?(Fl(n,"r1"),t++,Fl(n,"c"+t)):(Fl(n,"r2"),l++,Fl(n,"c"+l))}$l("--rw1",t),$l("--rw2",l)},Qn=e=>{let t=e.match(qt);if(t)return Rn(t[2]);let l=e.match(Kt);if(l){let t=0,r=e.match(/t=([0-9]+)/);return r&&(t=r[1]),Fn(l[2],t)}li(e)},Pn=e=>{if(DEBUG&&Tl("step 1",e),!e)return bn(I);if("show log"==e)return Hl(s,vt);if("clear options"==e)return tn({});if("show options"==e)return Tl(Wr);if("refresh update"==e)return To();let t=Zn.length;if(!/[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\+.~#?&//=]*)/.test(e))return bn(I);/^[A-Za-z]+:\/\//.test(e)||(e="https://"+e),DEBUG&&Tl("step 2",e),Qn(e),0===t&&1===Zn.length&&qn(!1),Nn()};onmessage=e=>{let t;t="object"==typeof e.data?e.data:JSON.parse(e.data),t&&(t.type==wt?(e=>{let t=rt[ht]("#"+e).parentNode,l=t.classList.contains("d"),r=t.getAttribute("data-src"),n=Ql("img",null,{src:r,draggable:!1},l?"d":"_");l||(n[mt]=()=>onImageClick(r)),t.insertAdjacentElement("beforebegin",n),Fl(t,vt)})(t.id):t.type==yt?(e=>{let t=decodeURIComponent(e).r(/&amp;/g,"&");kn({title:x,desc:t,options:[{text:C,icon:"open_in_new",[mt]:e=>{let l=Ql("a",null,{href:t,target:"_blank"});l.click(),l.remove(),e()}},{text:v,[mt]:e=>{Pn(t),e()},enter:!0}],close:!0})})(t.url):t.type==Ot&&((e,t)=>{let l=document[ht]("#"+t);if(!l)return;let r,n=l[dt]("img"),i=[],a=0;for(let t=0;t<n.length;t++){let l=n[t];if(l.classList.contains(vt))continue;if(l.classList.contains("d"))continue;let r=l.getAttribute("data-osrc");r==e&&(a=t),i.push(r)}DEBUG&&Tl(i,e,a);let o=!1,c=Ql(bt,yn,{[mt]:()=>{o||(Fl(r,"fo"),Qt((()=>{c.remove()}),200),wn(!0))}},"ipvs");r=Ql("img",c,{src:i[a],draggable:!1,[mt]:()=>{o=!0,Nt((()=>o=!1))}},"ipv");let s=Ql(bt,c,"fr"),u=Ql("a",s,{[mt]:()=>{o=!0;let e=Ql("a",null,{href:r.src,download:""});e.click(),e.remove(),Nt((()=>o=!1))}},"b");Pl(u,"download"),Ql(It,u,{innerText:je}),wn()})(t.src,t.id))};let Rn=e=>{li(Gt+"player.twitch.tv/?channel="+e+"&parent=gall.dcinside.com")},Fn=(e,t=0)=>{li(Gt+"www.youtube.com/embed/"+e+"?start="+t,{allow:"autoplay; picture-in-picture"})},Hn=null,Vn="",Wn=!1,ei=0,ti=0,li=(e,t={})=>{if(Bn.value="",Zn.includes(e)){let t=Xn[Zn.indexOf(e)];return Fl(t,"hl-alt"),void Qt((()=>Hl(t,"hl-alt")),500)}let l;cl||(Zn.length=0,Xn[0]?.remove(),Xn.length=0),Zn.push(e),rn("videos-"+Vt,Zn);let r=Ql(bt,Dn);Xn.push(r),l=()=>Xn.indexOf(r);let n=(t,l)=>{Hn||(Fl(r,"drg"),ei=()=>r.getClientRects()[0].width/2,ti=()=>r.getClientRects()[0].height/2+50,$l("--mx",t-ei()+"px"),$l("--my",l-ti()+"px"),Hn=r,Vn=e)},i=(e,t)=>{Nt((()=>{$l("--mx",e-ei()+"px"),$l("--my",t-ti()+"px")}))},a=Ql(bt,r,{onmousedown:e=>{n(e.clientX,e.clientY),onmouseup=()=>{Hl(r,"drg"),Hn=null,onmouseup=null,onmousemove=null},onmousemove=e=>i(e.clientX,e.clientY)},onmousemove:()=>{if(!Hn||Wn)return;let e=l(),t=Xn.indexOf(Hn);e!=t&&(Xn.splice(t,1),Xn.splice(e,0,Hn),Zn.splice(t,1),Zn.splice(e,0,Vn),Wn=!0,tn(),Qt((()=>Wn=!1),200),Nn())},ontouchstart:e=>{n(e.touches[0].clientX,e.touches[0].clientY);let t=()=>{Hl(r,"drg"),Hn=null,ontouchend=null,ontouchcancel=null,ontouchmove=null};ontouchend=t,ontouchcancel=t,ontouchmove=e=>{i(e.touches[0].clientX,e.touches[0].clientY);let t=rt.elementFromPoint(e.touches[0].pageX,e.touches[0].pageY);t?.onmousemove?.()}}},"grab.fr");Pl(a,"drag_indicator"),t.sandbox="allow-same-origin allow-scripts";let o=Ql("iframe",r,t);Nn(),o.src=e;let c=Ql("a",r,{[mt]:()=>((e,t)=>{Kl(Zn,e),Kl(Xn,t),tn(),t.remove(),Nn()})(e,r)},"close.b.abs-tr");Pl(c,"close"),In(c,{text:Ge})};en["videos-"+Vt]=e=>{for(let t of e)Zn.includes(t)||Qn(t)},Yn[mt]=()=>{Zn.length=0;for(let e of Xn)e.remove();Xn.length=0,tn(),Nn()},DEBUG&&Tl("chat");let ri=[],ni=Ql(bt,Cn,"chat"),ii=Ql(bt,ni,"hd");Ql(It,ii,{[ft]:T},"h");let ai=!1,oi=Ql("a",ii,{[mt]:()=>{ai||(ai=!0,To("button"),Fl(ci,"rotate-ccw-half"),Qt((()=>{ai=!1,Hl(ci,"rotate-ccw-half")}),800))}},"help.b.abs-tl"),ci=Pl(oi,"sync"),si=Ql("a",ii,{href:Yt,target:"_blank"},"help.b.abs-tr");Pl(si,"help");let ui=Ql(bt,ni,"vp"),pi=Ql(bt,ui,"page"),di=Ql(bt,ni,"cb-c"),hi=Ql("a",di,{[mt]:()=>{for(;ri.length;)ri.shift().click()}},"r.b.ca.right.sd");Pl(hi,"close");let fi=()=>{ri.length?Hl(hi,"sd"):Fl(hi,"sd")},gi={},mi={},_i=[],yi=Ql("a",di,{[mt]:()=>{if(!_i.length)return;let e=_i.shift();for(let t of e[1])gi[e[0]](t);let t=Ql("a",null,{href:"#"+e[0]});t.click(),t.remove(),Oi()}},"r.b.nt.right.sd");Pl(yi,"notifications");let wi=Ql(It,yi,"cnt.abs-tl.fade"),Oi=()=>{_i.length?(Hl(yi,"sd"),Hl(wi,"fade"),wi[ft]=_i.length<10?_i.length:"9+"):(Fl(yi,"sd"),Fl(wi,"fade"))},vi=(e,t)=>"n"+e+"_"+t,ki=(e,t,l=null)=>{if(!mi[e])return void(DEBUG&&Tl("post",e,"is not my post"));let r=vi(e,t);if(!gi[r])return void(DEBUG&&Tl("comment",t,"is not a comment in interest"));let n=_i.find((e=>e[0]==r));n||(n=[r,[]],_i.push(n)),n[1].push(l),Oi()},bi=(e,t,l)=>{mi[e]=!0,gi[vi(e,t)]=l},Ii=Ql("a",di,{[mt]:()=>o(),onscroll:e=>e.preventDefault()},"r.pd.fr",st?"m":"_",vt),xi=Ql(bt,Ii,"not-hover");Pl(xi,st?Lt:"pause"),Ql(It,xi,{[ft]:q},"text",st?vt:"_");let Ci=Ql(bt,Ii,"hover");Pl(Ci,Lt);let Ai=Ql(It,Ci,{[ft]:J},"text",st?vt:"_"),Li=0;ui.onscroll=()=>{let e=Math.abs(pi.scrollHeight-ui.clientHeight-ui.scrollTop),t=Li-e;if(Li=e,e<2&&Ji(),0!=t)return t<0&&vl&&e>2?0==Il?o():void(Il=Math.max(Il-1,0)):void(!vl&&e<2&&o())};let Ei={},Di=async(e,t,l,...r)=>{let n,i=((e,t,l)=>l?e+l:e+t)(e,t,l);null!=Ei[i]?n=Ei[i]:(n=await(async e=>{let t=jl.encode(e);return"#"+function(e){return[...new Uint8Array(e)].map((e=>e.toString(16).padStart(2,"0"))).join("")}(await crypto.subtle.digest("SHA-256",t).catch(Tl)).slice(0,6)})(i).catch(Tl),Ei[i]=n),n=function(e){let t=Xt(e.substring(1,7),16);return"hsl("+Math.floor(360*t/16777215)+",80%,60%)"}(n);for(let e of r)e&&(e.style.color=n)},Ti=(e,t,l,r,n,i)=>{n&&Ql("img",e,{src:n},"nikcon");let a=Ql(It,e,{[ft]:t},"name"),o=null;l?i||(o=Ql(It,e,{[ft]:l},"ip.id")):r&&(o=Ql(It,e,{[ft]:r},"ip")),Ql(It,e,{[ft]:": "}),Di(t,l,r,a,o)},qi=e=>{Ol=e;let t=K;0!=e&&(t=e>20?j:e+G),Ai.innerText=z+t},Ji=()=>{let e=pi.childNodes;for(;e.length>80;){let t=e[0];Ki(t)}},Ki=e=>{for(let t=0;t<ji.length;t++)if(ji[t].chat==e){ji.splice(t,1);break}let t=e[dt]("removed");t&&t.length&&(t[0].value=!0),e.remove(),a(!0)};a=(e=!1)=>{if(Il=e?1:0,vl)return ui.scrollTop=pi.scrollHeight},o=()=>{vl=!vl,vl?(Fl(Ii,vt),qi(0),a(!0)):Hl(Ii,vt)};let ji=[],Gi={},zi={},Yi={},Si={},Ui=e=>{vl||qi(Ol+1),Hl(e,vt),a(!0)},$i=async e=>{let t=e.num,l=Ql(bt,pi,"chl",vt),r=Ql("input",l,{type:vt,value:!1},"removed"),n=Ql(bt,l,"tt.r"),c=Ql(It,n),s=e.nickname,u=e.ip,p=(e=>{let t=e.matchAll(/&#x([0-9a-fA-F]+);/g);for(let l of t){let t=String.fromCodePoint("0x"+l[1]);e=e.replace(l[0],t)}return e})(decodeURIComponent(e.title)),d=e.id,h=e.img,f=e.fix,m=e.my??!1,_=an(),y=cn(Vt,ll);(sn(e,_)||sn(e,y))&&Fl(l,"block"),ji.push({chat:l,title:p,id:d,ip:u,nickname:s}),s?Ti(c,s,d,u,h,f):Fl(l,"notify");let w,O=Ql(It,c,{[ft]:p},"tt"),b=!1,I=[];for(let t of p.matchAll(Dt)){let l=t[0],r=t[1],n=t[2],i=Yr(r,n);i?(Mr(O,l,i),a(!0)):(I.push([l,r,n]),b||(b=!0,(async()=>{let{write:t}=await ko(e.num).catch(Tl);if(!t)return;let l=dr(t,"img","written_dccon");for(let e of l){let t=gr(e,"src").match(Tt);if(t)await jr(t[1]).catch(Tl);else{let t=gr(e,"data-src").match(Tt);t&&await jr(t[1]).catch(Tl)}}for(let e of I){let t=Yr(e[1],e[2]);t&&Mr(O,Et(e[0]),t)}a(!0)})()))}if(t){n.id=vi(t,0);let e=Ql(bt,l,"w.zero");w=Ql(bt,e,"vp.post");let s=Ql(bt,w,{id:"pc-"+t},"page.pc"),p=!0;m&&bi(t,0,(()=>{p&&n.click()}));let d=()=>{Fl(l,"open"),Hl(e,"zero"),i(0),vl&&o(),J(),Kl(ri,n),ri.push(n),ri.length>5&&ri.shift().click(),fi(),ko(t).catch(Tl).then((({text:e})=>{const t=e.matchAll(/<iframe[^>]*id="movieIcon([^"]*)"[^>]*>[^<]*<\/iframe>/g);t?(async()=>{for(const l of t){const t=zt+"board/movie/movie_view?no="+l[1],r=await br(t);if(!r)continue;const n=r.match(/<video[^>]*poster="([^"]*)"[^>]*>[^<]*<source[^>]*src="([^"]*)"[^>]*type="([^"]*)"[^>]*>/);if(!n)continue;const i=Ql(bt,null,"v-container"),a=Ql(bt,i,"video_wrap");Ql("source",Ql("video",Ql(bt,a,"video_inbox"),{controls:!0,playsinline:!0,controlslist:"nodownload",poster:n[1],"data-no":l[1]},"dc_mv"),{src:n[2],type:n[3]}),e=e.r(l[0],i.outerHTML),i.remove()}s.innerHTML=e})():s.innerHTML=e}))};n.onclick=()=>{if(p=!p,gl==t&&i(0),p){for(Kl(ri,n),Fl(e,"zero"),Hl(l,"open");s.lastChild;)s.lastChild.remove();return a(),void fi()}d()};let h,f,_=Ql(bt,e,"cm",vt),y=Ql(bt,_,"vp"),O=Ql(bt,y,"page"),b=Ql("a",_,{[mt]:()=>h()},"ex.sm.r");Pl(b,"more_vert");let I=Ql("a",e,{[mt]:()=>{gl==t?i(0):i(t,l,x)}},"ic.r"),x=Ql(It,I,{[ft]:M}),C=Ql("a",e,{[mt]:()=>n.click()},"ex.alt");Pl(C,"expand_less");let A={},L=[],E=[],D=Ql(bt,O,"w"),T=0,q=0,J=async()=>{if("false"!=r.value)return;let e=await Io(t).catch(Tl);if(!e)return;e.count?Hl(_,vt):Fl(_,vt);let o=T;for(let r in e.comments){if(L.includes(r))continue;L.push(r),q>20&&(D=Ql(bt,O,"w",vt),o++,q=0);let a=e.comments[r],c=Ql(bt,null,"w"),s=Ql("a",null,"cml.r");s.id=vi(t,r);let d=a.text,h=a.target,f=a.name;if(h){let t=e.comments[h];t&&(f=t.name),Fl(s,"re"),Pl(Ql(bt,s,"re-icon"),At)}let _=d.length>8&&d.substring(d.length-8)==_l;_?(_l="",bi(t,h||r,(e=>{p&&n.click(),Fl(e,"hl"),Qt((()=>Hl(e,"hl")),500)}))):ki(t,h,s),s.onclick=()=>i(t,l,x,s,h||a.num,a.name,f),null==A[h]?(A[a.num]=c,c.appendChild(s),D.appendChild(c),E.length==o&&E.push(D)):A[h].insertAdjacentElement("beforeend",s);let y=Ql(bt,s,"writer-dlc");Ti(y,a.name,a.id,a.ip,a.img,a.fix),Ql(bt,s,{innerHTML:d},"text"),q++;let w=[{text:Me,icon:"delete",[mt]:async()=>{let e="",{delId:l,delValue:n,vCurT:i}=await ko(t).catch(Tl);if(u||a.ip){let{r:t,p:l}=ql(),r=kn({title:S,input:e,nowrap:!0,options:[{text:v,[mt]:l=>{if(e=r.input.value,e.length<2)return bn(g);l(),t(!0)}},{text:k,[mt]:e=>{e(),t(!1)}}]});if(!await l)return}let o=await Lr(r,{num:t,id:l,value:n,vCurT:i},e);o||bn(he);let c=o.split("||");return"true"==c[0]?(s.remove(),J()):1==c.length?bn(o):void bn(he)}}];(m||u||_||a.ip||a.id==ul)&&xn(s,w)}f(),a(!0)};h=()=>{T++;let e=E[T];e&&Hl(e,vt),f()},f=()=>{T+1==E.length?Fl(b,vt):Hl(b,vt)};let K=Ql(It,c,"cm.fr",vt);Pl(K,At,"f");let j=Ql(bt,K,"nc.gray-div"),G=Ql(It,K,{[ft]:"+"}),z=[],Y=[],U=[];for(let e=0;e<3;e++){let t=Ql(bt,j,"num-"+e);Y.push(Ql(It,t,"old")),U.push(Ql(It,t,"new")),z.push(t)}let $=(e,t,l)=>{let r=3-t+e,n=U[r][ft];Y[r][ft]=n,U[r][ft]=l,l!=n&&(Fl(z[r],"changed"),Qt((()=>Hl(z[r],"changed")),500))},B=e=>(e+"").split("").reverse();Yi[t]=(e=-1,l=!1)=>{if("false"!=r.value)return void delete Yi[t];let n=()=>{-1==e&&(e=zi[t]+1),zi[t]=e;let l=B(e);l.length>3?(l="999".split(""),Hl(G,vt)):Fl(G,vt);for(let e=0;e<l.length;e++)$(e,l.length,l[e]);e?(Hl(K,vt),a(!0)):Fl(K,vt),p&&!mi[t]||J().catch(Tl)};l?n():Qt(n,Jl(1,yl))}}if(e.date){let t=Ft()-e.date;(t>yl||!bl)&&Ui(l),Qt((()=>Ui(l)),yl-t)}else Ui(l);vl||Ji();let x=[];(m||u||al&&d==ul)&&x.push({text:Me,icon:"delete",[mt]:()=>{kn({title:Ze,desc:Xe,options:[{text:v,enter:!0,[mt]:async(e,r)=>{r();let n="";if(u){let{r:t,p:l}=ql(),r=kn({title:S,input:n,nowrap:!0,options:[{text:v,enter:!0,[mt]:(e,l)=>{if(n=r.input.value,n.length<2)return bn(g);t(!0),e()}},{text:k,[mt]:e=>{t(!1),e()}}]});if(!await l)return e()}let i=await(async(e,t="")=>{let l=await br((e=>tr()+"delete/?id="+Vt+"&no="+e)(e));if(!l)return jo("not available");let r={[xt]:"",_GALLTYPE_:Wt};if(!vr(l,"delete",r))return jo("no form");let n=or(l);if(!n)return jo("no secret");r.service_code=cr(r.service_code,n);let i=l.match(/formData \+= "&([0-9a-z]+)=([0-9a-z]+)&/);if(!i)return jo("not valid");if(r[i[1]]=i[2],t&&(r.password=t),i=l.match(/dcc_key_v1 = document.getElementById\(["']([^"']+)["']\).getAttribute\(["']([^"']+)["']/),i){let e=l.match(new RegExp(`<input[^>]+id=["']${i[1]}["'][^>]*>`));e&&(r.dcc_key_v1=gr(e[0],i[2]))}return await Ml(Cr,[t?Zt:Mt],r,"delete_submit")})(t,n);e();let a=i.split("||");if("false"==a[0])return bn(a[1]);Ki(l)}},{text:k}]})}},{hr:!0}),t&&(x.push({text:C,icon:"open_in_new",[mt]:()=>{let e=Ql("a",null,{href:ir(t),target:"_blank"});e.click(),e.remove()}},{text:Ne,[mt]:()=>{window.navigator.clipboard.writeText(ir(t))}}),m||!u&&d==ul||(x.push({hr:!0}),u?x.push({text:Pe,[mt]:()=>{kn({title:Fe,desc:"IP: "+u,options:[{text:We,[mt]:e=>{let t=cn(Vt,ll);t.on=1,hn(t,"ip",u),dn(t,Vt),e()}},{text:Ve,[mt]:e=>{let t=an();t.on=1,hn(t,"ip",u),pn(t),e()}},{text:k}]})}}):x.push({text:Qe,[mt]:()=>{kn({title:Fe,desc:"ID: "+d,options:[{text:We,[mt]:e=>{let t=cn(Vt,ll);t.on=1,hn(t,"id",d),dn(t,Vt),e()}},{text:Ve,[mt]:e=>{let t=an();t.on=1,hn(t,"id",d),pn(t),e()}},{text:k}]})}}),x.push({text:Re,[mt]:()=>{kn({title:Fe,desc:s,options:[{text:We,[mt]:e=>{let t=cn(Vt,ll);t.on=1,hn(t,"nick",s),dn(t,Vt),e()}},{text:Ve,[mt]:e=>{let t=an();t.on=1,hn(t,"nick",s),pn(t),e()}},{text:k}]})}}))),x.length&&(xn(n,x),xn(w,x))};DEBUG&&Tl("input login");let Bi=Ql(bt,ni,"li-c"),Mi=Ql("a",Bi,{[mt]:()=>c()},vt,"ex.tab"),Zi=Pl(Mi,"expand_more");c=()=>{xl=!xl,xl?(Zi.innerText="expand_more",Hl(Ni,vt)):(Zi.innerText="expand_less",Fl(Ni,vt)),a(!0)};let Xi,Ni=Ql(bt,Bi,"fr",vt),Qi=Ql("input",Ni,{type:"text",[gt]:Y,maxlength:15,name:"name"}),Pi=Ql("input",Ni,{type:"password",[gt]:S,maxlength:20,name:"password"}),Ri=Ql(bt,Bi,"fr",vt),Fi=Ql("a",Ri),Hi=Ql("img",Fi,{[mt]:()=>ea()},"captcha"),Vi=Ql("input",Ri,{type:"text",[gt]:U,maxlength:20}),Wi=()=>{il&&(Cl?(Qi.value=Cl,Fl(Qi,kt)):Hl(Qi,kt))},ea=async()=>{if(Vi.value="",Dl()){let e=El(),t={ci_t:Sl("ci_c"),gall_id:Vt,kcaptcha_type:e?"write":"comment",_GALLTYPE_:Wt},l=zt+"kcaptcha/session";e?await Cr(l,t).catch(Tl):await Ar(gl,l,t).catch(Tl),Hi.src=zt+"kcaptcha/image/?gall_id="+Vt+"&kcaptcha_type="+(e?"write":"comment")+"&time="+Ft()+"&_GALLTYPE_="+Wt,Hl(Ri,vt)}else Fl(Ri,vt)};l=()=>{al||nn(ee)?Fl(Bi,vt):(Hl(Ni,vt),Hl(Mi,vt),a(!0)),Xi?.()};let ta=()=>Qi.value??"",la=()=>Cl||(al?sl:ta()),ra=()=>Pi.value??"",na=()=>Vi.value??"",ia=Ql(bt,ni,"ri-c",vt),aa=Ql(bt,ia,"tab"),oa=Ql(It,aa,"name"),ca=Pl(aa,"more_horiz",vt),sa=Ql(It,aa,"name",vt),ua=Ql(It,aa,{[ft]:$});DEBUG&&Tl("input chat");let pa=Ql(bt,ni,"ci-c"),da=Ql(bt,pa,"f"),ha=Ql(bt,da,"i"),fa="--ih",ga=Ql("textarea",ha,{[gt]:L,oninput:()=>{$l(fa,ga.clientHeight+12+"px"),ga.style.height=0,ga.style.height=ga.scrollHeight-19+"px",a(!0),Nt((()=>$l(fa,0)))},onblur:Vl},kt),ma=null,_a=null,ya=null;i=(e,t,l,n=null,i=0,o="",c="")=>{if(null!=n&&n==ya&&(e=0,i=0),ma&&_a&&(ya&&Hl(ya,"rp"),Hl(ma,"wr"),Hl(ma,"rp"),_a[ft]=M,Hl(_a,"f-white"),Fl(ia,vt),Hl(ui,"r"),Fl(ca,vt),Fl(sa,vt)),gl=e,ml=i,El())ol&&(Fl(ga,kt),Fl(Ba,kt),Fl(Ca,kt),Fl(Oo,kt),al||Fl(Bi,vt)),Hl(pa,"wr"),ga[gt]=L,ma=null,_a=null,ya=null;else{if(ol&&(Hl(ga,kt),Hl(Ba,kt),Hl(Ca,kt),Hl(Oo,kt),al||Hl(Bi,vt)),Fl(pa,"wr"),Fl(t,"wr"),n&&i)Fl(n,"rp"),Fl(t,"rp"),ga[gt]=E,oa[ft]=o,o!=c&&(sa[ft]=c,Hl(ca,vt),Hl(sa,vt)),ua[ft]=$,l[ft]=k,Hl(l,"f-white");else{let t=Gi[e];oa[ft]=t.name,ga[gt]=D,ua[ft]=B,l[ft]=Z,Fl(l,"f-white")}Hl(ia,vt),Fl(ui,"r"),ma=t,_a=l,ya=n??null,ga.focus()}r(),ea(),ja(),Wi(),a(!0)},DEBUG&&Tl("dccon");let wa=Ql(bt,pa,"p.p-dccon",vt),Oa=Ql(bt,Ql(bt,Ql(bt,wa,"dcl"),"vp"),"page"),va=Ql(bt,Ql(bt,Ql(bt,wa,"dcc"),"vp"),"page"),ka=e=>{let t=e.idx,l=e.title,r="dc"+t,n=Ql(bt,null,"package"),i=rt[ht]("#"+r);if(i)va.replaceChild(n,i);else{va.appendChild(n);let t=Ql("a",Oa,{href:"#"+r,[mt]:()=>{ga.focus(),Vl()}});l==d?Pl(t,"history"):Ql("img",t,{src:Sr(e.code)})}n.setAttribute("id",r),Ql(It,Ql(bt,n,"hd.r"),{[ft]:l});let a=Ql(bt,n,"flex.fr");for(let t of e.detail){let e=t.code,r=t.title,n=t.package_title;Ql("img",a,{loading:"lazy",src:Sr(e),[mt]:async()=>{let t=await jr(e);if(DEBUG&&Tl(n,r,t),El()){$r(t);let n=l;l==d&&(null!=Dr[e]||await jr(e),n=Dr[e].package_title),ga.focus(),ga.value+=":"+n+", "+r+": "}else Br(t,gl)}},"d")}},ba=async e=>{await(async e=>{if("recent"==e&&await Ur(e,0),"icon"==e){let t=Math.min(await Ur(e,0),20);for(let l=1;t>=l;l++)await Ur(e,l)}})(e).catch(Tl)};en["dccon-pk"]=e=>{for(let t in e){if(Tr.includes(t))continue;let l=e[t];for(let e of l.detail)Dr[e.code]=e;Tr.push(l.title)}};let Ia=!0,xa=!1,Ca=Ql("a",da,{onmousedown:()=>(Ia=!Ia,Ia?(Hl(Aa,"f"),Fl(wa,vt)):(ga.focus(),Fl(Aa,"f"),Hl(wa,vt),xa||(xa=!0,ba("recent"),ba("icon"))),void Nt((()=>ga.focus())))},"d.b",kt),Aa=Pl(Ca,"mood");DEBUG&&Tl("upload");let La=Ql(bt,da,"p.up.abs.vp.pv-vp",vt),Ea=Ql(bt,La,"fr.page"),Da=Ql("a",Ea,{[mt]:()=>$a.click()},"pv.r.b.o-l");Pl(Da,"add_photo_alternate"),Ql(It,Da,{[ft]:Ye});let Ta=null,qa=!1,Ja=[],Ka=!1,ja=()=>{null!==Ta&&(co?(Hl(Ta.preview,vt),qa?Hl(Ta.preview,"up"):Fl(Ta.preview,"up")):Fl(Ta.preview,vt)),Na[ft]=Ja.length,0==Ja.length?Fl(Na,vt):Hl(Na,vt),Ka&&El()?(Hl(La,vt),Fl(Xa,"f")):(Fl(La,vt),Hl(Xa,"f"))},Ga=(e=null)=>{Ka=null===e?!Ka:e,ja()},za=(e,t)=>{let l=Ql(bt,e,"pv.r"),r=Ql(bt,l,"image"),n=Ql("img",r),i=Ql(bt,l,"desc"),a=Ql(It,i,{[ft]:t.name},"file-name");return Ql(It,i,{[ft]:"("+Nl(t.size)+")"},"size"),{p:l,c:r,i:n,n:a}},Ya=e=>{let{p:t,c:l,i:r}=za(Ea,e),n=Pl(l,"pending","pending.abs"),i=Pl(l,"warning","error.abs",vt),a=new FileReader;a.onload=()=>r.src=a.result,a.readAsDataURL(e);let{r:o,p:c}=ql(),s={preview:t,img:r,original:e.name,name:"",size:e.size,type:e.type,upload:!1,file:e,error:!1,num:0,url:"",close:async()=>{t.remove();for(let e=0;e<Ja.length;e++){let t=Ja[e];if(s===t){Ja.splice(e,1);break}}ja(),s.upload?Er(s.num):(await c.catch(Tl),s.error||Er(s.num))},p:c};Ja.push(s);let u=Ql("a",t,"close.abs-tr.b");Pl(u,"delete","f"),u.onclick=()=>s.close();let p=(e,...l)=>{bn(e),Tl(e,...l),s.error=!0,Fl(t,"error"),Hl(i,vt)};return(async e=>{let t={r_key:el,gall_id:Vt,gall_no:tl,post_no:"",upload_ing:"N",_GALLTYPE_:Wt};try{let l=((e,t)=>{let l=Ql("form",null,{entype:"multipart/formdata"}),r=new FormData(l);for(let t in e)r.append(t,e[t]);return t&&t.name&&r.append("files[]",t,t.name),r})(t,e),r={credentials:"same-origin",referrer:zt,referrerPolicy:"strict-origin-when-cross-origin"},n=Gt+"upimg.dcinside.com/upimg_file.php?id="+Vt+"&r_key="+el,i=await Ir(n,r,l).catch(Tl);return i?JSON.parse(i).files[0]??null:null}catch(e){return Tl(e),null}})(e).catch(Tl).then((e=>(Fl(n,vt),e?e.error?p(e.error,e):(s.upload=!0,Fl(t,"up"),s.name=e.name,s.url=e.url,s.num=e.file_temp_no,void o()):p(_e)))),s},Sa=(e=null)=>{if(null!==Ta&&Ta.close(),null===e)return Ta?.preview.remove(),rn("zzal",""),Hl(oo,vt),void(Ta=null);Ta=e,Fl(Ta.preview,"o-f","z");for(let t=0;t<Ja.length;t++)Ja[t]===e&&Ja.splice(t,1);e.close=()=>{qa=!0};let{p:t,i:l,n:r}=za(Va,e);Fl(t,"up","o-f"),Fl(oo,vt);let n=Ql("a",t,"close.abs-tr.b");Pl(n,"delete","f"),n.onclick=()=>{kn({desc:ze,options:[{text:b,[mt]:e=>{Sa(null),t.remove(),e()},enter:!0},{text:k}]})};let i=()=>{l.src=e.img.src,r.innerText=e.name;let t=(e=>({name:e.name,size:e.size,type:e.type,url:e.url,src:e.img.src}))(e);rn("zzal",JSON.stringify(t))};e.upload?i():(async()=>{await e.p,i()})(),ja()},Ua=e=>e.size>2e7?bn(me):ol?bn(Ae):(Ya(e),ja(),void Ga(!0)),$a=Ql("input",null,{type:"file",accept:"image/*",multiple:"true",onchange:()=>{for(let e of $a.files)Ua(e)}}),Ba=Ql("a",da,{[mt]:()=>Ga()},"up.b.abs-tl",kt);In(Ba,{text:Ie,top:!0}),ondragenter=async e=>{if(e.dataTransfer&&e.dataTransfer.files){let t=(e.dataTransfer.files.length>0?e.dataTransfer.files:e.dataTransfer.items)[0];if(!t.type||"image"!=t.type.split("/")[0])return;Fl(_n,"drag")}},_n.ondragenter=e=>{e.preventDefault()},_n.ondragover=e=>e.preventDefault(),_n.ondragleave=()=>{Nt((()=>Hl(_n,"drag")))},_n.ondrop=e=>{if(e.preventDefault(),Hl(_n,"drag"),e.dataTransfer.files){let t=!1;for(let l of e.dataTransfer.files)l.type&&"image"==l.type.split("/")[0]?Ua(l):t=!0;t&&bn(Ce)}},ct&&rt.addEventListener("paste",(async()=>{let e=await window.navigator.clipboard.read(),t=0;for(let l of e){Tl(l);let e=null;for(let t of l.types)if(e=t.match(/image\/(.+)$/),Tl(e),e)break;if(Tl(e),!e)continue;let r=await l.getType(e[0]),n=new File([r],`image_${t}.${e[1]}`);Ua(n),t+=1}}));let Ma,Za,Xa=Pl(Ba,"add_circle"),Na=Ql("span",Ba,{[ft]:0},"cnt.abs-tr",vt);r=()=>{El()&&!ol?Hl(Ba,kt):Fl(Ba,kt)},DEBUG&&Tl("settings");let Qa=Ql(bt,pa,"p.p-settings",vt);Ql(It,Ql(bt,Qa,"hd"),{[ft]:X},"h"),Pl(Ql("a",Qa,{[mt]:()=>Ma()},"b.abs-tr"),"close");let Pa=Ql("a",Qa,{[mt]:()=>Za()},"b.abs-tl",vt);Pl(Pa,"navigate_before");let Ra=Ql(bt,Qa),Fa=Ql(bt,Ra,"opts"),Ha=Ql(bt,Ra,"opts",vt),Va=Ql(bt,Ra,"opts",vt),Wa=Ql(bt,Ra,"opts",vt),eo=Fa;Za=(e=Fa)=>{Fl(eo,vt),Hl(e,vt),eo=e,e==Fa?Fl(Pa,vt):Hl(Pa,vt)};let to=(e,t,l,r,n=!1,i=Fa)=>{let a=n,o=Ql(bt,i,"opt");a&&Fl(o,"chk");let c=Ql(bt,o,"label.fr");return t&&Pl(c,t),Ql(It,c,{[ft]:e}),Pl(Ql(It,o,"value"),"check_small"),o.onclick=()=>rn(e,!a),en[e]=e=>{a=e,a?(Fl(o,"chk"),l?.()):(Hl(o,"chk"),r?.())},ln(e,n),o},lo=(e,t,l,r,n,i,a)=>to(e,t,(()=>$l(l,r)),(()=>$l(l,n)),i,a),ro=(e,t,l="")=>{let r=Ql(bt,Fa,{[mt]:()=>Za(t)},"opt.r"),n=Ql(bt,r,"label.fr");return l&&Pl(n,l),Ql(It,n,{[ft]:e}),Pl(r,"navigate_next","abs-r"),r};ro(tt,Ha,"block");let no=(e,t,l,r)=>{let n=Ql("a",t,{[mt]:()=>{let t=kn({title:e,options:[],close:!0}).content,n=Ql(bt,t,"b-entry.fr"),i=()=>{Rl(n);let e=l?an():cn(Vt,ll),t=e[r].split("||");for(let a of t){if(""==a)continue;let t=Ql(bt,n,"entry.fr");Ql(It,t,{[ft]:'"'+a+'"'});let o=Ql("a",t,{[mt]:()=>{fn(e,r,a),l?pn(e):dn(e,Vt),i()}});Pl(o,"close","sml")}};i();let a=Ql(bt,t,"b-wrap.fr"),o=Ql("input",a,"nowrap"),c=Ql("a",a,{[mt]:()=>{if(!o.value)return;let e=l?an():cn(Vt,ll);hn(e,r,o.value),l?pn(e):dn(e,Vt),i(),o.value=""},[ft]:et},"sb");er(o,c,!1,!0)}},"opt.r"),i=Ql(bt,n,"label.fr");Ql(It,i,{[ft]:e}),Pl(n,"navigate_next","abs-r")};Ql(bt,Ha,{[ft]:Ve},"opt.hr"),no(He,Ha,!0,"word"),no(Qe,Ha,!0,"id"),no(Pe,Ha,!0,"ip"),no(Re,Ha,!0,"nick");let io=Ql(bt,Ha,{[ft]:We},"opt.hr");no(He,Ha,!1,"word"),no(Qe,Ha,!1,"id"),no(Pe,Ha,!1,"ip"),no(Re,Ha,!1,"nick"),ro(re,Va);let ao=Ql("input",null,{type:"file",accept:"image/*",multiple:"true",onchange:()=>{if(0===ao.files.length)return;let e=Ya(ao.files[0]);Sa(e),co||so.click()}}),oo=Ql("a",Va,{[mt]:()=>ao.click()},"pv.r.b.o-f");Pl(oo,"add_photo_alternate"),Ql(It,oo,{[ft]:Se});let co=!1,so=to(ne,null,(()=>{co=!0,null!==Ta&&Hl(Ta.preview,vt)}),(()=>{co=!1,null!==Ta&&Fl(Ta.preview,vt)}),!1,Va),uo="",po=Ql("a",Va,{[mt]:()=>{let e=kn({title:ie,input:uo,options:[{text:v,[mt]:t=>{uo=e.input.value,rn("footer",uo),t()}},{text:k}]}),t=e.input;Fl(t,"ft");let l=Ql(It,null,{[ft]:"- "+p,[mt]:()=>t.focus()},"footer-static");t.insertAdjacentElement("afterend",l)}},"opt.r");Ql(It,po,{[ft]:ie},"label"),Pl(po,"navigate_next","abs-r"),to(te,"dark_mode",(()=>Hl(nt,"light")),(()=>Fl(nt,"light")),!0);let ho=to(N,"splitscreen",(()=>{cl=!0,st&&!nn("mado")?kn({title:v,desc:Je,options:[{text:b,[mt]:e=>{Nn(),rn("mado",!0),e()},enter:!0},{text:k,[mt]:e=>{ho.click(),e()}}]}):Nn()}),(()=>{cl=!1,Nn()}),!st);ro(le,Wa);let fo=!0;to(H,null,(()=>fo=!0),(()=>fo=!1),!0),to(ee,null,(()=>{Fl(Ni,vt),Fl(Mi,vt)}),(()=>{al||(Hl(Ni,vt),Hl(Mi,vt))})),to(V,null,(()=>Rr(1)),(()=>Rr(0))),to(W,null,(()=>Fl(Cn,"co")),(()=>Hl(Cn,"co"))),to(ae,null,(()=>Hl(pi,"hn")),(()=>Fl(pi,"hn")),!1,Wa),to(R,null,(()=>{Hl(pi,"hu"),a(!0)}),(()=>{Fl(pi,"hu"),a(!0)}),!0,Wa),lo(Ee,null,"--cc","#fc5","var(--cf)",!0,Wa),lo(Q,null,"--sb","smooth","auto",!0,Wa);let go="--fs";to(P,null,(()=>{$l(go,"15px"),a(!0)}),(()=>{$l(go,"13px"),a(!0)}),!1,Wa),lo(F,null,"--ds","60px","80px",!1,Wa),Ql(It,Qa,{[ft]:"version: "+VERSION},"version");let mo=!0;Ma=()=>{mo=!mo,mo?(Hl(wo,"f"),Fl(Qa,vt)):(Fl(wo,"f"),Hl(Qa,vt))};let _o=Ql(bt,pa,"fr.sc"),yo=Ql("a",_o,{[mt]:Ma},"b.gray"),wo=Pl(yo,"settings"),Oo=Ql("a",_o,"sb",kt);Ql(It,Oo,{[ft]:oe}),er(ga,Oo,!0),DEBUG&&Tl("funcs");let vo={},ko=async(e,t=!1)=>{if(!t&&null!=Gi[e])return Gi[e];let l={num:e,name:"",text:ce,write:"",esno:"",string:"",delId:"",delValue:"",vCurT:""},r=await br(ir(e)).catch(Tl),n=()=>l;fl=!!new RegExp(`id="code_${e}"`).test(r);let i=ur(r,bt,"write_div");if(!i)return n();let a=ur(r,bt,"gallview_head");if(!a)return n();let o=pr(a,bt,"gall_writer");if(!o)return n();l.name=gr(o,"data-nick"),l.write=i,l.text=((e,t)=>{let l=e.matchAll(/<(img|video)[^>]*src="[^">]+no=([0-9a-zA-Z]+)[^">]*"[^>]*>/g);for(let r of l){let l=r[0],n=l,i=r[2];if(DEBUG&&Tl("src",i),/class="d"/.test(l))continue;let a=l.match(/class="([^"]+)"/);n=a?n.r(a[0],`class="${a[1]} img"`):n.r(">","")+' class="img">';let o=l.match(/on[Cc]lick="[^"]+no=([0-9a-zA-Z]+)[^"]*"/);n=o?n.r(o[0],`onclick="window.postMessage(JSON.stringify({type:'${Ot}',src:'${Pr(o[1])}',id:'${t}'}))" data-osrc="${Pr(o[1])}"`):n.r(">","")+` onclick="window.postMessage(JSON.stringify({type:'${Ot}',src:'${Pr(i)}',id:'${t}'}))" data-osrc="${Pr(i)}" draggable="false">`,e=e.r(l,n)}return e})(Qr(Xr(i).r(/(\r|\t)/g,"").r(/[ ]{2,}/g," ")),"pc-"+e);let c=Or(r,"e_s_n_o");c&&(l.esno=c),l.string=or(r),Gi[e]=l;let s={};if(vr(r,"_cmt_del_form_",s))for(let e in s)l.delId=e,l.delValue=s[e];let u=Or(r,"v_cur_t");u&&(l.vCurT=u);let p={cur_t:"",check_6:"",check_7:"",check_8:"",check_9:"",check_10:"",recommend:"0",user_ip:"",t_vch2:"",t_vch2_chk:"",service_code:""};return Fr(r,p),p.service_code=cr(p.service_code,l.string),vo[e]=p,n()},bo=async(e,t,l)=>{let r,n=await Ar(e,lr()+"comment/",t).catch(Tl);if(!n)return!1;try{r=JSON.parse(n)}catch(e){return Tl(e,n),!1}let i=r.total_cnt;l.count=i;let a=r.comments;if(!a||!a.length)return!1;for(let e of a){let t=Xt(e.no);if(0==t)continue;let r={num:t,id:"",ip:"",name:"",img:"",fix:!1,text:"",target:0};if(null!=l.comments[t])continue;l.comments[t]=r,r.id=e.user_id,r.ip=e.ip,r.name=e.name,r.text=Qr(Xr(e.memo).r(/\n/g,"<br />"));let n=e.c_no;n&&(r.target=Xt(n));let i=e.gallog_icon.match(/\<img src='([^']+)'/);if(i){let e=i[1];r.img=e,r.fix=mr(e)}}return!0},Io=async e=>{let{esno:t}=await ko(e).catch(Tl),l=zi[e],r={count:l,num:0,comments:{}};null!=Si[e]&&(r=Si[e]);let n={id:Vt,no:e,cmt_id:Vt,cmt_no:e,focus_cno:"",focus_pno:"",e_s_n_o:t,comment_page:1,sort:"D",prevCnt:"0",board_type:"",_GALLTYPE_:Wt},i=!0;for(;i;)i=await bo(e,n,r).catch(Tl),n.comment_page++;return l!=r.count&&Yi[e](r.count,!0),Si[e]=r,r},xo=[],Co=async(e,t=!1)=>{if(0==e.length)return;bl?kl&&$i({title:de}):t=!0,e=e.sort(((e,t)=>e.num-t.num));let l=0;for(let r of e)xo.includes(r.num)||(await $i(r).catch(Tl),r.count&&Yi[r.num]?.(r.count,t)),l=Math.max(l,r.num);wl=Math.max(wl,l),Ll&&Ll.postMessage({type:"ln",n:wl}),bl||($i({title:pe}),bl=!0,ol&&$i({title:ke})),kl=!1},Ao=()=>{let e,t,l,r,n,i,a,o,c,s,u,p,d,h,f,g;try{e=_DEBUG,t=_URL,l=_TEXT,r={},n=(e,t)=>{r[e]=t,self.postMessage({type:"cc",n:e,c:t})},i=async e=>self.postMessage({type:"pd",d:e}),a=_IT,o=_IH,c=_OH,s=_AT,u=_A,p=_TF,d=_SS,h=_SN,f=Number.parseInt,g=()=>_LN}catch{e=Tl,t=rr(),l=br,r=zi,n=(e,t)=>Yi[e]?.(t,kl),i=Co,a=hr,o=ur,c=pr,s=fr,u=gr,p=mr,d=ue,h=se,f=Xt,g=()=>wl}let m=e=>e.replace(/&amp;/g,"&").replace(/&nbsp;/g," ").replace(/&#035;/g,"#").replace(/&#039;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"');return{_UL:async()=>{let _=await l(t);if(_)try{_=_.replace(/(\n|\r|\t)/g,"");let e=[],t=_.matchAll(/<tr[^>]*class="[^"]*us-post[^"]*"[^>]*data-no="([^"]*)".+?<\/tr>/g);if(!t)return;for(let l of t){let t=l[0],i={num:0,subject:"",title:"",nickname:"",id:"",ip:"",date:0,img:"",fix:!1,count:0},_=f(l[1]);i.num=_;let y=t.match(/<span[^>]*class="[^"]*reply_num[^>]*"[^>]*>\[([0-9]+)\]<\/span>/),w=r[_]??0,O=0;if(y&&(O=f(y[1]),O&&(i.count=O)),_<=g()){O!=w&&n(_,O);continue}let v=a(t,"td","gall_tit");y&&(v=v.slice(0,v.length-y[1].length-2)),i.title=m(v);let k=o(t,"td","gall_num");if(k==d||k==h||"AD"==k)continue;let b=a(t,"td","gall_subject");if(i.subject=m(b),b==d||b==h||"AD"==b)continue;let I=c(t,"td","gall_writer");if(I){s(I,"data-nick",i,"nickname"),s(I,"data-uid",i,"id"),s(I,"data-ip",i,"ip");let e=I.match(/<img[^>]*src=["']([^"']+)["']/);if(e){let t=e[1];i.img=t,i.fix=p(t)}}let x=c(t,"td","gall_date"),C=u(x,"title");null!==C&&(i.date=Date.parse(C)),e.push(i)}await i(e)}catch(t){e(t)}}}},{_UL:Lo}=Ao(),Eo=()=>{let e=async()=>{let t,l,r,n;try{t=_UL,l=_IV,r=()=>{},n=_DEBUG}catch{l=yl,t=Lo,r=e=>Al=e,n=Tl}await t().catch((e=>{n(e),postMessage({type:"err"})})),r(setTimeout(e,l))};return{_UC:e}},{_UC:Do}=Eo(),To=(...e)=>{if(Tl("init update",...e),kl=!0,ot){Ll&&Ll.terminate();let e=new Blob([`let _URL='${rr()}';`,`let _IV=${yl};`,`let _LN=${wl};`,`let _SS='${ue}';`,`let _SN='${se}';`,`let{_IH,_OH,_IT,_AT,_A,_TF,_DEBUG}=(${sr.toString()})();`,`let{_TEXT}=(${kr.toString()})();`,`let{_UL}=(${Ao.toString()})();`,`let{_UC}=(${Eo.toString()})();`,"self.onmessage=async(e)=>{switch(e.data.type){case'iv':_IV=e.data.iv;break;case'ln':_LN=e.data.n;break;}};","_UC();"],{type:"text/javascript"}),t=URL.createObjectURL(e);Ll=new Worker(t),Ll.onerror=(...e)=>{Tl(...e),To("error",...e)},Ll.onmessage=async e=>{let t=e.data;if(t&&t.type){if("pd"==t.type)return await Co(t.d);if("cc"==t.type)return Yi[t.n]?.(t.c,kl);if("err"==t.type)return To("worker err")}}}else Al&&clearTimeout(Al),Do()};To();let qo={id:"",_GALLTYPE_:"",gallery_no:0,r_key:"",upload_status:"",clickbutton:"",user_ip:"",block_key:"",tempIdx:"",headtext:"",use_headtext:"",poll:"",service_code:"",use_html:"",subject:"",adult_article_yn:"N",adult_auth_yn:"N",ci_t:void 0,mode:"W",movieIdx:"",series_title:"[]",series_data:"",headTail:'""'};il&&(qo.fix="");let Jo="",Ko=(e=!0)=>{!ol&&e&&bl&&$i({title:ke}),ol=e,e?(El()&&(Fl(ga,kt),Fl(Ba,kt),Fl(Ca,kt),Fl(Oo,kt)),al||Fl(Bi,vt)):(Hl(ga,kt),Hl(Ba,kt),Hl(Ca,kt),Hl(Oo,kt),al||Hl(Bi,vt))};Xi=async()=>{let e=await br(nr()).catch(Tl);if(!/id="write"/.test(e))return Ko();if(Ko(!1),Fr(e,qo),u=or(e),hl=/id="code"/.test(e),il){qo.headtext=0;let t=Or(e,al?"nickname":"name");Cl=t||""}ea(),Wi(),a(!0)};let jo=e=>"false||"+e,Go=(e,t,l)=>`<img class="written_dccon" src="${e}" conalt="${t}" alt="${t}" con_alt="${t}" title="${t}" detail="${l}">`,zo=0,Yo=async(e,t=!0)=>{let l=`<p><a href="${e}" target="_blank">${e}</a></p>`,r=await Cr(zt+"api/ogp",{url:e});if(!r)return l;let n=JSON.parse(r);if(!n.result)return l;let i=`{{_OG_START::${e}^#^${n.og_title}^#^${n.og_description}^#^${n.og_image}::OG_END_}}`;return t&&(i=`<p><span class="og-url" style="color:#3b4890">${e}</span></p><p></p>`+i),i};Oo.onclick=async()=>{if(!ga.value)return;let e=ga.value??"";if(ga.value="",ga.oninput(),0==gl){let{r:t,p:l}=ql();if(0!==Ja.length){let e=!1,r=!1;for(let t of Ja)t.upload||(e=!0),t.error&&(r=!0);if(r){if(kn({title:Oe,desc:ve,options:[{text:b,[mt]:e=>{t(!0),e()},enter:!0},{text:k,[mt]:e=>{t(!1),e()}}]}),!await l.catch(Tl))return}else if(e)return bn(we)}let r=e.split("\n");e=r[0];let n=h;for(let e=1;e<r.length;e++)n+=`<p>${r[e]}</p>`;if(""!==uo){r=uo.split("\n");for(let e of r)n+=`<p style="color:#ABABAB;">${e}</p>`}n+=`<p style="color:#ABABAB;">- ${p} ${zl(20)}</p>`,(e=>{Qt(Xi,500);let t=Yl(e);if(1==t.length)return Tl(e),bn(he);if("false"==t[0])return bn(t[1]),Tl(e);let l=Xt(t[1].trim());xo.push(l),$i({num:l,nickname:la(),id:al?ul:"",ip:al?"":Ul(qo.user_ip),title:qo.subject,img:pl,fix:dl,my:!0}),qa=!1;for(let e=0;e<Ja.length;e++)Ja[e].close();Ja.length=0,Ga(!1)})(await(async(e,t)=>{qo.subject=Pt(e);let l={};if(!al){let e=ta(),t=ra();if(0==e.length)return jo(f);if(t.length<2)return jo(g);l.name=e,l.password=t}if(hl){let e=na();if(0==e.length)return jo(m);l.kcaptcha_code=e}let r=Ft(),n=r-zo;if(n<2e3){let e=2e3-n;zo=r+e,await(e=>{let{r:t,p:l}=ql();return Qt(t,e),l})(e)}else zo=r;if(Jo=await Cr("/block/block/",qo,l).catch(Tl),!Jo)return jo(fe);qo.service_code=cr(qo.service_code);let i={block_key:Jo,memo:"",code:hl?na():void 0,bgm:"0"},a="";0!==Ja.length|(co&&null!==Ta&&!qa)&&(a+=h),co&&null!==Ta&&!qa&&(a+=`<img src="${Ta.url}"/>`+h);for(let e=0;e<Ja.length;e++){let t=Ja[e];if(!t.upload)return jo(we);a+=`<img src="${t.url}" class="txc-image "/>`+h,i["file_write["+e+"][file_no]"]=t.num}let o="";if(fo&&Zn.length)for(let e=0;e<Zn.length;e++){let t,l,r=Zn[e],n=r.match(Kt),i=r.match(qt);if(n){if(t=n[2],l="https://youtu.be/"+t,0==e){o+=`<p><span class="og-url" style="color:#3b4890" <div=""></span></p><div class="yt_movie"><embed src="https://www.youtube.com/v/${t}?version=3" type="application/x-shockwave-flash" width="560" height="315" allowfullscreen="true"></div><a class="yt_link" href="${l}" target="_blank">${l}</a></div>`,o+=await Yo(l,!1);continue}}else i?(t=i[2],l="https://www.twitch.tv/"+t):l=r;o+=await Yo(l)}o&&(o+=h);let c="";for(let t of e.matchAll(Dt)){let e=t[1],l=t[2],r=Yr(e,l);if(!r)continue;let n=zr(e,l);n&&n.buy&&(c+=Go(r,l,n.idx))}c&&(c+=h);for(let e of t.matchAll(Dt)){let l=e[0],r=e[1],n=e[2],i=Yr(r,n);if(!i)continue;let a=zr(r,n);a&&a.buy&&(t=t.r(l,Go(i,n,a.idx)))}return i.memo=Pt(a+o+h+c+t),await Ml(Cr,[Ut,qo,l],i,"comment_submit")})(e,n).catch(Tl))}else _l=zl(8),((e,t)=>{Qt(ea,500);let l=Yl(e);l.length<2?(Tl(e),bn(he)):"false"==l[0]?(Tl(e),bn(l[1])):(i(0),Yi[t](-1,!0))})(await(async(e,t,l=0)=>{let r=vo[e];if(!r)return 0;let n={};if(l&&(n.c_no=l),al)n.name=sl;else{if(Cl)n.nickname=Cl;else{let e=ta();if(0==e.length)return jo(f);n.name=e}let e=ra();if(e.length<2)return jo(g);n.password=e}if(fl){let e=na();if(0==e.length)return jo(m);n.code=e}n.memo=Pt(t);let i={id:Vt,no:e,c_gall_id:Vt,c_gall_no:e,[xt]:"",_GALLTYPE_:Wt,headTail:'""'},a=await Ml(Ar,[e,$t,r,n],i,"comment_submit");try{let e=Xt(a);if(e)return"true||"+e}catch{Tl(a)}return a})(gl,e+_l,ml).catch(Tl),gl);st&&ga.focus()},(()=>{let e=at?.getItem(_t)??"";if(e){Wr=JSON.parse(e);for(let e in Wr)ln(e,Wr[e])}})(),0!==Zn.length&&qn(!1);let So=nn("version")??"";if("undefined"!=typeof VERSION){let e=e=>{let t=e.split(".");return t[0]+"."+t[1]};if(e(So)!==e(VERSION)){let e=kn({title:Ue+": "+VERSION,desc:lt+'<a href="https://joh1ah.github.io/dclivechat/change.log" target="_blank">'+$e+"</a>",html:!0});xn(e.content,[{text:Me,icon:"delete"},{hr:!0},{text:C,icon:"open_in_new"},{text:Ne},{hr:!0},{text:Qe},{text:Re}]);let t=e.content.oncontextmenu({preventDefault:()=>{},clientX:0,clientY:0});vn=null,(Uo=t).parentNode.removeChild(Uo),e.content.appendChild(t),t.style.position="relative",t.style.marginTop="1em"}}var Uo;rn("version",VERSION),(()=>{let e=nn("zzal");if(null!==e&&""!==e)try{let t=(e=>{let{p:t,i:l}=za(Ea,e);Fl(t,"up"),l.src=e.src;let r={preview:t,img:l,original:e.name,name:e.name,size:e.size,type:e.type,upload:!0,file:null,error:!1,num:null,url:e.url,close:()=>{t.remove();for(let t=0;t<Ja.length;t++){let l=Ja[t];if(e===l){Ja.splice(t,1);break}}ja()}},n=Ql("a",t,"close.abs-tr.b");return Pl(n,"delete","f"),n.onclick=()=>r.close(),r})(JSON.parse(e));Sa(t)}catch{Sa(null)}})(),uo=nn("footer")??"",Nt((()=>Hl(nt,vt))),Tl("INIT done")})().catch((e=>console.log(e)));