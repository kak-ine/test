(async()=>{String.prototype.r=function(e,t){return this.replace(e,t)};let e=new TextDecoder;function t(t){let l=atob(t.r(/-/g,"+").r(/_/g,"/").r(/\./g,"=")),r=new Uint8Array(l.length);for(let e=0;e<r.length;e++)r[e]=l.charCodeAt(e);return e.decode(r)}let l,r,i,a,o,c,s,u=t("IA=="),p=t("7LWc6re8IOyCrOyaqQ.."),d=t("PHA-PGJyPjwvcD4."),h=t("64uJ64Sk7J6E7J2EIOyeheugpe2VmOyEuOyalC4."),f=t("67mE67CA67KI7Zi466W8IDLsnpDrpqwg7J207IOBIOyeheugpe2VmOyEuOyalC4."),g=t("64-E67CwIOuwqeyngCDsvZTrk5zrpbwg7J6F66Cl7ZWY7IS47JqULg.."),m=t("7J20IOq4sOuKpeydgCBEQ-yduOyCrOydtOuTnCDqsKTrn6zrpqzsl5DshJzrp4wg7IKs7Jqp7ZWgIOyImCDsnojsirXri4jri6Qu"),_=t("7J20IOq4sOuKpeydgCDquIAg66qp66GdIO2OmOydtOyngOyXkOyEnOunjCDsgqzsmqntlaAg7IiYIOyeiOyKteuLiOuLpC4."),y=t("UEPrsoTsoIQg7Y6Y7J207KeA7JeQ7IScIOuLpOyLnCDsi5zrj4TtlbTso7zshLjsmpQu"),w=t("66Gc6re47JWE7JuD"),O=t("7ZmV7J24"),v=t("7Leo7IaM"),k=t("64Sk"),b=t("7KO87IaM6rCAIOyYrOuwlOultOyngCDslYrsirXri4jri6Qu"),I=t("7J20IOuwqeyGoeydhCDsi5zssq3tlZjsi5zqsqDsirXri4jquYw_"),x=t("7IOIIOywveyXkOyEnCDsl7TquLA."),C=t("7IOd67Cp7IahIOyjvOyGjA.."),A=t("66mU7Iuc7KeAIOuztOuCtOq4sA.."),L=t("64u16riAIOyeheugpQ.."),D=t("64yT6riAIOyeheugpQ.."),E=t("7IOd67Cp7IahIOyxhO2MhQ.."),T=t("7Iqk7YGs66Gk7ZW07IScIOyxhO2MheydtCDrqYjst4TsirXri4jri6Q."),q=t("7IOIIOuplOyLnOyngCDrs7TquLA."),J=t("67O06riw"),K=t("MjDqsJwg7J207IOB"),j=t("6rCc"),G=t("7IOIIOuplOyLnOyngCA."),z=t("64uJ64Sk7J6E"),Y=t("67mE67CA67KI7Zi4"),S=t("7L2U65OcIOyeheugpQ.."),U=t("7JeQ6rKMIOuLteq4gA.."),$=t("7JeQ6rKMIOuMk-q4gA.."),B=t("64yT6riAIOyTsOq4sA.."),Z=t("7IOIIOuMk-q4gCDsk7DripQg7KSR"),M=(t("66Gc65Sp7KSR7J6F64uI64ukLg.."),t("7LGE7YyFIOyEpOyglQ..")),X=t("64uk7KSRIO2ZlOuptCDsgqzsmqkgKOuniOuPhCk."),N=t("67aA65Oc65-s7Jq0IOyKpO2BrOuhpCDslaDri4jrqZTsnbTshZg."),Q=t("7Y-w7Yq4IO2BrOq4sCDtmZXrjIA."),P=t("67CY6rOg64uJIOyVhOydtOuUlCDtkZzsi5w."),R=t("65SU7Iuc7L2YIO2BrOq4sCDspITsnbTquLA."),F=t("6riAIOuCtOyaqeyXkCDrp4Htgawg7LaU6rCA"),H=t("7Ken7J2AIOyxhO2MhSDsp4Dsl7Dsi5zqsIQ."),V=t("67Cp7IahIOyXhuydtCDssYTtjIXssL3rp4wg7IKs7Jqp"),W=t("7Jyg64-ZIOuhnOq3uOyduCDsiKjquLDquLA."),ee=t("64uk7YGsIOuqqOuTnA.."),te=t("7LGE7YyFIO2RnOyLnCDrsKnrspU."),le=t("7J6Q64-Z7Kek67CpIOuwjyDqvKzrpqzrp5A."),re=t("7J6Q64-Z7Kek67CpIOyCrOyaqQ.."),ne=t("6rys66as66eQIOyImOyglQ.."),ie=t("64uJ64Sk7J6EIOyVhOydtOy9mCDtkZzsi5w."),ae=t("7LGE7YyF"),oe=t("7IKt7KCc65CY7JeI6rGw64KYIOyhtOyerO2VmOyngCDslYrripQg6rKM7Iuc66y87J6F64uI64ukLg.."),ce=t("6rO17KeA"),se=t("7ISk66y4"),ue=t("7LGE7YyF67Cp7JeQIOyYpOyLoCDqsoPsnYQg7ZmY7JiB7ZWp64uI64ukIQ.."),pe=t("7LGE7YyF7LC97JeQIOuLpOyLnCDsl7DqsrDtlojsirXri4jri6Qu"),de=t("7JWMIOyImCDsl4bripQg7Jik66WY"),he=t("7JWMIOyImCDsl4bripQg7Jik66WYIChibG9ja19rZXkp"),fe=t("7J6Y66q765CcIOyalOyyreyeheuLiOuLpC4."),ge=t("7J2066-47KeA6rCAIOuEiOustCDtgb3ri4jri6Qu"),me=t("7J2066-47KeAIOyXheuhnOuTnOyXkCDsi6TtjKjtlojsirXri4jri6Qu"),_e=t("7J2066-47KeAIOyCreygnOyXkCDsi6TtjKjtlojsirXri4jri6Qu"),ye=t("7JWE7KeBIOyXheuhnOuTnCDspJHsnbgg7J2066-47KeA6rCAIOyeiOyKteuLiOuLpC4."),we=t("7J2066-47KeAIOyXhuydtCDsmKzrpqzsi5zqsqDsirXri4jquYw_"),Oe=t("7JeF66Gc65Oc7JeQIOyLpO2MqO2VnCDsnbTrr7jsp4DqsIAg7J6I7Iq164uI64ukLg.."),ve=t("7LGE7YyF7J20IOu5hO2ZnOyEse2ZlOuQmOyXiOyKteuLiOuLpC4."),ke=t("7J2066-4IOyLpO2WieykkeyeheuLiOuLpC4."),be=t("7J2066-47KeAIOyyqOu2gA.."),Ie=t("65Oc656Y6re4IOyVpCDrk5zroa3snLzroZwg7J2066-47KeAIOyYrOumrOq4sA.."),xe=t("7J2066-47KeA66eMIOyYrOumtCDsiJgg7J6I7Iq164uI64ukLg.."),Ce=t("7LGE7YyF7J20IOu5hO2ZnOyEse2ZlOuQnCDqsKTrn6zrpqzsnoXri4jri6Qu"),Ae=t("4oCA4oCB4oCE4oCF4oCG4oCH4oCI4oCJ4oCK"),Le=t("64yT6riA7IiYIO2VmOydtOudvOydtO2KuA.."),De=t("7JiB7IOBIOy2lOqwgA.."),Ee=t("67Cw7LmYIOuwlOq-uOq4sA.."),Te=t("67Cw7LmYIOyZhOujjCE."),qe=t("66qo67CU7J28IO2ZmOqyveyXkOyEnOuKlCDqtozsnqXtlZjsp4Ag7JWK7Iq164uI64ukLgrqt7jrnpjrj4Qg7IKs7Jqp7ZWY7Iuc6rKg7Iq164uI6rmMPw.."),Je=t("7KCE7LK0IOuLq-q4sA.."),Ke=t("64uk7Jq066Gc65Oc"),je=t("64ur6riw"),Ge=t("7J6Q64-Z7Kek67CpIOydtOuvuOyngOulvCDsgq3soJztlZjsi5zqsqDsirXri4jquYw_"),ze=t("7J2066-47KeAIOyXheuhnOuTnA.."),Ye=t("7J6Q64-Z7Kek67CpIOyXheuhnOuTnA.."),Se=t("67KE7KCEIOyXheuNsOydtO2KuOuQqA.."),Ue=t("7KCE7LK0IOuzgOqyveyCrO2VrSDrs7TquLA."),$e=t("6rWs66ek7ZWY7KeAIOyViuydgCDrlJTsi5zsvZjsnoXri4jri6Qu"),Be=t("7IKt7KCc"),Ze=t("7IKt7KCc7ZWY7Iuc6rKg7Iq164uI6rmMPw.."),Me=t("7IKt7KCc65CcIOqyjOyLnOusvOydgCDrs7XqtaztlaAg7IiYIOyXhuyKteuLiOuLpC4."),Xe=t("VVJMIOuzteyCrA.."),Ne=t("SUQg7LCo64uo"),Qe=t("SVAg7LCo64uo"),Pe=t("64uJ64Sk7J6EIOywqOuLqA.."),Re=t("64uk7J2MIOydtOyaqeyekOulvCDssKjri6jtlZjsi5zqsqDsirXri4jquYw_"),Fe=t("7YKk7JuM65OcIOywqOuLqA.."),He=t("7KCE7LK0IOywqOuLqA.."),Ve=t("6rCk65-s66asIOywqOuLqA.."),We=t("7LaU6rCA"),et=t("7LCo64uoIOyEpOyglQ.."),tt=t("7J207KCcIOq4gOydhCDsmKTrpbjsqr0g7YG066at7ZWY66m0PGJyPuuLpOydjCDrqZTribTrpbwg7IKs7Jqp7ZWgIOyImCDsnojsirXri4jri6Qh"),lt=document,rt=lt.body,nt=lt.head,it=localStorage??null,at=window.Worker&&!0,ot=window.navigator.clipboard.read&&!0,ct=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent),st=ct&&/Safari/i.test(navigator.userAgent),ut=[5e3,3e3,1e3],pt="getElementsByClassName",dt="querySelector",ht="innerText",ft="placeholder",gt="onclick",mt="dclivechat",_t="onopenlink",yt="ondcconerror",wt="onimageclick",Ot="hidden",vt="disabled",kt="div",bt="span",It="g-recaptcha-response",xt="6Lc-Fr0UAAAAAOdqLYqPy53MxlRMIXpNXFvBliwI",Ct="subdirectory_arrow_right",At="arrow_downward",Lt=(e,t=!0)=>(e=e.r("?","\\?"),t?new RegExp(e,"g"):new RegExp(e)),Dt=/:([^,:]+), ([^,:]+):/g,Et=/dccon\.php\?no=([a-z0-9]+)/,Tt=/twitch.tv\/(\?channel=)?([A-Za-z0-9_-]+)/,qt=/href="(https?:\/\/)?(www.)?twitch.tv\/([^"]+)"/g,Jt=/youtu(.be\/|be.com\/watch\?v=|be.com\/v\/|be.com\/shorts\/|be.com\/live\/|be.com\/embed\/)([A-Za-z0-9_-]+)/,Kt=/href="(https?:\/\/)?(www.)?youtu(.be\/|be.com\/watch\?v=|be.com\/v\/|be.com\/shorts\/|be.com\/live\/)([^"]+)"/g,jt="https://",Gt=jt+"gall.dcinside.com/",zt=jt+"github.com/Joh1ah/dclivechat",Yt="/board/forms",St=Yt+"/article_submit",Ut=Yt+"/comment_submit",$t="/dccon/insert_icon",Bt=Yt+"/delete_submit",Zt=Yt+"/delete_password_submit",Mt=Number.parseInt,Xt=requestAnimationFrame,Nt=setTimeout,Qt=encodeURIComponent,Pt=String.fromCharCode,Rt=Date.now,Ft=Rt(),Ht="",Vt="",Wt="",el="",tl="",ll=!1,rl=!0,nl=!1,il=!1,al=!1,ol=!0,cl="",sl="",ul="",pl=!1,dl=!1,hl=!1,fl=0,gl=0,ml="",_l=ut[0],yl=0,wl=0,Ol=!0,vl=!0,kl=!1,bl=99999,Il=!0,xl="",Cl=null,Al=null,Ll=()=>0==fl,Dl=()=>Ll()?dl:hl,El=(...e)=>{let t="["+((Rt()-Ft)/1e3).toFixed(2)+"]";if(console.log(t,...e),DEBUG&&s){for(let l of e)t+=void 0===l?" undefined":" "+(l.toString?.()??"");Rl("p",s,{[ht]:t})}},Tl=()=>{let e,t=new Promise((t=>e=t));return{r:e,p:t}},ql=(e,t)=>{let l=t-e+1,r=Math.random()*l;return Math.min(e+Math.floor(r),t)};let Jl=(e,t)=>{let l=e.indexOf(t);-1!=l&&e.splice(l,1)},Kl=new TextEncoder,jl=async e=>{let t=Kl.encode(e),l=function(e){return[...new Uint8Array(e)].map((e=>e.toString(16).padStart(2,"0"))).join("")}(await crypto.subtle.digest("SHA-256",t).catch(El));return"#"+l.slice(0,6)};let Gl,zl=Ae.split(""),Yl=e=>{let t="";for(let l=0;l<e;l++)t+=zl[ql(0,zl.length-1)];return t},Sl=e=>e.split("||"),Ul=e=>{let t,l,r=lt.cookie.split(";");for(let n=0;n<r.length;n++)if(t=r[n].substring(0,r[n].indexOf("=")),l=r[n].substring(r[n].indexOf("=")+1),t=t.r(/^\s+|\s+$/g,""),t==e)return l;return"undefined"},$l=e=>{let t=e.split(".");return t[0]+"."+t[1]},Bl=(e,t)=>((e,t,l)=>e.style.setProperty(t,l))(lt.documentElement,e,t),Zl=async()=>{let{r:e,p:t}=Tl();return Rl("script",rt,{onload:()=>{if("undefined"==typeof grecaptcha)return El("recaptcha is undefined");El("recaptcha v3 loaded"),e()},type:"text/javascript",src:jt+"www.google.com/recaptcha/api.js?render="+xt}),await t},Ml=async(e,t,l)=>{if("v3"==e)return t["g-recaptcha-token"]=await(async e=>{"undefined"==typeof grecaptcha&&await Zl();let{r:t,p:l}=Tl();return grecaptcha.ready((()=>grecaptcha.execute(xt,{action:e}).then(t).catch((e=>{El(e),t("")})))),await l})(l);El("recaptcha",e,"is not supported")},Xl=async(e,t,l,r)=>{let n,i=0,a=async()=>{if(i>1)return n;if(i+=1,n=await e(...t,l),!n)return So(fe);let o=Sl(n);if("false"==o[0]){if(1==o.length)return So(n);if("captcha"==o[1])return await Ml(o[2],l,r),await a()}return n};return await a()},Nl=1024,Ql="B.KB.MB.GB.TB.PB".split("."),Pl=e=>{let t=0,l=1,r=Nl;for(;t<Ql.length;){if(e<r){let r=e/l,n=10,i=2;for(;;){if(r<n)return r.toFixed(i)+Ql[t];n*=10}}l*=Nl,r*=Nl,t++}},Rl=(e,t,l,...r)=>{let n=lt.createElement(e);if(l)if("object"==typeof l)for(let e in l)n[e]=l[e];else"string"==typeof l&&r.push(l);for(let e of r)n.classList.add(...e.split("."));return t&&t.appendChild&&t.appendChild(n),n},Fl=(e,t,...l)=>Rl(bt,e,{[ht]:t},"material-symbols-outlined.icon",...l),Hl=e=>{for(;e.lastChild;)e.removeChild(e.lastChild)},Vl=(e,...t)=>(e.classList.add(...t),e),Wl=(e,...t)=>(e.classList.remove(...t),e),er=()=>scrollTo(0,0),tr=!1,lr=(e,t,l=!1,r=!1)=>{e.onkeypress=n=>{!r&&tr||"Enter"==n.key&&(DEBUG&&El(n),ct&&l||!ct&&l&&n.shiftKey||(n.preventDefault(),t.click(),e.oninput?.()))}},rr=()=>Gt+(rl?"mgallery/":nl?"mini/":"")+"board/",nr=()=>Gt+"board/",ir=()=>rr()+"lists?id="+Ht,ar=()=>rr()+"write/?id="+Ht,or=e=>rr()+"view/?id="+Ht+"&no="+e,cr=(...e)=>{let t="";for(let l of e)for(let e in l){let r=l[e];null==r&&(r="undefined"),t+="&"+e+"="+r}return t.substring(1)},sr=e=>{let t=e.match(/var _r = _d\('([A-Za-z0-9+=\/]+)'\)/);return t?(e=>{let t,l,r,n,i,a,o,c="yL/M=zNa0bcPQdReSfTgUhViWjXkYIZmnpo+qArOBslCt2D3uE4Fv5G6wH178xJ9K",s="",u=0;for(e=e.r(/[^A-Za-z0-9+/=]/g,"");u<e.length;)n=c.indexOf(e.charAt(u++)),i=c.indexOf(e.charAt(u++)),a=c.indexOf(e.charAt(u++)),o=c.indexOf(e.charAt(u++)),t=n<<2|i>>4,l=(15&i)<<4|a>>2,r=(3&a)<<6|o,s+=Pt(t),64!=a&&(s+=Pt(l)),64!=o&&(s+=Pt(r));return s})(t[1]):""},ur=(e,t)=>{let l=(t=(e=>{let t=Mt(e.substring(0,1));return t=t>5?t-5:t+4,e.r(/^./,t)})(t??Gl)).split(","),r="";for(n=0;n<l.length;n++)r+=Pt(2*(l[n]-n-1)/(13-n-1));return e.r(/(.{10})$/,r)},pr=()=>{let e;try{e=El}catch{e=console.log}let t={},l=(e,t,l)=>{let n=r(e,t,l);return n?n[0]:""},r=(e,l,r)=>{let n,i=l+r;if(void 0!==t[i])n=t[i];else{n=new RegExp(`<${l}[^>]*class=["'][^"]*${r}[^"]*["'][^>]*(/?)>`,"g"),t[i]=n}let a=e.matchAll(n);if(!a)return null;let o=[];for(match of a){if(match[1]){o.push([match[0],""]);continue}let t=match.index,r=0,n=e.substring(t),i=0,a=n.matchAll(new RegExp(`<(/?)${l}[^>]*(/?)>`,"g"));for(let e of a)if(e[1]){if(i-=1,0==i){t=e.index,r=e[0].length;break}}else e[2]||(i+=1);o.push([n.substring(0,t+r),n.substring(match[0].length,t)])}return o},n=(e,t,r)=>{let n=l(e,t,r);return n?n[1]:""},i=e=>{let t="";for(let l of e.matchAll(/(>|$)(.*?)(<|^)/g))t+=l[2].trim();return t},a={},o=(e,t)=>{let l;void 0!==a[t]?l=a[t]:(l=new RegExp(`${t}="([^"]+)"`),a[t]=l);let r=e.match(l);return r?r[1]:null};return{_IH:n,_OH:(e,t,r)=>{let n=l(e,t,r);return n?n[0]:""},_OHA:(e,t,l)=>{let n=[],i=r(e,t,l);if(!i)return"";for(let e of i)n.push(e[0]);return n},_IT:(e,t,l)=>{let r=n(e,t,l);return r?i(r):""},_AT:(e,t,l,r)=>{let n=o(e,t);null!=n&&(l[r]=n)},_A:o,_TF:e=>/fix/.test(e),_DEBUG:e,_IO:i}},{_IH:dr,_OH:hr,_OHA:fr,_IT:gr,_AT:mr,_A:_r,_TF:yr,_DEBUG:wr,_IO:Or}=pr(),vr={},kr=(e,t)=>{let l;vr[t]?l=vr[t]:(l=new RegExp(`<[^>]+(id|name)=["']${t}["'][^>]+value=["']([^"']+)["']`),vr[t]=l);let r=e.match(l);return r?r[2]:""},br=(e,t,l)=>{let r=new RegExp(`<form[^>]+id=["']${t}["'][^>]*>.*?</form>`),n=e.match(r);return!!n&&(tn(n[0],l),!0)},Ir=()=>{let e;try{e=_DEBUG}catch{e=El}return{_TEXT:async(t,l={})=>{l.credentials||(l.credentials="include");let r=await fetch(t,l).catch(e);return r&&r.ok?(await r.text().catch(e)).replace(/(\n|\r|\t)/g,""):""}}},{_TEXT:xr}=Ir(),Cr=async(e,t={},l="")=>{t.credentials||(t.credentials="include"),t.method||(t.method="POST"),t.mode||(t.mode="cors"),t.body||(t.body=l);let r=await fetch(e,t).catch(El);return r&&r.ok?await r.text().catch(El):""},Ar={"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","X-Requested-With":"XMLHttpRequest"},Lr=async(e,...t)=>{let l=cr(...t),r={headers:Ar,referrer:ar()};return Cr(e,r,l).catch(El)},Dr=async(e,t="")=>{let l=await xr((e=>rr()+"delete/?id="+Ht+"&no="+e)(e));if(!l)return So("not available");let r={[It]:"",_GALLTYPE_:Vt};if(!br(l,"delete",r))return So("no form");let n=sr(l);if(!n)return So("no secret");r.service_code=ur(r.service_code,n);let i=l.match(/formData \+= "&([0-9a-z]+)=([0-9a-z]+)&/);if(!i)return So("not valid");if(r[i[1]]=i[2],t&&(r.password=t),i=l.match(/dcc_key_v1 = document.getElementById\(["']([^"']+)["']\).getAttribute\(["']([^"']+)["']/),i){let e=l.match(new RegExp(`<input[^>]+id=["']${i[1]}["'][^>]*>`));e&&(r.dcc_key_v1=_r(e[0],i[2]))}return await Xl(Lr,[t?Zt:Bt],r,"delete_submit")},Er=async(e,t,...l)=>{let r=cr(...l),n={headers:Ar,referrer:or(e)};return Cr(t,n,r).catch(El)},Tr=async(e,{num:t,id:l,value:r,vCurT:n},i="")=>{let a={ci_t:Ul("ci_c"),id:Ht,re_no:e,mode:"del",[It]:"",_GALLTYPE_:Vt};return i&&(a[l]=r,a.no=t,a.re_password=i,a.v_cur_t=n),await Xl(Er,[e,"/board/comment/comment_delete_submit"],a,"comment_delete_submit")},qr=async e=>{let t={r_key:Wt,gall_id:Ht,gall_no:el,post_no:"",upload_ing:"N",_GALLTYPE_:Vt};try{let l=((e,t)=>{let l=Rl("form",null,{entype:"multipart/formdata"}),r=new FormData(l);for(let t in e)r.append(t,e[t]);return t&&t.name&&r.append("files[]",t,t.name),r})(t,e),r={credentials:"same-origin",referrer:Gt,referrerPolicy:"strict-origin-when-cross-origin"},n=jt+"upimg.dcinside.com/upimg_file.php?id="+Ht+"&r_key="+Wt,i=await Cr(n,r,l).catch(El);return i?JSON.parse(i).files[0]??null:null}catch(e){return El(e),null}},Jr=e=>{let t=cr({id:Ht,r_key:Wt,temp_no:e}),l={headers:Ar,credentials:"same-origin",referrer:Gt+"/upload/image?xssDomain=dcinside.com",referrerPolicy:"strict-origin-when-cross-origin"},r=nr()+"temp/upimg_pop_del";Cr(r,l,t).catch(El).then((e=>"true"!=e&&An(_e)))},Kr={},jr=[],Gr=!1,zr=[],Yr=async()=>{if(!zr.length)return Gr=!1;let e=zr.shift(),t=e[0],l=e[1];if(null!=Kr[t])return l(Kr[t]),Nt(Yr,1);let r=await(async e=>{let t=Gt+"dccon/package_detail",l={headers:Ar},r=cr({ci_t:Ul("ci_c"),package_idx:"",code:e}),n=await Cr(t,l,r).catch(El);if(!n)return null;try{return JSON.parse(n)}catch(e){return El(e),null}})(t).catch(El);if(!r)return l();let n=r.info.title,i=r.info.package_idx,a=[];for(let e of r.detail)a.push({title:e.title,buy:!1,package_idx:i,package_title:n,code:e.path});let o={title:n,idx:i,buy:!1,code:r.info.list_img_path,detail:a};Ur(o),l(Kr[t]),Nt(Yr,1)},Sr=e=>{let{r:t,p:l}=Tl();return zr.push([e,t]),Gr||(Gr=!0,Yr()),l},Ur=e=>{let t=sn("dccon-pk")??{};if(null!=t[e.idx]){let l=t[e.idx];if(l.buy||!e.buy)return;l.detail=e.detail,l.buy=!0}else t[e.idx]=e;cn("dccon-pk",t)},$r=(e,t)=>{let l=(e=>{let t=sn("dccon-pk");if(!t)return null;for(let l in t)if(t[l].title==e)return t[l];return null})(e);if(!l||!l.detail)return null;for(let e of l.detail)if(e.title==t)return e;return null},Br=(e,t)=>{let l=$r(e,t);return l?Zr(l.code):null},Zr=e=>jt+"dcimg5.dcinside.com/dccon.php?no="+e,Mr=async(e,t)=>{let l,r=await Lr(Gt+"dccon/lists",{ci_t:Ul("ci_c"),target:e,page:t}).catch(El);if(!r)return 0;if("not_login"==r)return 0;if("{"!=r.substring(0,1))return 0;try{l=JSON.parse(r)}catch(e){return El(e),{}}let n=l.list,i=1;if("recent"==e){let e=[];for(let t of n){let l=t.list_img.match(Et);l&&e.push({package_title:p,package_idx:t.package_idx,idx:t.idx,code:l[1],title:t.title})}Ca({title:p,idx:-1,detail:e})}else if("icon"==e){i=l.max_page;for(let e of n){let t=e.title,l=e.package_idx,r=e.main_img_url.match(Et);if(!r)continue;let n=[];for(let r of e.detail){let e=r.list_img.match(Et);e&&n.push({package_title:t,package_idx:l,idx:r.detail_idx,buy:!0,code:e[1],title:r.title})}let i={title:t,idx:l,buy:!0,code:r[1],detail:n};Ca(i),Ur(i)}}return i},Xr=async e=>{if(!e.buy)return An($e);let t=e.package_idx,l=e.idx,r={id:Ht,no:void 0,package_idx:t,detail_idx:l,ci_t:Ul("ci_c"),input_type:"write",t_vch2:void 0,t_vch2_chk:void 0,c_gall_id:Ht,c_gall_no:void 0,[It]:"",check_6:void 0,check_7:void 0,check_8:void 0,_GALLTYPE_:Vt};await Xl(Lr,[$t],r,"insert_icon"),Aa("recent").catch(El)},Nr=async(e,t)=>{if(!e.buy)return An($e);let l=e.package_idx,r=e.idx,n=aa();if(!n.length)return An(h);let a=xo[t],o={id:Ht,no:t,package_idx:l,detail_idx:r,name:n,ci_t:Ul("ci_c"),input_type:"comment",t_vch2:a.t_vch2,t_vch2_chk:a.t_vch2_chk,c_gall_id:Ht,c_gall_no:t,[It]:"",check_6:a.check_6,check_7:a.check_7,check_8:a.check_8,_GALLTYPE_:Vt},c={};if(!il){let e=oa();if(e.length<2)return An(f);c.password=e}if(Dl()){let e=ca();if(!e.length)return An(g);c.code=e}gl&&(c.c_no=gl);let s=await Lr($t,o,c);"ok"==s?(Bi[t](-1,!0),i(0)):DEBUG&&El("insert dccon comment fail",s),Nt(na,500),Aa("recent")},Qr=(e,t,l)=>{let r=`<img class="dccon" src="${l}">`;e.innerHTML=e.innerHTML.r(t,r)},Pr=0,Rr=e=>{let t=(e=e.r(/onmousedown="[^"]+"/g,"").r(/class="written_dccon[^"]*"/g,'class="d"')).matchAll(/onerror="[^"]+"/g);for(let l of t){Pr++;let t="error-"+Pr;e=e.r(l[0],`id="${t}" onerror="window.postMessage(JSON.stringify({type:'${yt}',id:'${t}' }),'*')"`)}return e},Fr=(e,t)=>{let l=e.match(t);if(l){DEBUG&&El("replacing",e);for(let t of l)e=e.r(Lt(t),(r=Qt(t.split('"')[1]),`onclick="window.postMessage(JSON.stringify({type:'${_t}',url:'${r}' }),'*')"`));DEBUG&&El("replaced",e)}var r;return e},Hr=e=>(e=Fr(e,qt),e=Fr(e,Kt)),Vr=e=>"https://image.dcinside.com/viewimage.php?id=&no="+e,Wr=e=>{_l=ut[e],Al&&Al.postMessage({type:"iv",iv:_l})},en=(e,t)=>{for(let l in t){let r=kr(e,l);r&&(t[l]=r)}!Vt&&Go._GALLTYPE_&&(Vt=Go._GALLTYPE_),!el&&Go.gallery_no&&(el=Go.gallery_no),Go.r_key&&(Wt=Go.r_key)},tn=(e,t)=>{let l=e.matchAll(/<input[^>]+name=["']([^"']+)["'][^>]+value=["']([^"']*)["']/g);if(l)for(let e of l)t[e[1]]=e[2]};DEBUG&&El("initializing");let ln=e=>(alert(e),0);if(!(e=>{let t=e.match(/^https?:\/\/(gall|m).dcinside.com\/([^\n]+)$/);if(!t)return ln(m);let l=null;return"gall"==t[1]?(l=t[2].match(/id=([A-Za-z0-9_]+)($|\&|#)/),rl=/^mgallery/.test(t[2]),nl=/^mini/.test(t[2])):(ll=!0,l=t[2].match(/(board|mini)\/([A-Za-z0-9_]+)($|\?|\/|#)/),rl=lt[pt]("micon").length>0,nl=lt[pt]("mnicon").length>0),l&&l.length?(Ht=ll?l[2]:l[1],1):ln(_)})(location.href))return;if(lt.cookie="m_dcinside_web=done; path=/; domain=.dcinside.com",Rl("meta",nt,{name:"viewport",content:"width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0"}),ll)return ln(y),location.href=ir();if(lt[mt])return lt[mt]();lt[mt]=()=>An(ke),lt.title=u+" :: "+lt.title;let rn={},nn={},an=e=>{let t=JSON.stringify(e??rn);it?.setItem(mt,t)},on=(e,t)=>{rn[e]=t,nn[e]?.(t)},cn=(e,t)=>{on(e,t),an()},sn=e=>rn[e]??null,un=()=>{let e=it?.getItem("block_all");return e?JSON.parse(e):{on:1,word:"",id:"",nick:"",ip:""}},pn=()=>{let e=it?.getItem("block_parts");return e?JSON.parse(e):{}},dn=(e,t)=>pn()[e]??{on:1,word:"",id:"",nick:"",ip:"",name:t},hn=(e,t)=>!!t.on&&(fn(e,"title",t,"word",!0)||fn(e,"nickname",t,"nick")||fn(e,"id",t,"id")||fn(e,"ip",t,"ip")),fn=(e,t,l,r,n=!1)=>{if(!l[r])return!1;let i=Sl(l[r]);for(let l of i)if(n){if(e[t].includes(l))return!0}else if(e[t]==l)return!0;return!1},gn=e=>{e.on=1,(e=>{it?.setItem("block_all",JSON.stringify(e))})(e);for(let t of Si)hn(t,e)?Vl(t.chat,"block"):Wl(t.chat,"block")},mn=(e,t)=>{e.on=1;let l=pn();l[t]=e,(e=>{it?.setItem("block_parts",JSON.stringify(e))})(l);for(let t of Si)hn(t,e)?Vl(t.chat,"block"):Wl(t.chat,"block")},_n=(e,t,l)=>{let r=Sl(e[t]).filter((e=>""!=e));r.includes(l)||r.push(l),e[t]=r.join("||")},yn=(e,t,l)=>{let r=Sl(e[t]).filter((e=>""!=e));for(let e=0;e<r.length;e++){if(r[e]==l){r.splice(e,1);break}}e[t]=r.join("||")};(async()=>{let e=await xr(ir()).catch(El),t=dr(e,kt,"login_box");if(DEBUG&&El("login",t),t){let e=dr(t,"button","btn_inout");if(DEBUG&&El("string",e),e&&e==w){il=!0;let e=gr(t,"strong","nickname");e&&(cl=e);let l=hr(t,"strong","writer_nikcon");if(l){let e=_r(l,"onClick").match(/\/([a-zA-Z0-9_-]+)['"]/);e&&(sl=e[1]),e=l.match(/src=["']([^"']+)["']/),e&&(ul=e[1],pl=yr(e[1]))}}}DEBUG&&El("login",il),l?.(),tl=kr(e,"gallery_name"),so[ht]=Ve+" - "+tl})(),Hl(rt),Vl(rt,Ot);for(var wn=1;wn<99999;wn++)window.clearInterval(wn);for(wn=1;wn<99999;wn++)window.clearTimeout(wn);let On=STYLESHEET.r(/_w/g,"width").r(/_h/g,"height").r(/_b/g,"background").r(/_m/g,"margin").r(/_p/g,"padding").r(/_d/g,"display").r(/_i/g,"!important").r(/_P/g,"position").r(/_T/g,"top").r(/_B/g,"bottom").r(/_L/g,"left").r(/_R/g,"right").r(/_r/g,"relative").r(/_a/g,"absolute").r(/_o/g,"overflow").r(/_f/g,"flex").r(/_F/g,"font").r(/_j/g,"justify-content").r(/_g/g,"grid-").r(/_c/g,"calc").r(/_x/g,"100%");On=st?On.r(/_s/g,""):On.r(/_s/g," or (max-width:700px)"),Rl("style",nt,{[ht]:On}),Rl("link",nt,{rel:"stylesheet",href:jt+"fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"}),ct&&Zl(),DEBUG&&El("ui"),s=Rl(kt,rt,"log",Ot),er();let vn=Rl(kt,rt,"o");Rl(kt,vn,{[ht]:Ie},"drop");let kn=Rl(kt,rt,"o"),bn=(e=!1)=>{DEBUG&&El("render overlay",e&&1==kn.childNodes.length,kn.childNodes.length),e&&1==kn.childNodes.length||!kn.lastChild?Wl(kn,"wait"):Vl(kn,"wait"),tr=0!==kn.childNodes.length},In=!0;lt.addEventListener("keyup",(e=>{"Enter"==e.key&&(In=!0)})),lt.addEventListener("keypress",(e=>{In&&"Enter"===e.key&&tr&&(kn.lastChild&&kn.lastChild.enter?.(),In=!1)}));let xn,Cn=({title:e,desc:t,options:l,close:r,html:n,input:i,nowrap:a})=>{l||(l=[{text:O,[gt]:e=>e()}]);let o=Rl(kt,kn,"modal");e&&Rl(kt,o,{[ht]:e},"tt");let c=Rl(kt,o,"desc");o.content=c,t&&(n?c.innerHTML=t:c[ht]=t);let s=()=>{Vl(o,Ot),o.remove(),bn()};r&&Fl(Rl("a",o,{[gt]:s},"b.close.abs-tr"),"close"),void 0!==i&&(o.input=a?Rl("input",o,{type:"password",value:i},"nowrap"):Rl("textarea",o,{value:i}));let u=Rl(kt,o,"opts.fr");1===l.length&&(l[0].enter=!0);for(let e of l){let t=()=>{r[ht]="",Fl(r,"progress_activity","progress")},l=null!=e.icon,r=Rl("a",u,{[ht]:l?"":e.text??e,[gt]:e.onclick?()=>e.onclick(s,t):s},"sb.r");l&&(Fl(r,e.icon),Rl(bt,r,{[ht]:e.text})),e.enter&&Nt((()=>{o.enter=()=>r.click(),a&&lr(o.input,r,!1,!0)}),100)}return bn(),o},An=e=>Cn({desc:e}),Ln=(e,{text:t,top:l=!1},...r)=>{Vl(e,"has-tooltip");let n=Rl(kt,e,"tooltip",l?"tp":"bt",...r);return Rl(bt,n,{innerText:t}),n},Dn=(e,t=[])=>{e.oncontextmenu=e=>{e.preventDefault();let l=e.clientX,r=e.clientY;for(option of(xn&&xn.remove(),xn=Rl(kt,rt,"p.ctx"),xn.style.left=l+"px",xn.style.top=r+"px",t)){if(option.hr){Rl("hr",xn);continue}let e=Rl("a",xn,"fr.b");option.icon&&Fl(e,option.icon),option.text&&Rl(bt,e,{[ht]:option.text}),option[gt]&&(e[gt]=option[gt])}return xn}};lt.addEventListener("click",(()=>{xn&&xn.remove(),xn=null}));let En=Rl("main",rt);DEBUG&&El("video");let Tn,qn=Rl(kt,En,"video"),Jn=Rl(kt,qn,"menu"),Kn=Rl(kt,qn,"main"),jn=!0,Gn=e=>{jn="boolean"==typeof e?e:!jn,jn?(Wl(Jn,"e"),Tn[ht]="expand_less"):(Yn&&Sn.click(),Vl(Jn,"e"),Tn[ht]="expand_more")};Rl(kt,Jn,{[gt]:Gn},"stretch");let zn=Rl("a",Jn,{[gt]:()=>{Vl(Kn,"go"),Wl(Zn,Ot)}},"b");Fl(zn,"add"),Rl(bt,zn,{[ht]:De});let Yn=!1,Sn=Rl("a",Jn,"b",vt),Un=Fl(Sn,"pan_tool"),$n=Rl(bt,Sn,{[ht]:Ee});Sn.onclick=()=>{Yn=!Yn,Yn?(Vl(Sn,".t"),Un[ht]="check",$n[ht]=Te,Vl(Kn,"rlc")):(Wl(Sn,".t"),Un[ht]="pan_tool",$n[ht]=Ee,Wl(Kn,"rlc"))};let Bn=Rl("a",Jn,"b",vt);Fl(Bn,"close"),Rl(bt,Bn,{[ht]:Je}),Tn=Fl(Rl("a",Jn,{[gt]:Gn},"b.fix-tl"),"expand_less");let Zn=Rl(kt,Kn,"p.fr.blank"),Mn=Rl("a",Zn,{[gt]:()=>{Wl(Kn,"go"),Vl(Zn,Ot)}},"b.abs-tr",Ot);Fl(Mn,"close"),Fl(Zn,"link","ph").onclick=()=>Nn.focus();let Xn=()=>{""!==Nn.value?Wl(Zn,"blank"):Vl(Zn,"blank")},Nn=Rl("textarea",Zn,{[ft]:C,oninput:Xn,onchange:Xn},"src"),Qn=Rl("a",Zn,{[gt]:()=>Vn(Nn.value)},"sb");Rl(bt,Qn,{[ht]:O}),lr(Nn,Qn);let Pn=[],Rn=[],Fn=()=>{if(ol)Wl(Jn,Ot);else{let e=Math.min(Rn.length,1);Vl(Jn,Ot),Pn.length=e;for(let e=1;e<Rn.length;e++)Rn[e]?.remove();Rn.length=e,Yn&&Sn.click()}if(Vl(Sn,vt),Wl(Sn,".t"),Wl(Kn,"go"),!Rn.length)return Yn&&Sn.click(),Vl(Bn,vt),Vl(Mn,Ot),void Wl(Zn,Ot);Wl(Bn,vt),Wl(Sn,vt),Wl(Mn,Ot),Vl(Zn,Ot),1==Rn.length?Bl("--r2t","0px"):Bl("--r2t","50%");let e=(Rn.length-1)/2,t=0,l=0;for(let r=0;r<Rn.length;r++){let n=Rn[r];Wl(n,..."r1.r2.c1.c2.c3.c4".split(".")),r<e?(Vl(n,"r1"),t++,Vl(n,"c"+t)):(Vl(n,"r2"),l++,Vl(n,"c"+l))}Bl("--rw1",t),Bl("--rw2",l)},Hn=e=>{let t=e.match(Tt);if(t)return Wn(t[2]);let l=e.match(Jt);if(l){let t=0,r=e.match(/t=([0-9]+)/);return r&&(t=r[1]),ei(l[2],t)}ai(e)},Vn=e=>{if(DEBUG&&El("step 1",e),!e)return An(b);if("show log"==e)return Wl(s,Ot);if("clear options"==e)return an({});if("show options"==e)return El(rn);if("refresh update"==e)return jo();let t=Pn.length;if(!/[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\+.~#?&//=]*)/.test(e))return An(b);/^[A-Za-z]+:\/\//.test(e)||(e="https://"+e),DEBUG&&El("step 2",e),Hn(e),0===t&&1===Pn.length&&Gn(!1),Fn()};onmessage=e=>{let t;t="object"==typeof e.data?e.data:JSON.parse(e.data),t&&(t.type==yt?(e=>{let t=lt[dt]("#"+e).parentNode,l=t.classList.contains("d"),r=t.getAttribute("data-src"),n=Rl("img",null,{src:r,draggable:!1},l?"d":"_");l||(n[gt]=()=>onImageClick(r)),t.insertAdjacentElement("beforebegin",n),Vl(t,Ot)})(t.id):t.type==_t?(e=>{let t=decodeURIComponent(e).r(/&amp;/g,"&");Cn({title:I,desc:t,options:[{text:x,icon:"open_in_new",[gt]:e=>{let l=Rl("a",null,{href:t,target:"_blank"});l.click(),l.remove(),e()}},{text:O,[gt]:e=>{Vn(t),e()},enter:!0}],close:!0})})(t.url):t.type==wt&&((e,t)=>{let l=document[dt]("#"+t);if(!l)return;let r,n=l[pt]("img"),i=[],a=0;for(let t=0;t<n.length;t++){let l=n[t];if(l.classList.contains(Ot))continue;if(l.classList.contains("d"))continue;let r=l.getAttribute("data-osrc");r==e&&(a=t),i.push(r)}DEBUG&&El(i,e,a);let o=!1,c=Rl(kt,kn,{[gt]:()=>{o||(Vl(r,"fo"),Nt((()=>{c.remove()}),200),bn(!0))}},"ipvs");r=Rl("img",c,{src:i[a],draggable:!1,[gt]:()=>{o=!0,Xt((()=>o=!1))}},"ipv");let s=Rl(kt,c,"fr"),u=Rl("a",s,{[gt]:()=>{o=!0;let e=Rl("a",null,{href:r.src,download:""});e.click(),e.remove(),Xt((()=>o=!1))}},"b");Fl(u,"download"),Rl(bt,u,{innerText:Ke}),bn()})(t.src,t.id))};let Wn=e=>{ai(jt+"player.twitch.tv/?channel="+e+"&parent=gall.dcinside.com")},ei=(e,t=0)=>{ai(jt+"www.youtube.com/embed/"+e+"?start="+t,{allow:"autoplay; picture-in-picture"})},ti=null,li="",ri=!1,ni=0,ii=0,ai=(e,t={})=>{if(Nn.value="",Pn.includes(e)){let t=Rn[Pn.indexOf(e)];return Vl(t,"hl-alt"),void Nt((()=>Wl(t,"hl-alt")),500)}let l;ol||(Pn.length=0,Rn[0]?.remove(),Rn.length=0),Pn.push(e),cn("videos-"+Ht,Pn);let r=Rl(kt,Kn);Rn.push(r),l=()=>Rn.indexOf(r);let n=(t,l)=>{ti||(Vl(r,"drg"),ni=()=>r.getClientRects()[0].width/2,ii=()=>r.getClientRects()[0].height/2+50,Bl("--mx",t-ni()+"px"),Bl("--my",l-ii()+"px"),ti=r,li=e)},i=(e,t)=>{Xt((()=>{Bl("--mx",e-ni()+"px"),Bl("--my",t-ii()+"px")}))},a=Rl(kt,r,{onmousedown:e=>{n(e.clientX,e.clientY),onmouseup=()=>{Wl(r,"drg"),ti=null,onmouseup=null,onmousemove=null},onmousemove=e=>i(e.clientX,e.clientY)},onmousemove:()=>{if(!ti||ri)return;let e=l(),t=Rn.indexOf(ti);e!=t&&(Rn.splice(t,1),Rn.splice(e,0,ti),Pn.splice(t,1),Pn.splice(e,0,li),ri=!0,an(),Nt((()=>ri=!1),200),Fn())},ontouchstart:e=>{n(e.touches[0].clientX,e.touches[0].clientY);let t=()=>{Wl(r,"drg"),ti=null,ontouchend=null,ontouchcancel=null,ontouchmove=null};ontouchend=t,ontouchcancel=t,ontouchmove=e=>{i(e.touches[0].clientX,e.touches[0].clientY);let t=lt.elementFromPoint(e.touches[0].pageX,e.touches[0].pageY);t?.onmousemove?.()}}},"grab.fr");Fl(a,"drag_indicator"),t.sandbox="allow-same-origin allow-scripts";let o=Rl("iframe",r,t);Fn(),o.src=e;let c=Rl("a",r,{[gt]:()=>((e,t)=>{Jl(Pn,e),Jl(Rn,t),an(),t.remove(),Fn()})(e,r)},"close.b.abs-tr");Fl(c,"close"),Ln(c,{text:je})};nn["videos-"+Ht]=e=>{for(let t of e)Pn.includes(t)||Hn(t)},Bn[gt]=()=>{Pn.length=0;for(let e of Rn)e.remove();Rn.length=0,an(),Fn()},DEBUG&&El("chat");let oi=[],ci=Rl(kt,En,"chat"),si=Rl(kt,ci,"hd");Rl(bt,si,{[ht]:E},"h");let ui=!1,pi=Rl("a",si,{[gt]:()=>{ui||(ui=!0,jo("button"),Vl(di,"rotate-ccw-half"),Nt((()=>{ui=!1,Wl(di,"rotate-ccw-half")}),800))}},"help.b.abs-tl"),di=Fl(pi,"sync"),hi=Rl("a",si,{href:zt,target:"_blank"},"help.b.abs-tr");Fl(hi,"help");let fi=Rl(kt,ci,"vp"),gi=Rl(kt,fi,"page"),mi=Rl(kt,ci,"cb-c"),_i=Rl("a",mi,{[gt]:()=>{for(;oi.length;)oi.shift().click()}},"r.b.ca.right.sd");Fl(_i,"close");let yi=()=>{oi.length?Wl(_i,"sd"):Vl(_i,"sd")},wi={},Oi={},vi=[],ki=Rl("a",mi,{[gt]:()=>{if(!vi.length)return;let e=vi.shift();for(let t of e[1])wi[e[0]](t);let t=Rl("a",null,{href:"#"+e[0]});t.click(),t.remove(),Ii()}},"r.b.nt.right.sd");Fl(ki,"notifications");let bi=Rl(bt,ki,"cnt.abs-tl.fade"),Ii=()=>{vi.length?(Wl(ki,"sd"),Wl(bi,"fade"),bi[ht]=vi.length<10?vi.length:"9+"):(Vl(ki,"sd"),Vl(bi,"fade"))},xi=(e,t)=>"n"+e+"_"+t,Ci=(e,t,l=null)=>{if(!Oi[e])return void(DEBUG&&El("post",e,"is not my post"));let r=xi(e,t);if(!wi[r])return void(DEBUG&&El("comment",t,"is not a comment in interest"));let n=vi.find((e=>e[0]==r));n||(n=[r,[]],vi.push(n)),n[1].push(l),Ii()},Ai=(e,t,l)=>{Oi[e]=!0,wi[xi(e,t)]=l},Li=Rl("a",mi,{[gt]:()=>o(),onscroll:e=>e.preventDefault()},"r.pd.fr",ct?"m":"_",Ot),Di=Rl(kt,Li,"not-hover");Fl(Di,ct?At:"pause"),Rl(bt,Di,{[ht]:T},"text",ct?Ot:"_");let Ei=Rl(kt,Li,"hover");Fl(Ei,At);let Ti=Rl(bt,Ei,{[ht]:q},"text",ct?Ot:"_"),qi=0;fi.onscroll=()=>{let e=Math.abs(gi.scrollHeight-fi.clientHeight-fi.scrollTop),t=qi-e;if(qi=e,e<2&&zi(),0!=t)return t<0&&Ol&&e>2?0==bl?o():void(bl=Math.max(bl-1,0)):void(!Ol&&e<2&&o())};let Ji={},Ki=async(e,t,l,...r)=>{let n,i=((e,t,l)=>l?e+l:e+t)(e,t,l);null!=Ji[i]?n=Ji[i]:(n=await jl(i).catch(El),Ji[i]=n),n=function(e){let t=Mt(e.substring(1,7),16);return"hsl("+Math.floor(360*t/16777215)+",80%,60%)"}(n);for(let e of r)e&&(e.style.color=n)},ji=(e,t,l,r,n,i)=>{n&&Rl("img",e,{src:n},"nikcon");let a=Rl(bt,e,{[ht]:t},"name"),o=null;l?i||(o=Rl(bt,e,{[ht]:l},"ip.id")):r&&(o=Rl(bt,e,{[ht]:r},"ip")),Rl(bt,e,{[ht]:": "}),Ki(t,l,r,a,o)},Gi=e=>{wl=e;let t=J;0!=e&&(t=e>20?K:e+j),Ti.innerText=G+t},zi=()=>{let e=gi.childNodes;for(;e.length>80;){let t=e[0];Yi(t)}},Yi=e=>{for(let t=0;t<Si.length;t++){if(Si[t].chat==e){Si.splice(t,1);break}}let t=e[pt]("removed");t&&t.length&&(t[0].value=!0),e.remove(),a(!0)};a=(e=!1)=>{if(bl=e?1:0,Ol)return fi.scrollTop=gi.scrollHeight},o=()=>{Ol=!Ol,Ol?(Vl(Li,Ot),Gi(0),a(!0)):Wl(Li,Ot)};let Si=[],Ui={},$i={},Bi={},Zi={},Mi=e=>{Ol||Gi(wl+1),Wl(e,Ot),a(!0)},Xi=async e=>{let t=e.num,l=Rl(kt,gi,"chl",Ot),r=Rl("input",l,{type:Ot,value:!1},"removed"),n=Rl(kt,l,"tt.r"),c=Rl(bt,n),s=e.nickname,u=e.ip,p=(e=>{let t=e.matchAll(/&#x([0-9a-fA-F]+);/g);for(let l of t){let t=String.fromCodePoint("0x"+l[1]);e=e.replace(l[0],t)}return e})(decodeURIComponent(e.title)),d=e.id,h=e.img,g=e.fix,m=e.my??!1,_=un(),y=dn(Ht,tl);(hn(e,_)||hn(e,y))&&Vl(l,"block"),Si.push({chat:l,title:p,id:d,ip:u,nickname:s}),s?ji(c,s,d,u,h,g):Vl(l,"notify");let w,k=Rl(bt,c,{[ht]:p},"tt"),b=!1,I=[];for(let t of p.matchAll(Dt)){let l=t[0],r=t[1],n=t[2],i=Br(r,n);i?(Qr(k,l,i),a(!0)):(I.push([l,r,n]),b||(b=!0,(async()=>{let{write:t}=await Co(e.num).catch(El);if(!t)return;let l=fr(t,"img","written_dccon");for(let e of l){let t=_r(e,"src").match(Et);if(t)await Sr(t[1]).catch(El);else{let t=_r(e,"data-src").match(Et);t&&await Sr(t[1]).catch(El)}}for(let e of I){let t=Br(e[1],e[2]);t&&Qr(k,Lt(e[0]),t)}a(!0)})()))}if(t){n.id=xi(t,0);let e=Rl(kt,l,"w.zero");w=Rl(kt,e,"vp.post");let s=Rl(kt,w,{id:"pc-"+t},"page.pc"),p=!0;m&&Ai(t,0,(()=>{p&&n.click()}));let d=()=>{Vl(l,"open"),Wl(e,"zero"),i(0),Ol&&o(),J(),Jl(oi,n),oi.push(n),oi.length>5&&oi.shift().click(),yi(),Co(t).catch(El).then((({text:e})=>{const t=e.matchAll(/<iframe[^>]*id="movieIcon([^"]*)"[^>]*>[^<]*<\/iframe>/g);t?(async()=>{for(const l of t){const t=Gt+"board/movie/movie_view?no="+l[1],r=await xr(t);if(!r)continue;const n=r.match(/<video[^>]*poster="([^"]*)"[^>]*>[^<]*<source[^>]*src="([^"]*)"[^>]*type="([^"]*)"[^>]*>/);if(!n)continue;const i=Rl(kt,null,"v-container"),a=Rl(kt,i,"video_wrap");Rl("source",Rl("video",Rl(kt,a,"video_inbox"),{controls:!0,playsinline:!0,controlslist:"nodownload",poster:n[1],"data-no":l[1]},"dc_mv"),{src:n[2],type:n[3]}),e=e.r(l[0],i.outerHTML),i.remove()}s.innerHTML=e})():s.innerHTML=e}))};n.onclick=()=>{if(p=!p,fl==t&&i(0),p){for(Jl(oi,n),Vl(e,"zero"),Wl(l,"open");s.lastChild;)s.lastChild.remove();return a(),void yi()}d()};let h,g,_=Rl(kt,e,"cm",Ot),y=Rl(kt,_,"vp"),k=Rl(kt,y,"page"),b=Rl("a",_,{[gt]:()=>h()},"ex.sm.r");Fl(b,"more_vert");let I=Rl("a",e,{[gt]:()=>{fl==t?i(0):i(t,l,x)}},"ic.r"),x=Rl(bt,I,{[ht]:B}),C=Rl("a",e,{[gt]:()=>n.click()},"ex.alt");Fl(C,"expand_less");let A={},L=[],D=[],E=Rl(kt,k,"w"),T=0,q=0,J=async()=>{if("false"!=r.value)return;let e=await Lo(t).catch(El);if(!e)return;e.count?Wl(_,Ot):Vl(_,Ot);let o=T;for(let r in e.comments){if(L.includes(r))continue;L.push(r),q>20&&(E=Rl(kt,k,"w",Ot),o++,q=0);let a=e.comments[r],c=Rl(kt,null,"w"),s=Rl("a",null,"cml.r");s.id=xi(t,r);let d=a.text,h=a.target,g=a.name;if(h){let t=e.comments[h];t&&(g=t.name),Vl(s,"re"),Fl(Rl(kt,s,"re-icon"),Ct)}let _=d.length>8&&d.substring(d.length-8)==ml;if(_?(ml="",Ai(t,h||r,(e=>{p&&n.click(),Vl(e,"hl"),Nt((()=>Wl(e,"hl")),500)}))):Ci(t,h,s),s.onclick=()=>i(t,l,x,s,h||a.num,a.name,g),null==A[h])A[a.num]=c,c.appendChild(s),E.appendChild(c),D.length==o&&D.push(E);else{A[h].insertAdjacentElement("beforeend",s)}let y=Rl(kt,s,"writer-dlc");ji(y,a.name,a.id,a.ip,a.img,a.fix),Rl(kt,s,{innerHTML:d},"text"),q++;let w=[{text:Be,icon:"delete",[gt]:async()=>{let e="",{delId:l,delValue:n,vCurT:i}=await Co(t).catch(El);if(u||a.ip){let{r:t,p:l}=Tl(),r=Cn({title:Y,input:e,nowrap:!0,options:[{text:O,[gt]:l=>{if(e=r.input.value,e.length<2)return An(f);l(),t(!0)}},{text:v,[gt]:e=>{e(),t(!1)}}]});if(!await l)return}let o=await Tr(r,{num:t,id:l,value:n,vCurT:i},e);o||An(de);let c=o.split("||");return"true"==c[0]?(s.remove(),J()):1==c.length?An(o):void An(de)}}];(m||u||_||a.ip||a.id==sl)&&Dn(s,w)}g(),a(!0)};h=()=>{T++;let e=D[T];e&&Wl(e,Ot),g()},g=()=>{T+1==D.length?Vl(b,Ot):Wl(b,Ot)};let K=Rl(bt,c,"cm.fr",Ot);Fl(K,Ct,"f");let j=Rl(kt,K,"nc.gray-div"),G=Rl(bt,K,{[ht]:"+"}),z=[],S=[],U=[];for(let e=0;e<3;e++){let t=Rl(kt,j,"num-"+e);S.push(Rl(bt,t,"old")),U.push(Rl(bt,t,"new")),z.push(t)}let $=(e,t,l)=>{let r=3-t+e,n=U[r][ht];S[r][ht]=n,U[r][ht]=l,l!=n&&(Vl(z[r],"changed"),Nt((()=>Wl(z[r],"changed")),500))},Z=e=>(e+"").split("").reverse();Bi[t]=(e=-1,l=!1)=>{if("false"!=r.value)return void delete Bi[t];let n=()=>{-1==e&&(e=$i[t]+1),$i[t]=e;let l=Z(e);l.length>3?(l="999".split(""),Wl(G,Ot)):Vl(G,Ot);for(let e=0;e<l.length;e++)$(e,l.length,l[e]);e?(Wl(K,Ot),a(!0)):Vl(K,Ot),p&&!Oi[t]||J().catch(El)};l?n():Nt(n,ql(1,_l))}}if(e.date){let t=Rt()-e.date;(t>_l||!kl)&&Mi(l),Nt((()=>Mi(l)),_l-t)}else Mi(l);Ol||zi();let C=[];(m||u||il&&d==sl)&&C.push({text:Be,icon:"delete",[gt]:()=>{Cn({title:Ze,desc:Me,options:[{text:O,enter:!0,[gt]:async(e,r)=>{r();let n="";if(u){let{r:t,p:l}=Tl(),r=Cn({title:Y,input:n,nowrap:!0,options:[{text:O,enter:!0,[gt]:(e,l)=>{if(n=r.input.value,n.length<2)return An(f);t(!0),e()}},{text:v,[gt]:e=>{t(!1),e()}}]});if(!await l)return e()}let i=await Dr(t,n);e();let a=i.split("||");if("false"==a[0])return An(a[1]);Yi(l)}},{text:v}]})}},{hr:!0}),t&&(C.push({text:x,icon:"open_in_new",[gt]:()=>{let e=Rl("a",null,{href:or(t),target:"_blank"});e.click(),e.remove()}},{text:Xe,[gt]:()=>{window.navigator.clipboard.writeText(or(t))}}),m||!u&&d==sl||(C.push({hr:!0}),u?C.push({text:Qe,[gt]:()=>{Cn({title:Re,desc:"IP: "+u,options:[{text:Ve,[gt]:e=>{let t=dn(Ht,tl);t.on=1,_n(t,"ip",u),mn(t,Ht),e()}},{text:He,[gt]:e=>{let t=un();t.on=1,_n(t,"ip",u),gn(t),e()}},{text:v}]})}}):C.push({text:Ne,[gt]:()=>{Cn({title:Re,desc:"ID: "+d,options:[{text:Ve,[gt]:e=>{let t=dn(Ht,tl);t.on=1,_n(t,"id",d),mn(t,Ht),e()}},{text:He,[gt]:e=>{let t=un();t.on=1,_n(t,"id",d),gn(t),e()}},{text:v}]})}}),C.push({text:Pe,[gt]:()=>{Cn({title:Re,desc:s,options:[{text:Ve,[gt]:e=>{let t=dn(Ht,tl);t.on=1,_n(t,"nick",s),mn(t,Ht),e()}},{text:He,[gt]:e=>{let t=un();t.on=1,_n(t,"nick",s),gn(t),e()}},{text:v}]})}}))),C.length&&(Dn(n,C),Dn(w,C))};DEBUG&&El("input login");let Ni=Rl(kt,ci,"li-c"),Qi=Rl("a",Ni,{[gt]:()=>c()},Ot,"ex.tab"),Pi=Fl(Qi,"expand_more");c=()=>{Il=!Il,Il?(Pi.innerText="expand_more",Wl(Fi,Ot)):(Pi.innerText="expand_less",Vl(Fi,Ot)),a(!0)};let Ri,Fi=Rl(kt,Ni,"fr",Ot),Hi=Rl("input",Fi,{type:"text",[ft]:z,maxlength:15,name:"name"}),Vi=Rl("input",Fi,{type:"password",[ft]:Y,maxlength:20,name:"password"}),Wi=Rl(kt,Ni,"fr",Ot),ea=Rl("a",Wi),ta=Rl("img",ea,{[gt]:()=>na()},"captcha"),la=Rl("input",Wi,{type:"text",[ft]:S,maxlength:20}),ra=()=>{nl&&(xl?(Hi.value=xl,Vl(Hi,vt)):Wl(Hi,vt))},na=async()=>{if(la.value="",Dl()){let e=Ll(),t={ci_t:Ul("ci_c"),gall_id:Ht,kcaptcha_type:e?"write":"comment",_GALLTYPE_:Vt},l=Gt+"kcaptcha/session";e?await Lr(l,t).catch(El):await Er(fl,l,t).catch(El),ta.src=Gt+"kcaptcha/image/?gall_id="+Ht+"&kcaptcha_type="+(e?"write":"comment")+"&time="+Rt()+"&_GALLTYPE_="+Vt,Wl(Wi,Ot)}else Vl(Wi,Ot)};l=()=>{il||sn(W)?Vl(Ni,Ot):(Wl(Fi,Ot),Wl(Qi,Ot),a(!0)),Ri?.()};let ia=()=>Hi.value??"",aa=()=>xl||(il?cl:ia()),oa=()=>Vi.value??"",ca=()=>la.value??"",sa=Rl(kt,ci,"ri-c",Ot),ua=Rl(kt,sa,"tab"),pa=Rl(bt,ua,"name"),da=Fl(ua,"more_horiz",Ot),ha=Rl(bt,ua,"name",Ot),fa=Rl(bt,ua,{[ht]:U});DEBUG&&El("input chat");let ga=Rl(kt,ci,"ci-c"),ma=Rl(kt,ga,"f"),_a=Rl(kt,ma,"i"),ya="--ih",wa=Rl("textarea",_a,{[ft]:A,oninput:()=>{Bl(ya,wa.clientHeight+12+"px"),wa.style.height=0,wa.style.height=wa.scrollHeight-19+"px",a(!0),Xt((()=>Bl(ya,0)))},onblur:er},vt),Oa=null,va=null,ka=null;i=(e,t,l,n=null,i=0,o="",c="")=>{if(null!=n&&n==ka&&(e=0,i=0),Oa&&va&&(ka&&Wl(ka,"rp"),Wl(Oa,"wr"),Wl(Oa,"rp"),va[ht]=B,Wl(va,"f-white"),Vl(sa,Ot),Wl(fi,"r"),Vl(da,Ot),Vl(ha,Ot)),fl=e,gl=i,Ll())al&&(Vl(wa,vt),Vl(Na,vt),Vl(Ea,vt),Vl(Io,vt),il||Vl(Ni,Ot)),Wl(ga,"wr"),wa[ft]=A,Oa=null,va=null,ka=null;else{if(al&&(Wl(wa,vt),Wl(Na,vt),Wl(Ea,vt),Wl(Io,vt),il||Wl(Ni,Ot)),Vl(ga,"wr"),Vl(t,"wr"),n&&i)Vl(n,"rp"),Vl(t,"rp"),wa[ft]=L,pa[ht]=o,o!=c&&(ha[ht]=c,Wl(da,Ot),Wl(ha,Ot)),fa[ht]=U,l[ht]=v,Wl(l,"f-white");else{let t=Ui[e];pa[ht]=t.name,wa[ft]=D,fa[ht]=$,l[ht]=Z,Vl(l,"f-white")}Wl(sa,Ot),Vl(fi,"r"),Oa=t,va=l,ka=n??null,wa.focus()}r(),na(),Sa(),ra(),a(!0)},DEBUG&&El("dccon");let ba=Rl(kt,ga,"p.p-dccon",Ot),Ia=Rl(kt,Rl(kt,Rl(kt,ba,"dcl"),"vp"),"page"),xa=Rl(kt,Rl(kt,Rl(kt,ba,"dcc"),"vp"),"page"),Ca=e=>{let t=e.idx,l=e.title,r="dc"+t,n=Rl(kt,null,"package"),i=lt[dt]("#"+r);if(i)xa.replaceChild(n,i);else{xa.appendChild(n);let t=Rl("a",Ia,{href:"#"+r,[gt]:()=>{wa.focus(),er()}});l==p?Fl(t,"history"):Rl("img",t,{src:Zr(e.code)})}n.setAttribute("id",r),Rl(bt,Rl(kt,n,"hd.r"),{[ht]:l});let a=Rl(kt,n,"flex.fr");for(let t of e.detail){let e=t.code,r=t.title,n=t.package_title;Rl("img",a,{loading:"lazy",src:Zr(e),[gt]:async()=>{let t=await Sr(e);if(DEBUG&&El(n,r,t),Ll()){Xr(t);let n=l;l==p&&(null!=Kr[e]||await Sr(e),n=Kr[e].package_title),wa.focus(),wa.value+=":"+n+", "+r+": "}else Nr(t,fl)}},"d")}},Aa=async e=>{await(async e=>{if("recent"==e&&await Mr(e,0),"icon"==e){let t=Math.min(await Mr(e,0),20);for(let l=1;t>=l;l++)await Mr(e,l)}})(e).catch(El)};nn["dccon-pk"]=e=>{for(let t in e){if(jr.includes(t))continue;let l=e[t];for(let e of l.detail)Kr[e.code]=e;jr.push(l.title)}};let La=!0,Da=!1,Ea=Rl("a",ma,{onmousedown:()=>(La=!La,La?(Wl(Ta,"f"),Vl(ba,Ot)):(wa.focus(),Vl(Ta,"f"),Wl(ba,Ot),Da||(Da=!0,Aa("recent"),Aa("icon"))),void Xt((()=>wa.focus())))},"d.b",vt),Ta=Fl(Ea,"mood");DEBUG&&El("upload");let qa=Rl(kt,ma,"p.up.abs.vp.pv-vp",Ot),Ja=Rl(kt,qa,"fr.page"),Ka=Rl("a",Ja,{[gt]:()=>Xa.click()},"pv.r.b.o-l");Fl(Ka,"add_photo_alternate"),Rl(bt,Ka,{[ht]:ze});let ja=null,Ga=!1,za=[],Ya=!1,Sa=()=>{null!==ja&&(ho?(Wl(ja.preview,Ot),Ga?Wl(ja.preview,"up"):Vl(ja.preview,"up")):Vl(ja.preview,Ot)),Fa[ht]=za.length,0==za.length?Vl(Fa,Ot):Wl(Fa,Ot),Ya&&Ll()?(Wl(qa,Ot),Vl(Ra,"f")):(Vl(qa,Ot),Wl(Ra,"f"))},Ua=(e=null)=>{Ya=null===e?!Ya:e,Sa()},$a=(e,t)=>{let l=Rl(kt,e,"pv.r"),r=Rl(kt,l,"image"),n=Rl("img",r),i=Rl(kt,l,"desc"),a=Rl(bt,i,{[ht]:t.name},"file-name");return Rl(bt,i,{[ht]:"("+Pl(t.size)+")"},"size"),{p:l,c:r,i:n,n:a}},Ba=e=>{let{p:t,c:l,i:r}=$a(Ja,e),n=Fl(l,"pending","pending.abs"),i=Fl(l,"warning","error.abs",Ot),a=new FileReader;a.onload=()=>r.src=a.result,a.readAsDataURL(e);let{r:o,p:c}=Tl(),s={preview:t,img:r,original:e.name,name:"",size:e.size,type:e.type,upload:!1,file:e,error:!1,num:0,url:"",close:async()=>{t.remove();for(let e=0;e<za.length;e++){let t=za[e];if(s===t){za.splice(e,1);break}}Sa(),s.upload?Jr(s.num):(await c.catch(El),s.error||Jr(s.num))},p:c};za.push(s);let u=Rl("a",t,"close.abs-tr.b");Fl(u,"delete","f"),u.onclick=()=>s.close();let p=(e,...l)=>{An(e),El(e,...l),s.error=!0,Vl(t,"error"),Wl(i,Ot)};return qr(e).catch(El).then((e=>(Vl(n,Ot),e?e.error?p(e.error,e):(s.upload=!0,Vl(t,"up"),s.name=e.name,s.url=e.url,s.num=e.file_temp_no,void o()):p(me)))),s},Za=(e=null)=>{if(null!==ja&&ja.close(),null===e)return ja?.preview.remove(),cn("zzal",""),Wl(po,Ot),void(ja=null);ja=e,Vl(ja.preview,"o-f","z");for(let t=0;t<za.length;t++)za[t]===e&&za.splice(t,1);e.close=()=>{Ga=!0};let{p:t,i:l,n:r}=$a(lo,e);Vl(t,"up","o-f"),Vl(po,Ot);let n=Rl("a",t,"close.abs-tr.b");Fl(n,"delete","f"),n.onclick=()=>{Cn({desc:Ge,options:[{text:k,[gt]:e=>{Za(null),t.remove(),e()},enter:!0},{text:v}]})};let i=()=>{l.src=e.img.src,r.innerText=e.name;let t=(e=>({name:e.name,size:e.size,type:e.type,url:e.url,src:e.img.src}))(e);cn("zzal",JSON.stringify(t))};e.upload?i():(async()=>{await e.p,i()})(),Sa()},Ma=e=>e.size>2e7?An(ge):al?An(Ce):(Ba(e),Sa(),void Ua(!0)),Xa=Rl("input",null,{type:"file",accept:"image/*",multiple:"true",onchange:()=>{for(let e of Xa.files)Ma(e)}}),Na=Rl("a",ma,{[gt]:()=>Ua()},"up.b.abs-tl",vt);Ln(Na,{text:be,top:!0}),ondragenter=async e=>{if(e.dataTransfer&&e.dataTransfer.files){let t=(e.dataTransfer.files.length>0?e.dataTransfer.files:e.dataTransfer.items)[0];if(!t.type||"image"!=t.type.split("/")[0])return;Vl(vn,"drag")}},vn.ondragenter=e=>{e.preventDefault()},vn.ondragover=e=>e.preventDefault(),vn.ondragleave=()=>{Xt((()=>Wl(vn,"drag")))},vn.ondrop=e=>{if(e.preventDefault(),Wl(vn,"drag"),e.dataTransfer.files){let t=!1;for(let l of e.dataTransfer.files)l.type&&"image"==l.type.split("/")[0]?Ma(l):t=!0;t&&An(xe)}},ot&&lt.addEventListener("paste",(async()=>{let e=await window.navigator.clipboard.read(),t=0;for(let l of e){El(l);let e=null;for(let t of l.types)if(e=t.match(/image\/(.+)$/),El(e),e)break;if(El(e),!e)continue;let r=await l.getType(e[0]),n=new File([r],`image_${t}.${e[1]}`);Ma(n),t+=1}}));let Qa,Pa,Ra=Fl(Na,"add_circle"),Fa=Rl("span",Na,{[ht]:0},"cnt.abs-tr",Ot);r=()=>{Ll()&&!al?Wl(Na,vt):Vl(Na,vt)},DEBUG&&El("settings");let Ha=Rl(kt,ga,"p.p-settings",Ot);Rl(bt,Rl(kt,Ha,"hd"),{[ht]:M},"h"),Fl(Rl("a",Ha,{[gt]:()=>Qa()},"b.abs-tr"),"close");let Va=Rl("a",Ha,{[gt]:()=>Pa()},"b.abs-tl",Ot);Fl(Va,"navigate_before");let Wa=Rl(kt,Ha),eo=Rl(kt,Wa,"opts"),to=Rl(kt,Wa,"opts",Ot),lo=Rl(kt,Wa,"opts",Ot),ro=Rl(kt,Wa,"opts",Ot),no=eo;Pa=(e=eo)=>{Vl(no,Ot),Wl(e,Ot),no=e,e==eo?Vl(Va,Ot):Wl(Va,Ot)};let io=(e,t,l,r,n=!1,i=eo)=>{let a=n,o=Rl(kt,i,"opt");a&&Vl(o,"chk");let c=Rl(kt,o,"label.fr");t&&Fl(c,t),Rl(bt,c,{[ht]:e});return Fl(Rl(bt,o,"value"),"check_small"),o.onclick=()=>cn(e,!a),nn[e]=e=>{a=e,a?(Vl(o,"chk"),l?.()):(Wl(o,"chk"),r?.())},on(e,n),o},ao=(e,t,l,r,n,i,a)=>io(e,t,(()=>Bl(l,r)),(()=>Bl(l,n)),i,a),oo=(e,t,l="")=>{let r=Rl(kt,eo,{[gt]:()=>Pa(t)},"opt.r"),n=Rl(kt,r,"label.fr");return l&&Fl(n,l),Rl(bt,n,{[ht]:e}),Fl(r,"navigate_next","abs-r"),r};oo(et,to,"block");let co=(e,t,l,r)=>{let n=Rl("a",t,{[gt]:()=>{let t=Cn({title:e,options:[],close:!0}).content,n=Rl(kt,t,"b-entry.fr"),i=()=>{Hl(n);let e=l?un():dn(Ht,tl),t=e[r].split("||");for(let a of t){if(""==a)continue;let t=Rl(kt,n,"entry.fr");Rl(bt,t,{[ht]:'"'+a+'"'});let o=Rl("a",t,{[gt]:()=>{yn(e,r,a),l?gn(e):mn(e,Ht),i()}});Fl(o,"close","sml")}};i();let a=Rl(kt,t,"b-wrap.fr"),o=Rl("input",a,"nowrap"),c=Rl("a",a,{[gt]:()=>{if(!o.value)return;let e=l?un():dn(Ht,tl);_n(e,r,o.value),l?gn(e):mn(e,Ht),i(),o.value=""},[ht]:We},"sb");lr(o,c,!1,!0)}},"opt.r"),i=Rl(kt,n,"label.fr");Rl(bt,i,{[ht]:e}),Fl(n,"navigate_next","abs-r")};Rl(kt,to,{[ht]:He},"opt.hr"),co(Fe,to,!0,"word"),co(Ne,to,!0,"id"),co(Qe,to,!0,"ip"),co(Pe,to,!0,"nick");let so=Rl(kt,to,{[ht]:Ve},"opt.hr");co(Fe,to,!1,"word"),co(Ne,to,!1,"id"),co(Qe,to,!1,"ip"),co(Pe,to,!1,"nick"),oo(le,lo);let uo=Rl("input",null,{type:"file",accept:"image/*",multiple:"true",onchange:()=>{if(0===uo.files.length)return;let e=Ba(uo.files[0]);Za(e),ho||fo.click()}}),po=Rl("a",lo,{[gt]:()=>uo.click()},"pv.r.b.o-f");Fl(po,"add_photo_alternate"),Rl(bt,po,{[ht]:Ye});let ho=!1,fo=io(re,null,(()=>{ho=!0,null!==ja&&Wl(ja.preview,Ot)}),(()=>{ho=!1,null!==ja&&Vl(ja.preview,Ot)}),!1,lo),go="",mo=Rl("a",lo,{[gt]:()=>{let e=Cn({title:ne,input:go,options:[{text:O,[gt]:t=>{go=e.input.value,cn("footer",go),t()}},{text:v}]}),t=e.input;Vl(t,"ft");let l=Rl(bt,null,{[ht]:"- "+u,[gt]:()=>t.focus()},"footer-static");t.insertAdjacentElement("afterend",l)}},"opt.r");Rl(bt,mo,{[ht]:ne},"label"),Fl(mo,"navigate_next","abs-r"),io(ee,"dark_mode",(()=>Wl(rt,"light")),(()=>Vl(rt,"light")),!0);let _o=io(X,"splitscreen",(()=>{ol=!0,ct&&!sn("mado")?Cn({title:O,desc:qe,options:[{text:k,[gt]:e=>{Fn(),cn("mado",!0),e()},enter:!0},{text:v,[gt]:e=>{_o.click(),e()}}]}):Fn()}),(()=>{ol=!1,Fn()}),!ct);oo(te,ro);let yo=!0;io(F,null,(()=>yo=!0),(()=>yo=!1),!0),io(W,null,(()=>{Vl(Fi,Ot),Vl(Qi,Ot)}),(()=>{il||(Wl(Fi,Ot),Wl(Qi,Ot))})),io(H,null,(()=>Wr(1)),(()=>Wr(0))),io(V,null,(()=>Vl(En,"co")),(()=>Wl(En,"co"))),io(ie,null,(()=>Wl(gi,"hn")),(()=>Vl(gi,"hn")),!1,ro),io(P,null,(()=>{Wl(gi,"hu"),a(!0)}),(()=>{Vl(gi,"hu"),a(!0)}),!0,ro);ao(Le,null,"--cc","#fc5","var(--cf)",!0,ro);ao(N,null,"--sb","smooth","auto",!0,ro);let wo="--fs";io(Q,null,(()=>{Bl(wo,"15px"),a(!0)}),(()=>{Bl(wo,"13px"),a(!0)}),!1,ro);ao(R,null,"--ds","60px","80px",!1,ro),Rl(bt,Ha,{[ht]:"version: "+VERSION},"version");let Oo=!0;Qa=()=>{Oo=!Oo,Oo?(Wl(bo,"f"),Vl(Ha,Ot)):(Vl(bo,"f"),Wl(Ha,Ot))};let vo=Rl(kt,ga,"fr.sc"),ko=Rl("a",vo,{[gt]:Qa},"b.gray"),bo=Fl(ko,"settings"),Io=Rl("a",vo,"sb",vt);Rl(bt,Io,{[ht]:ae}),lr(wa,Io,!0),DEBUG&&El("funcs");let xo={},Co=async(e,t=!1)=>{if(!t&&null!=Ui[e])return Ui[e];let l={num:e,name:"",text:oe,write:"",esno:"",string:"",delId:"",delValue:"",vCurT:""},r=await xr(or(e)).catch(El),n=()=>l;hl=!!new RegExp(`id="code_${e}"`).test(r);let i=dr(r,kt,"write_div");if(!i)return n();let a=dr(r,kt,"gallview_head");if(!a)return n();let o=hr(a,kt,"gall_writer");if(!o)return n();l.name=_r(o,"data-nick"),l.write=i,l.text=((e,t)=>{let l=e.matchAll(/<(img|video)[^>]*src="[^">]+no=([0-9a-zA-Z]+)[^">]*"[^>]*>/g);for(let r of l){let l=r[0],n=l,i=r[2];if(DEBUG&&El("src",i),/class="d"/.test(l))continue;let a=l.match(/class="([^"]+)"/);n=a?n.r(a[0],`class="${a[1]} img"`):n.r(">","")+' class="img">';let o=l.match(/on[Cc]lick="[^"]+no=([0-9a-zA-Z]+)[^"]*"/);n=o?n.r(o[0],`onclick="window.postMessage(JSON.stringify({type:'${wt}',src:'${Vr(o[1])}',id:'${t}'}))" data-osrc="${Vr(o[1])}"`):n.r(">","")+` onclick="window.postMessage(JSON.stringify({type:'${wt}',src:'${Vr(i)}',id:'${t}'}))" data-osrc="${Vr(i)}" draggable="false">`,e=e.r(l,n)}return e})(Hr(Rr(i).r(/(\r|\t)/g,"").r(/[ ]{2,}/g," ")),"pc-"+e);let c=kr(r,"e_s_n_o");c&&(l.esno=c),l.string=sr(r),Ui[e]=l;let s={};if(br(r,"_cmt_del_form_",s))for(let e in s)l.delId=e,l.delValue=s[e];let u=kr(r,"v_cur_t");u&&(l.vCurT=u);let p={cur_t:"",check_6:"",check_7:"",check_8:"",check_9:"",check_10:"",recommend:"0",user_ip:"",t_vch2:"",t_vch2_chk:"",service_code:""};return en(r,p),p.service_code=ur(p.service_code,l.string),xo[e]=p,n()},Ao=async(e,t,l)=>{let r,n=await Er(e,nr()+"comment/",t).catch(El);if(!n)return!1;try{r=JSON.parse(n)}catch(e){return El(e,n),!1}let i=r.total_cnt;l.count=i;let a=r.comments;if(!a||!a.length)return!1;for(let e of a){let t=Mt(e.no);if(0==t)continue;let r={num:t,id:"",ip:"",name:"",img:"",fix:!1,text:"",target:0};if(null!=l.comments[t])continue;l.comments[t]=r,r.id=e.user_id,r.ip=e.ip,r.name=e.name,r.text=Hr(Rr(e.memo).r(/\n/g,"<br />"));let n=e.c_no;n&&(r.target=Mt(n));let i=e.gallog_icon.match(/\<img src='([^']+)'/);if(i){let e=i[1];r.img=e,r.fix=yr(e)}}return!0},Lo=async e=>{let{esno:t}=await Co(e).catch(El),l=$i[e],r={count:l,num:0,comments:{}};null!=Zi[e]&&(r=Zi[e]);let n={id:Ht,no:e,cmt_id:Ht,cmt_no:e,focus_cno:"",focus_pno:"",e_s_n_o:t,comment_page:1,sort:"D",prevCnt:"0",board_type:"",_GALLTYPE_:Vt},i=!0;for(;i;)i=await Ao(e,n,r).catch(El),n.comment_page++;return l!=r.count&&Bi[e](r.count,!0),Zi[e]=r,r},Do=[],Eo=async(e,t=!1)=>{if(0==e.length)return;kl?vl&&Xi({title:pe}):t=!0,e=e.sort(((e,t)=>e.num-t.num));let l=0;for(let r of e)Do.includes(r.num)||(await Xi(r).catch(El),r.count&&Bi[r.num]?.(r.count,t)),l=Math.max(l,r.num);yl=Math.max(yl,l),Al&&Al.postMessage({type:"ln",n:yl}),kl||(Xi({title:ue}),kl=!0,al&&Xi({title:ve})),vl=!1},To=()=>{let e,t,l,r,n,i,a,o,c,s,u,p,d,h,f,g;try{e=_DEBUG,t=_URL,l=_TEXT,r={},n=(e,t)=>{r[e]=t,self.postMessage({type:"cc",n:e,c:t})},i=async e=>self.postMessage({type:"pd",d:e}),a=_IT,o=_IH,c=_OH,s=_AT,u=_A,p=_TF,d=_SS,h=_SN,f=Number.parseInt,g=()=>_LN}catch{e=El,t=ir(),l=xr,r=$i,n=(e,t)=>Bi[e]?.(t,vl),i=Eo,a=gr,o=dr,c=hr,s=mr,u=_r,p=yr,d=se,h=ce,f=Mt,g=()=>yl}let m=e=>e.replace(/&amp;/g,"&").replace(/&nbsp;/g," ").replace(/&#035;/g,"#").replace(/&#039;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"');return{_UL:async()=>{let _=await l(t);if(_)try{_=_.replace(/(\n|\r|\t)/g,"");let e=[],t=_.matchAll(/<tr[^>]*class="[^"]*us-post[^"]*"[^>]*data-no="([^"]*)".+?<\/tr>/g);if(!t)return;for(let l of t){let t=l[0],i={num:0,subject:"",title:"",nickname:"",id:"",ip:"",date:0,img:"",fix:!1,count:0},_=f(l[1]);i.num=_;let y=t.match(/<span[^>]*class="[^"]*reply_num[^>]*"[^>]*>\[([0-9]+)\]<\/span>/),w=r[_]??0,O=0;if(y&&(O=f(y[1]),O&&(i.count=O)),_<=g()){O!=w&&n(_,O);continue}let v=a(t,"td","gall_tit");y&&(v=v.slice(0,v.length-y[1].length-2)),i.title=m(v);let k=o(t,"td","gall_num");if(k==d||k==h||"AD"==k)continue;let b=a(t,"td","gall_subject");if(i.subject=m(b),b==d||b==h||"AD"==b)continue;let I=c(t,"td","gall_writer");if(I){s(I,"data-nick",i,"nickname"),s(I,"data-uid",i,"id"),s(I,"data-ip",i,"ip");let e=I.match(/<img[^>]*src=["']([^"']+)["']/);if(e){let t=e[1];i.img=t,i.fix=p(t)}}let x=c(t,"td","gall_date"),C=u(x,"title");null!==C&&(i.date=Date.parse(C)),e.push(i)}await i(e)}catch(t){e(t)}}}},{_UL:qo}=To(),Jo=()=>{let e=async()=>{let t,l,r,n;try{t=_UL,l=_IV,r=()=>{},n=_DEBUG}catch{l=_l,t=qo,r=e=>Cl=e,n=El}await t().catch((e=>{n(e),postMessage({type:"err"})})),r(setTimeout(e,l))};return{_UC:e}},{_UC:Ko}=Jo(),jo=(...e)=>{if(El("init update",...e),vl=!0,at){Al&&Al.terminate();let e=new Blob([`let _URL='${ir()}';`,`let _IV=${_l};`,`let _LN=${yl};`,`let _SS='${se}';`,`let _SN='${ce}';`,`let{_IH,_OH,_IT,_AT,_A,_TF,_DEBUG}=(${pr.toString()})();`,`let{_TEXT}=(${Ir.toString()})();`,`let{_UL}=(${To.toString()})();`,`let{_UC}=(${Jo.toString()})();`,"self.onmessage=async(e)=>{switch(e.data.type){case'iv':_IV=e.data.iv;break;case'ln':_LN=e.data.n;break;}};","_UC();"],{type:"text/javascript"}),t=URL.createObjectURL(e);Al=new Worker(t),Al.onerror=(...e)=>{El(...e),jo("error",...e)},Al.onmessage=async e=>{let t=e.data;if(t&&t.type){if("pd"==t.type)return await Eo(t.d);if("cc"==t.type)return Bi[t.n]?.(t.c,vl);if("err"==t.type)return jo("worker err")}}}else Cl&&clearTimeout(Cl),Ko()};jo();let Go={id:"",_GALLTYPE_:"",gallery_no:0,r_key:"",upload_status:"",clickbutton:"",user_ip:"",block_key:"",tempIdx:"",headtext:"",use_headtext:"",poll:"",service_code:"",use_html:"",subject:"",adult_article_yn:"N",adult_auth_yn:"N",ci_t:void 0,mode:"W",movieIdx:"",series_title:"[]",series_data:"",headTail:'""'};nl&&(Go.fix="");let zo="",Yo=(e=!0)=>{!al&&e&&kl&&Xi({title:ve}),al=e,e?(Ll()&&(Vl(wa,vt),Vl(Na,vt),Vl(Ea,vt),Vl(Io,vt)),il||Vl(Ni,Ot)):(Wl(wa,vt),Wl(Na,vt),Wl(Ea,vt),Wl(Io,vt),il||Wl(Ni,Ot))};Ri=async()=>{let e=await xr(ar()).catch(El);if(!/id="write"/.test(e))return Yo();if(Yo(!1),en(e,Go),Gl=sr(e),dl=/id="code"/.test(e),nl){Go.headtext=0;let t=kr(e,il?"nickname":"name");xl=t||""}na(),ra(),a(!0)};let So=e=>"false||"+e,Uo=(e,t,l)=>`<img class="written_dccon" src="${e}" conalt="${t}" alt="${t}" con_alt="${t}" title="${t}" detail="${l}">`,$o=0,Bo=async(e,t=!0)=>{let l=`<p><a href="${e}" target="_blank">${e}</a></p>`,r=await Lr(Gt+"api/ogp",{url:e});if(!r)return l;let n=JSON.parse(r);if(!n.result)return l;let i=`{{_OG_START::${e}^#^${n.og_title}^#^${n.og_description}^#^${n.og_image}::OG_END_}}`;return t&&(i=`<p><span class="og-url" style="color:#3b4890">${e}</span></p><p></p>`+i),i},Zo=async(e,t)=>{Go.subject=Qt(e);let l={};if(!il){let e=ia(),t=oa();if(0==e.length)return So(h);if(t.length<2)return So(f);l.name=e,l.password=t}if(dl){let e=ca();if(0==e.length)return So(g);l.kcaptcha_code=e}let r=Rt(),n=r-$o;if(n<2e3){let e=2e3-n;$o=r+e,await(e=>{let{r:t,p:l}=Tl();return Nt(t,e),l})(e)}else $o=r;if(zo=await Lr("/block/block/",Go,l).catch(El),!zo)return So(he);Go.service_code=ur(Go.service_code);let i={block_key:zo,memo:"",code:dl?ca():void 0,bgm:"0"},a="";0!==za.length|(ho&&null!==ja&&!Ga)&&(a+=d),ho&&null!==ja&&!Ga&&(a+=`<img src="${ja.url}"/>`+d);for(let e=0;e<za.length;e++){let t=za[e];if(!t.upload)return So(ye);a+=`<img src="${t.url}" class="txc-image "/>`+d,i["file_write["+e+"][file_no]"]=t.num}let o="";if(yo&&Pn.length)for(let e=0;e<Pn.length;e++){let t,l,r=Pn[e],n=r.match(Jt),i=r.match(Tt);if(n){if(t=n[2],l="https://youtu.be/"+t,0==e){o+=`<p><span class="og-url" style="color:#3b4890" <div=""></span></p><div class="yt_movie"><embed src="https://www.youtube.com/v/${t}?version=3" type="application/x-shockwave-flash" width="560" height="315" allowfullscreen="true"></div><a class="yt_link" href="${l}" target="_blank">${l}</a></div>`,o+=await Bo(l,!1);continue}}else i?(t=i[2],l="https://www.twitch.tv/"+t):l=r;o+=await Bo(l)}o&&(o+=d);let c="";for(let t of e.matchAll(Dt)){let e=t[1],l=t[2],r=Br(e,l);if(!r)continue;let n=$r(e,l);n&&(n.buy&&(c+=Uo(r,l,n.idx)))}c&&(c+=d);for(let e of t.matchAll(Dt)){let l=e[0],r=e[1],n=e[2],i=Br(r,n);if(!i)continue;let a=$r(r,n);a&&(a.buy&&(t=t.r(l,Uo(i,n,a.idx))))}return i.memo=Qt(a+o+d+c+t),await Xl(Lr,[St,Go,l],i,"comment_submit")};Io.onclick=async()=>{if(!wa.value)return;let e=wa.value??"";if(wa.value="",wa.oninput(),0==fl){let{r:t,p:l}=Tl();if(0!==za.length){let e=!1,r=!1;for(let t of za)t.upload||(e=!0),t.error&&(r=!0);if(r){if(Cn({title:we,desc:Oe,options:[{text:k,[gt]:e=>{t(!0),e()},enter:!0},{text:v,[gt]:e=>{t(!1),e()}}]}),!await l.catch(El))return}else if(e)return An(ye)}let r=e.split("\n");e=r[0];let n=d;for(let e=1;e<r.length;e++)n+=`<p>${r[e]}</p>`;if(""!==go){r=go.split("\n");for(let e of r)n+=`<p style="color:#ABABAB;">${e}</p>`}n+=`<p style="color:#ABABAB;">- ${u} ${Yl(20)}</p>`,(e=>{Nt(Ri,500);let t=Sl(e);if(1==t.length)return El(e),An(de);if("false"==t[0])return An(t[1]),El(e);let l=Mt(t[1].trim());Do.push(l),Xi({num:l,nickname:aa(),id:il?sl:"",ip:il?"":$l(Go.user_ip),title:Go.subject,img:ul,fix:pl,my:!0}),Ga=!1;for(let e=0;e<za.length;e++)za[e].close();za.length=0,Ua(!1)})(await Zo(e,n).catch(El))}else ml=Yl(8),((e,t)=>{Nt(na,500);let l=Sl(e);l.length<2?(El(e),An(de)):"false"==l[0]?(El(e),An(l[1])):(i(0),Bi[t](-1,!0))})(await(async(e,t,l=0)=>{let r=xo[e];if(!r)return 0;let n={};if(l&&(n.c_no=l),il)n.name=cl;else{if(xl)n.nickname=xl;else{let e=ia();if(0==e.length)return So(h);n.name=e}let e=oa();if(e.length<2)return So(f);n.password=e}if(hl){let e=ca();if(0==e.length)return So(g);n.code=e}n.memo=Qt(t);let i={id:Ht,no:e,c_gall_id:Ht,c_gall_no:e,[It]:"",_GALLTYPE_:Vt,headTail:'""'},a=await Xl(Er,[e,Ut,r,n],i,"comment_submit");try{let e=Mt(a);if(e)return"true||"+e}catch{El(a)}return a})(fl,e+ml,gl).catch(El),fl);ct&&wa.focus()},(()=>{let e=it?.getItem(mt)??"";if(e){rn=JSON.parse(e);for(let e in rn)on(e,rn[e])}})(),0!==Pn.length&&Gn(!1);let Mo=sn("version")??"";if("undefined"!=typeof VERSION){let e=e=>{let t=e.split(".");return t[0]+"."+t[1]};if(e(Mo)!==e(VERSION)){let e=Cn({title:Se+": "+VERSION,desc:tt+'<a href="https://joh1ah.github.io/dclivechat/change.log" target="_blank">'+Ue+"</a>",html:!0});Dn(e.content,[{text:Be,icon:"delete"},{hr:!0},{text:x,icon:"open_in_new"},{text:Xe},{hr:!0},{text:Ne},{text:Pe}]);let t=e.content.oncontextmenu({preventDefault:()=>{},clientX:0,clientY:0});xn=null,(Xo=t).parentNode.removeChild(Xo),e.content.appendChild(t),t.style.position="relative",t.style.marginTop="1em"}}var Xo;cn("version",VERSION),(()=>{let e=sn("zzal");if(null!==e&&""!==e)try{let t=(e=>{let{p:t,i:l}=$a(Ja,e);Vl(t,"up"),l.src=e.src;let r={preview:t,img:l,original:e.name,name:e.name,size:e.size,type:e.type,upload:!0,file:null,error:!1,num:null,url:e.url,close:()=>{t.remove();for(let t=0;t<za.length;t++){let l=za[t];if(e===l){za.splice(t,1);break}}Sa()}},n=Rl("a",t,"close.abs-tr.b");return Fl(n,"delete","f"),n.onclick=()=>r.close(),r})(JSON.parse(e));Za(t)}catch{Za(null)}})(),go=sn("footer")??"",Xt((()=>Wl(rt,Ot))),El("INIT done")})().catch((e=>console.log(e)));
