(async()=>{String.prototype.r=function(e,t){return this.replace(e,t)};let e=new TextDecoder;function t(t){let l=atob(t.r(/-/g,"+").r(/_/g,"/").r(/\./g,"="));let i=new Uint8Array(l.length);for(let e=0;e<i.length;e++){i[e]=l.charCodeAt(e)}return e.decode(i)}let l=t("IA==");let i=t("7LWc6re8IOyCrOyaqQ..");let r=t("PHA-PGJyPjwvcD4.");let a=t("64uJ64Sk7J6E7J2EIOyeheugpe2VmOyEuOyalC4.");let s=t("67mE67CA67KI7Zi466W8IDLsnpDrpqwg7J207IOBIOyeheugpe2VmOyEuOyalC4.");let c=t("64-E67CwIOuwqeyngCDsvZTrk5zrpbwg7J6F66Cl7ZWY7IS47JqULg..");let o=t("7J20IOq4sOuKpeydgCBEQ-yduOyCrOydtOuTnCDqsKTrn6zrpqzsl5DshJzrp4wg7IKs7Jqp7ZWgIOyImCDsnojsirXri4jri6Qu");let u=t("7J20IOq4sOuKpeydgCDquIAg66qp66GdIO2OmOydtOyngOyXkOyEnOunjCDsgqzsmqntlaAg7IiYIOyeiOyKteuLiOuLpC4.");let f=t("UEPrsoTsoIQg7Y6Y7J207KeA7JeQ7IScIOuLpOyLnCDsi5zrj4TtlbTso7zshLjsmpQu");let p=t("66Gc6re47JWE7JuD");let d=t("7ZmV7J24");let h=t("7Leo7IaM");let g=t("64Sk");let m=t("7KO87IaM6rCAIOyYrOuwlOultOyngCDslYrsirXri4jri6Qu");let _=t("7J20IOuwqeyGoeydhCDsi5zssq3tlZjsi5zqsqDsirXri4jquYw_");let y=t("7IOIIOywveyXkOyEnCDsl7TquLA.");let w=t("7IOd67Cp7IahIOyjvOyGjA..");let O=t("66mU7Iuc7KeAIOuztOuCtOq4sA..");let k=t("64u16riAIOyeheugpQ..");let v=t("64yT6riAIOyeheugpQ..");let b=t("7IOd67Cp7IahIOyxhO2MhQ..");let I=t("7Iqk7YGs66Gk7ZW07IScIOyxhO2MheydtCDrqYjst4TsirXri4jri6Q.");let x=t("7IOIIOuplOyLnOyngCDrs7TquLA.");let C=t("67O06riw");let A=t("MjDqsJwg7J207IOB");let L=t("6rCc");let E=t("7IOIIOuplOyLnOyngCA.");let D=t("64uJ64Sk7J6E");let T=t("67mE67CA67KI7Zi4");let q=t("7L2U65OcIOyeheugpQ..");let J=t("7JeQ6rKMIOuLteq4gA..");let K=t("7JeQ6rKMIOuMk-q4gA..");let j=t("64yT6riAIOyTsOq4sA..");let G=t("7IOIIOuMk-q4gCDsk7DripQg7KSR");let z=t("66Gc65Sp7KSR7J6F64uI64ukLg..");let Y=t("7LGE7YyFIOyEpOyglSAodGVzdCk=");let S=t("64uk7KSRIO2ZlOuptCDsgqzsmqkgKOuniOuPhCk.");let U=t("67aA65Oc65-s7Jq0IOyKpO2BrOuhpCDslaDri4jrqZTsnbTshZg.");let $=t("7Y-w7Yq4IO2BrOq4sCDtmZXrjIA.");let B=t("67CY6rOg64uJIOyVhOydtOuUlCDtkZzsi5w.");let Z=t("65SU7Iuc7L2YIO2BrOq4sCDspITsnbTquLA.");let M=t("6riAIOuCtOyaqeyXkCDrp4Htgawg7LaU6rCA");let X=t("7Ken7J2AIOyxhO2MhSDsp4Dsl7Dsi5zqsIQ.");let N=t("67Cp7IahIOyXhuydtCDssYTtjIXssL3rp4wg7IKs7Jqp");let Q=t("7Jyg64-ZIOuhnOq3uOyduCDsiKjquLDquLA.");let P=t("64uk7YGsIOuqqOuTnA..");let R=t("7LGE7YyFIO2RnOyLnCDrsKnrspU.");let F=t("7J6Q64-Z7Kek67CpIOuwjyDqvKzrpqzrp5A.");let H=t("7J6Q64-Z7Kek67CpIOyCrOyaqQ..");let V=t("6rys66as66eQIOyImOyglQ..");let W=t("64uJ64Sk7J6EIOyVhOydtOy9mCDtkZzsi5w.");let ee=t("7LGE7YyF");let te=t("7IKt7KCc65CY7JeI6rGw64KYIOyhtOyerO2VmOyngCDslYrripQg6rKM7Iuc66y87J6F64uI64ukLg..");let le=t("6rO17KeA");let ie=t("7ISk66y4");let re=t("7LGE7YyF67Cp7JeQIOyYpOyLoCDqsoPsnYQg7ZmY7JiB7ZWp64uI64ukIQ..");let ne=t("7LGE7YyF7LC97JeQIOuLpOyLnCDsl7DqsrDtlojsirXri4jri6Qu");let ae=t("7JWMIOyImCDsl4bripQg7Jik66WY");let se=t("7JWMIOyImCDsl4bripQg7Jik66WYIChibG9ja19rZXkp");let ce=t("7J6Y66q765CcIOyalOyyreyeheuLiOuLpC4.");let oe=t("7J2066-47KeA6rCAIOuEiOustCDtgb3ri4jri6Qu");let ue=t("7J2066-47KeAIOyXheuhnOuTnOyXkCDsi6TtjKjtlojsirXri4jri6Qu");let fe=t("7J2066-47KeAIOyCreygnOyXkCDsi6TtjKjtlojsirXri4jri6Qu");let pe=t("7JWE7KeBIOyXheuhnOuTnCDspJHsnbgg7J2066-47KeA6rCAIOyeiOyKteuLiOuLpC4.");let de=t("7J2066-47KeAIOyXhuydtCDsmKzrpqzsi5zqsqDsirXri4jquYw_");let he=t("7JeF66Gc65Oc7JeQIOyLpO2MqO2VnCDsnbTrr7jsp4DqsIAg7J6I7Iq164uI64ukLg..");let ge=t("7LGE7YyF7J20IOu5hO2ZnOyEse2ZlOuQmOyXiOyKteuLiOuLpC4.");let me=t("7J2066-4IOyLpO2WieykkeyeheuLiOuLpC4.");let _e=t("7J2066-47KeAIOyyqOu2gA..");let ye=t("65Oc656Y6re4IOyVpCDrk5zroa3snLzroZwg7J2066-47KeAIOyYrOumrOq4sA..");let we=t("7J2066-47KeA66eMIOyYrOumtCDsiJgg7J6I7Iq164uI64ukLg..");let Oe=t("7LGE7YyF7J20IOu5hO2ZnOyEse2ZlOuQnCDqsKTrn6zrpqzsnoXri4jri6Qu");let ke=t("4oCA4oCB4oCE4oCF4oCG4oCH4oCI4oCJ4oCK");let ve=t("64yT6riA7IiYIO2VmOydtOudvOydtO2KuA..");let be=t("7JiB7IOBIOy2lOqwgA..");let Ie=t("67Cw7LmYIOuwlOq-uOq4sA..");let xe=t("67Cw7LmYIOyZhOujjCE.");let Ce=t("66qo67CU7J28IO2ZmOqyveyXkOyEnOuKlCDqtozsnqXtlZjsp4Ag7JWK7Iq164uI64ukLgrqt7jrnpjrj4Qg7IKs7Jqp7ZWY7Iuc6rKg7Iq164uI6rmMPw..");let Ae=t("7KCE7LK0IOuLq-q4sA..");let Le=t("64uk7Jq066Gc65Oc");let Ee=t("64ur6riw");let De=t("7J6Q64-Z7Kek67CpIOydtOuvuOyngOulvCDsgq3soJztlZjsi5zqsqDsirXri4jquYw_");let Te=t("7J2066-47KeAIOyXheuhnOuTnA..");let qe=t("7J6Q64-Z7Kek67CpIOyXheuhnOuTnA..");let Je=t("67KE7KCEIOyXheuNsOydtO2KuOuQqA..");let Ke=t("7KCE7LK0IOuzgOqyveyCrO2VrSDrs7TquLA.");let je=t("6rWs66ek7ZWY7KeAIOyViuydgCDrlJTsi5zsvZjsnoXri4jri6Qu");let Ge=t("7IKt7KCc");let ze=t("7IKt7KCc7ZWY7Iuc6rKg7Iq164uI6rmMPw..");let Ye=t("7IKt7KCc65CcIOqyjOyLnOusvOydgCDrs7XqtaztlaAg7IiYIOyXhuyKteuLiOuLpC4.");let Se=t("VVJMIOuzteyCrA..");let Ue=t("SUQg7LCo64uo");let $e=t("SVAg7LCo64uo");let Be=t("64uJ64Sk7J6EIOywqOuLqA..");let Ze=t("64uk7J2MIOydtOyaqeyekOulvCDssKjri6jtlZjsi5zqsqDsirXri4jquYw_");let Me=t("7YKk7JuM65OcIOywqOuLqA..");let Xe=t("7KCE7LK0IOywqOuLqA..");let Ne=t("6rCk65-s66asIOywqOuLqA..");let Qe=t("7LaU6rCA");let Pe=t("7LCo64uoIOyEpOyglQ..");let Re=t("7J207KCcIOq4gOydhCDsmKTrpbjsqr0g7YG066at7ZWY66m0PGJyPuuLpOydjCDrqZTribTrpbwg7IKs7Jqp7ZWgIOyImCDsnojsirXri4jri6Qh");let Fe=document;let He=Fe.body;let Ve=Fe.head;let We=localStorage??null;let et=window.Worker&&true;let tt=window.navigator.clipboard.read&&true;let lt=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent);let it=lt&&/Safari/i.test(navigator.userAgent);let rt=[5e3,3e3,1e3];let nt=2e3;let at=80;let st=20;let ct=5;let ot=8;let ut=500;let ft="getElementsByClassName";let pt="getElementsByTagName";let dt="querySelector";let ht="innerText";let gt="placeholder";let mt="onclick";let _t="dclivechat";let yt="onopenlink";let wt="ondcconerror";let Ot="onimageclick";let kt="hidden";let vt="disabled";let bt="div";let It="span";let xt="g-recaptcha-token";let Ct="g-recaptcha-response";let At="6Lc-Fr0UAAAAAOdqLYqPy53MxlRMIXpNXFvBliwI";let Lt="subdirectory_arrow_right";let Et="arrow_downward";let Dt=(e,t=true)=>{e=e.r("?","\\?");if(t)return new RegExp(e,"g");return new RegExp(e)};let Tt=/:([^,:]+), ([^,:]+):/g;let qt=/dccon\.php\?no=([a-z0-9]+)/;let Jt=/twitch.tv\/(\?channel=)?([A-Za-z0-9_-]+)/;let Kt=/href="(https?:\/\/)?(www.)?twitch.tv\/([^"]+)"/g;let jt=/youtu(.be\/|be.com\/watch\?v=|be.com\/v\/|be.com\/shorts\/|be.com\/live\/|be.com\/embed\/)([A-Za-z0-9_-]+)/;let Gt=/href="(https?:\/\/)?(www.)?youtu(.be\/|be.com\/watch\?v=|be.com\/v\/|be.com\/shorts\/|be.com\/live\/)([^"]+)"/g;let zt="https://";let Yt="gall.dcinside.com/";let St=zt+Yt;let Ut=zt+"github.com/Joh1ah/dclivechat";let $t="/board/forms";let Bt=$t+"/article_submit";let Zt=$t+"/comment_submit";let Mt="/dccon/insert_icon";let Xt=$t+"/delete_submit";let Nt=$t+"/delete_password_submit";let Qt="/board/comment/comment_delete_submit";let Pt=Number.parseInt;let Rt=requestAnimationFrame;let Ft=setTimeout;let Ht=encodeURIComponent;let Vt=String.fromCharCode;let Wt=Date.now;let el=Wt();let tl="";let ll="";let il="";let rl="";let nl="";let al=false;let sl=true;let cl=false;let ol=false;let ul=false;let fl=true;let pl="";let dl="";let hl="";let gl=false;let ml=false;let _l=false;let yl=0;let wl=0;let Ol="";let kl=rt[0];let vl=0;let bl=0;let Il=true;let xl=true;let Cl=false;let Al=99999;let Ll=true;let El="";let Dl;let Tl;let ql;let Jl;let Kl;let jl;let Gl=null;let zl=null;let Yl=()=>yl==0;let Sl=()=>{if(Yl())return ml;return _l};let Ul;let $l=(...e)=>{let t="["+((Wt()-el)/1e3).toFixed(2)+"]";console.log(t,...e);if(DEBUG&&Ul){for(let l of e){if(typeof l=="undefined")t+=" undefined";else t+=" "+(l.toString?.()??"")}pi("p",Ul,{[ht]:t})}};let Bl=()=>{let e,t=new Promise((t=>e=t));return{r:e,p:t}};let Zl=e=>{let{r:t,p:l}=Bl();Ft(t,e);return l};let Ml=(e,t)=>{let l=t-e+1;let i=Math.random()*l;return Math.min(e+Math.floor(i),t)};let Xl=e=>{let t=e.matchAll(/&#x([0-9a-fA-F]+);/g);for(let l of t){let t=String.fromCodePoint("0x"+l[1]);e=e.replace(l[0],t)}return e};let Nl=e=>e.r(/(\r|\t)/g,"").r(/[ ]{2,}/g," ");function Ql(e){return[...new Uint8Array(e)].map((e=>e.toString(16).padStart(2,"0"))).join("")}let Pl=(e,t)=>{let l=e.indexOf(t);if(l!=-1)e.splice(l,1)};let Rl=new TextEncoder;let Fl=async e=>{let t=Rl.encode(e);let l=await crypto.subtle.digest("SHA-256",t).catch($l);let i=Ql(l);let r="#"+i.slice(0,6);return r};function Hl(e){let t=Pt(e.substring(1,7),16);let l=Math.floor(t*360/16777215);return"hsl("+l+",80%,60%)"}let Vl=ke.split("");let Wl=e=>{let t="";for(let l=0;l<e;l++){t+=Vl[Ml(0,Vl.length-1)]}return t};let ei=e=>e.split("||");let ti=e=>{let t,l;let i=Fe.cookie.split(";");for(let r=0;r<i.length;r++){t=i[r].substring(0,i[r].indexOf("="));l=i[r].substring(i[r].indexOf("=")+1);t=t.r(/^\s+|\s+$/g,"");if(t==e)return l}return"undefined"};let li=e=>{let t=e.split(".");return t[0]+"."+t[1]};let ii=(e,t,l)=>e.style.setProperty(t,l);let ri=(e,t)=>ii(Fe.documentElement,e,t);let ni=async()=>{let{r:e,p:t}=Bl();pi("script",He,{onload:()=>{if(typeof grecaptcha=="undefined")return $l("recaptcha is undefined");else $l("recaptcha v3 loaded");e()},type:"text/javascript",src:zt+"www.google.com/recaptcha/api.js?render="+At});return await t};let ai=async e=>{if(typeof grecaptcha=="undefined")await ni();let{r:t,p:l}=Bl();grecaptcha.ready((()=>grecaptcha.execute(At,{action:e}).then(t).catch((e=>{$l(e);t("")}))));return await l};let si=async(e,t,l)=>{if(e=="v3")return t[xt]=await ai(l);$l("recaptcha",e,"is not supported")};let ci=async(e,t,l,i)=>{let r=1;let n=0;let a;let s=async()=>{if(n>r)return a;n+=1;a=await e(...t,l);if(!a)return Kc(ce);let c=ei(a);if(c[0]=="false"){if(c.length==1)return Kc(a);if(c[1]=="captcha"){await si(c[2],l,i);return await s()}}return a};return await s()};let oi=1024;let ui="B.KB.MB.GB.TB.PB".split(".");let fi=e=>{let t=0;let l=1;let i=oi;while(t<ui.length){if(e<i){let i=e/l;let r=10;let n=2;while(true){if(i<r)return i.toFixed(n)+ui[t];r*=10}}l*=oi;i*=oi;t++}};let pi=(e,t,l,...i)=>{let r=Fe.createElement(e);if(l){if(typeof l=="object")for(let e in l)r[e]=l[e];else if(typeof l=="string")i.push(l)}for(let e of i){r.classList.add(...e.split("."))}if(t&&t.appendChild)t.appendChild(r);return r};let di=(e,t,...l)=>pi(It,e,{[ht]:t},"material-symbols-outlined.icon",...l);let hi=e=>{while(e.lastChild)e.removeChild(e.lastChild)};let gi=e=>{e.parentNode.removeChild(e);return e};let mi=(e,...t)=>{e.classList.add(...t);return e};let _i=(e,...t)=>{e.classList.remove(...t);return e};let yi=()=>scrollTo(0,0);let wi=false;let Oi=(e,t,l=false,i=false)=>{e.onkeypress=r=>{if(!i&&wi)return;if(r.key!="Enter")return;if(DEBUG)$l(r);if(lt&&l)return;if(!lt&&l&&r.shiftKey)return;r.preventDefault();t.click();e.oninput?.()}};let ki=()=>St+(sl?"mgallery/":cl?"mini/":"")+"board/";let vi=()=>St+"board/";let bi=()=>ki()+"lists?id="+tl;let Ii=()=>ki()+"write/?id="+tl;let xi=e=>ki()+"view/?id="+tl+"&no="+e;let Ci=e=>ki()+"delete/?id="+tl+"&no="+e;let Ai=(...e)=>{let t="";for(let l of e){for(let e in l){let i=l[e];if(i==undefined)i="undefined";t+="&"+e+"="+i}}return t.substring(1)};let Li=(e,t)=>{let l=pi("form",null,{entype:"multipart/formdata"});let i=new FormData(l);for(let t in e){i.append(t,e[t])}if(t&&t.name)i.append("files[]",t,t.name);return i};let Ei;let Di=e=>{let t,l,i,r,n,a,s,c="yL/M=zNa0bcPQdReSfTgUhViWjXkYIZmnpo+qArOBslCt2D3uE4Fv5G6wH178xJ9K",o="",u=0;for(e=e.r(/[^A-Za-z0-9+/=]/g,"");u<e.length;)r=c.indexOf(e.charAt(u++)),n=c.indexOf(e.charAt(u++)),a=c.indexOf(e.charAt(u++)),s=c.indexOf(e.charAt(u++)),t=r<<2|n>>4,l=(15&n)<<4|a>>2,i=(3&a)<<6|s,o+=Vt(t),64!=a&&(o+=Vt(l)),64!=s&&(o+=Vt(i));return o};let Ti=e=>{let t=Pt(e.substring(0,1));t=t>5?t-5:t+4;return e.r(/^./,t)};let qi=e=>{let t=e.match(/var _r = _d\('([A-Za-z0-9+=\/]+)'\)/);if(!t)return"";return Di(t[1])};let Ji=(e,t)=>{t=Ti(t??Ei);let l=t.split(",");let i="";for(n=0;n<l.length;n++)i+=Vt(2*(l[n]-n-1)/(13-n-1));return e.r(/(.{10})$/,i)};let Ki=()=>{let e;try{e=$l}catch{e=console.log}let t={};let l=(e,t,l)=>{let r=i(e,t,l);if(!r)return"";return r[0]};let i=(e,l,i)=>{let r;let n=l+i;if(t[n]!==undefined)r=t[n];else{let e=`<${l}[^>]*class=["'][^"]*${i}[^"]*["'][^>]*(/?)>`;r=new RegExp(e,"g");t[n]=r}let a=e.matchAll(r);if(!a)return null;let s=[];for(match of a){if(match[1]){s.push([match[0],""]);continue}let t=match.index;let i=0;let r=e.substring(t);let n=0;let a=r.matchAll(new RegExp(`<(/?)${l}[^>]*(/?)>`,"g"));for(let e of a){if(e[1]){n-=1;if(n==0){t=e.index;i=e[0].length;break}}else{if(!e[2])n+=1}}s.push([r.substring(0,t+i),r.substring(match[0].length,t)])}return s};let r=(e,t,i)=>{let r=l(e,t,i);if(!r)return"";else return r[1]};let n=(e,t,i)=>{let r=l(e,t,i);if(!r)return"";else return r[0]};let a=(e,t,l)=>{let r=[];let n=i(e,t,l);if(!n)return"";for(let e of n){r.push(e[0])}return r};let s=(e,t,l)=>{let i=r(e,t,l);if(!i)return"";return c(i)};let c=e=>{let t="";for(let l of e.matchAll(/(>|$)(.*?)(<|^)/g)){t+=l[2].trim()}return t};let o={};let u=(e,t,l,i)=>{let r=f(e,t);if(r==null)return;l[i]=r};let f=(e,t)=>{let l;if(o[t]!==undefined)l=o[t];else{l=new RegExp(`${t}="([^"]+)"`);o[t]=l}let i=e.match(l);if(!i)return null;return i[1]};let p=e=>/fix/.test(e);return{_IH:r,_OH:n,_OHA:a,_IT:s,_AT:u,_A:f,_TF:p,_DEBUG:e,_IO:c}};let{_IH:ji,_OH:Gi,_OHA:zi,_IT:Yi,_AT:Si,_A:Ui,_TF:$i,_DEBUG:Bi,_IO:Zi}=Ki($l);let Mi={};let Xi=(e,t)=>{let l;if(Mi[t])l=Mi[t];else{l=new RegExp(`<[^>]+(id|name)=["']${t}["'][^>]+value=["']([^"']+)["']`);Mi[t]=l}let i=e.match(l);if(!i)return"";return i[2]};let Ni=(e,t,l)=>{let i=new RegExp(`<form[^>]+id=["']${t}["'][^>]*>.*?</form>`);let r=e.match(i);if(!r)return false;Er(r[0],l);return true};let Qi=()=>{let e;try{e=_DEBUG}catch{e=$l}let t=async(t,l={})=>{if(!l.credentials)l.credentials="include";let i=await fetch(t,l).catch(e);if(!i||!i.ok)return"";return(await i.text().catch(e)).replace(/(\n|\r|\t)/g,"")};return{_TEXT:t}};let{_TEXT:Pi}=Qi();let Ri=async(e,t={},l="")=>{if(!t.credentials)t.credentials="include";if(!t.method)t.method="POST";if(!t.mode)t.mode="cors";if(!t.body)t.body=l;let i=await fetch(e,t).catch($l);if(!i||!i.ok)return"";return await i.text().catch($l)};let Fi={"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","X-Requested-With":"XMLHttpRequest"};let Hi=async(e,...t)=>{let l=Ai(...t);let i={headers:Fi,referrer:Ii()};return Ri(e,i,l).catch($l)};let Vi=async(e,t="")=>{let l=await Pi(Ci(e));if(!l)return Kc("not available");let i={[Ct]:"",_GALLTYPE_:ll};if(!Ni(l,"delete",i))return Kc("no form");let r=qi(l);if(!r)return Kc("no secret");i.service_code=Ji(i.service_code,r);let n=l.match(/formData \+= "&([0-9a-z]+)=([0-9a-z]+)&/);if(!n)return Kc("not valid");i[n[1]]=n[2];if(t)i.password=t;n=l.match(/dcc_key_v1 = document.getElementById\(["']([^"']+)["']\).getAttribute\(["']([^"']+)["']/);if(n){let e=l.match(new RegExp(`<input[^>]+id=["']${n[1]}["'][^>]*>`));if(e)i.dcc_key_v1=Ui(e[0],n[2])}return await ci(Hi,[t?Nt:Xt],i,"delete_submit")};let Wi=async(e,t,...l)=>{let i=Ai(...l);let r={headers:Fi,referrer:xi(e)};return Ri(t,r,i).catch($l)};let er=async(e,{num:t,id:l,value:i,vCurT:r},n="")=>{let a={ci_t:ti("ci_c"),id:tl,re_no:e,mode:"del",[Ct]:"",_GALLTYPE_:ll};if(n){a[l]=i,a.no=t;a.re_password=n;a.v_cur_t=r}return await ci(Wi,[e,Qt],a,"comment_delete_submit")};let tr=async e=>{let t=St+"dccon/package_detail";let l={headers:Fi};let i=Ai({ci_t:ti("ci_c"),package_idx:"",code:e});let r=await Ri(t,l,i).catch($l);if(!r)return null;try{return JSON.parse(r)}catch(e){$l(e);return null}};let lr=async e=>{let t={r_key:il,gall_id:tl,gall_no:rl,post_no:"",upload_ing:"N",_GALLTYPE_:ll};try{let l=Li(t,e);let i={credentials:"same-origin",referrer:St,referrerPolicy:"strict-origin-when-cross-origin"};let r=zt+"upimg.dcinside.com/upimg_file.php?id="+tl+"&r_key="+il;let n=await Ri(r,i,l).catch($l);if(!n)return null;return JSON.parse(n)["files"][0]??null}catch(e){$l(e);return null}};let ir=e=>{let t={id:tl,r_key:il,temp_no:e};let l=Ai(t);let i={headers:Fi,credentials:"same-origin",referrer:St+"/upload/image?xssDomain=dcinside.com",referrerPolicy:"strict-origin-when-cross-origin"};let r=vi()+"temp/upimg_pop_del";Ri(r,i,l).catch($l).then((e=>e!="true"&&nn(fe)))};let rr={};let nr=[];let ar=false;let sr=[];let cr=async()=>{if(!sr.length)return ar=false;let e=sr.shift();let t=e[0];let l=e[1];if(rr[t]!=undefined)return l(rr[t]),Ft(cr,1);let i=await tr(t).catch($l);if(!i)return l();let r=i["info"]["title"];let n=i["info"]["package_idx"];let a=[];for(let e of i["detail"]){a.push({title:e["title"],buy:false,package_idx:n,package_title:r,code:e["path"]})}let s={title:r,idx:n,buy:false,code:i["info"]["list_img_path"],detail:a};ur(s);l(rr[t]),Ft(cr,1)};let or=e=>{let{r:t,p:l}=Bl();sr.push([e,t]);if(!ar){ar=true;cr()}return l};let ur=e=>{let t=zr("dccon-pk")??{};if(t[e.idx]!=undefined){let l=t[e.idx];if(l.buy||!e.buy)return;l.detail=e.detail;l.buy=true}else{t[e.idx]=e}Gr("dccon-pk",t)};let fr=e=>{let t=zr("dccon-pk");if(!t)return null;for(let l in t){if(t[l].title==e)return t[l]}return null};let pr=(e,t)=>{let l=fr(e);if(!l||!l.detail)return null;for(let e of l.detail){if(e.title==t)return e}return null};let dr=(e,t)=>{let l=pr(e,t);if(!l)return null;return hr(l.code)};let hr=e=>zt+"dcimg5.dcinside.com/dccon.php?no="+e;let gr=async(e,t)=>{let l=await Hi(St+"dccon/lists",{ci_t:ti("ci_c"),target:e,page:t}).catch($l);if(!l)return 0;if(l=="not_login")return 0;if(l.substring(0,1)!="{")return 0;let r;try{r=JSON.parse(l)}catch(e){$l(e);return{}}let n=r["list"];let a=1;if(e=="recent"){let e=[];for(let t of n){let l=t["list_img"].match(qt);if(!l)continue;e.push({package_title:i,package_idx:t["package_idx"],idx:t["idx"],code:l[1],title:t["title"]})}let t={title:i,idx:-1,detail:e};gs(t)}else if(e=="icon"){a=r["max_page"];for(let e of n){let t=e["title"];let l=e["package_idx"];let i=e["main_img_url"].match(qt);if(!i)continue;let r=[];for(let i of e["detail"]){let e=i["list_img"].match(qt);if(!e)continue;r.push({package_title:t,package_idx:l,idx:i["detail_idx"],buy:true,code:e[1],title:i["title"]})}let n={title:t,idx:l,buy:true,code:i[1],detail:r};gs(n);ur(n)}}return a};let mr=async e=>{if(e=="recent"){await gr(e,0)}if(e=="icon"){let t=Math.min(await gr(e,0),20);for(let l=1;t>=l;l++){await gr(e,l)}}};let _r=async e=>{if(!e.buy)return nn(je);let t=e.package_idx;let l=e.idx;let i={id:tl,no:undefined,package_idx:t,detail_idx:l,ci_t:ti("ci_c"),input_type:"write",t_vch2:undefined,t_vch2_chk:undefined,c_gall_id:tl,c_gall_no:undefined,[Ct]:"",check_6:undefined,check_7:undefined,check_8:undefined,_GALLTYPE_:ll};await ci(Hi,[Mt],i,"insert_icon");ms("recent").catch($l)};let yr=async(e,t)=>{if(!e.buy)return nn(je);let l=e.package_idx;let i=e.idx;let r=Ra();if(!r.length)return nn(a);let n=Oc[t];let o={id:tl,no:t,package_idx:l,detail_idx:i,name:r,ci_t:ti("ci_c"),input_type:"comment",t_vch2:n.t_vch2,t_vch2_chk:n.t_vch2_chk,c_gall_id:tl,c_gall_no:t,[Ct]:"",check_6:n.check_6,check_7:n.check_7,check_8:n.check_8,_GALLTYPE_:ll};let u={};if(!ol){let e=Fa();if(e.length<2)return nn(s);u.password=e}if(Sl()){let e=Ha();if(!e.length)return nn(c);u.code=e}if(wl){u.c_no=wl}let f=await Hi(Mt,o,u);if(f=="ok"){Ta[t](-1,true);ql(0)}else if(DEBUG)$l("insert dccon comment fail",f);Ft(Na,500);ms("recent");return};let wr=(e,t,l)=>{let i=`<img class="dccon" src="${l}">`;e.innerHTML=e.innerHTML.r(t,i)};let Or=0;let kr=e=>{e=e.r(/onmousedown="[^"]+"/g,"").r(/class="written_dccon[^"]*"/g,'class="d"');let t=e.matchAll(/onerror="[^"]+"/g);for(let l of t){Or++;let t="error-"+Or;e=e.r(l[0],`id="${t}" onerror="window.postMessage(JSON.stringify({type:'${wt}',id:'${t}' }),'*')"`)}return e};let vr=e=>`onclick="window.postMessage(JSON.stringify({type:'${yt}',url:'${e}' }),'*')"`;let br=(e,t)=>{let l=e.match(t);if(l){if(DEBUG)$l("replacing",e);for(let t of l){e=e.r(Dt(t),vr(Ht(t.split('"')[1])))}if(DEBUG)$l("replaced",e)}return e};let Ir=e=>{e=br(e,Kt);e=br(e,Gt);return e};let xr=e=>"https://image.dcinside.com/viewimage.php?id=&no="+e;let Cr=(e,t)=>{let l=e.matchAll(/<(img|video)[^>]*src="[^">]+no=([0-9a-zA-Z]+)[^">]*"[^>]*>/g);for(let i of l){let l=i[0];let r=l;let n=i[2];if(DEBUG)$l("src",n);if(/class="d"/.test(l))continue;let a=l.match(/class="([^"]+)"/);if(a){r=r.r(a[0],`class="${a[1]} img"`)}else{r=r.r(">","")+' class="img">'}let s=l.match(/on[Cc]lick="[^"]+no=([0-9a-zA-Z]+)[^"]*"/);if(s){r=r.r(s[0],`onclick="window.postMessage(JSON.stringify({type:'${Ot}',src:'${xr(s[1])}',id:'${t}'}))" data-osrc="${xr(s[1])}"`)}else{r=r.r(">","")+` onclick="window.postMessage(JSON.stringify({type:'${Ot}',src:'${xr(n)}',id:'${t}'}))" data-osrc="${xr(n)}" draggable="false">`}e=e.r(l,r)}return e};let Ar=e=>{kl=rt[e];if(zl)zl.postMessage({type:"iv",iv:kl})};let Lr=(e,t)=>{for(let l in t){let i=Xi(e,l);if(i)t[l]=i}if(!ll&&Tc._GALLTYPE_)ll=Tc._GALLTYPE_;if(!rl&&Tc.gallery_no)rl=Tc.gallery_no;if(Tc.r_key)il=Tc.r_key};let Er=(e,t)=>{let l=e.matchAll(/<input[^>]+name=["']([^"']+)["'][^>]+value=["']([^"']*)["']/g);if(!l)return;for(let e of l){t[e[1]]=e[2]}};if(DEBUG)$l("initializing");let Dr=e=>{alert(e);return 0};let Tr=e=>{let t=e.match(/^https?:\/\/(gall|m).dcinside.com\/([^\n]+)$/);if(!t)return Dr(o);let l=null;if(t[1]=="gall"){l=t[2].match(/id=([A-Za-z0-9_]+)($|\&|#)/);sl=/^mgallery/.test(t[2]);cl=/^mini/.test(t[2])}else{al=true;l=t[2].match(/(board|mini)\/([A-Za-z0-9_]+)($|\?|\/|#)/);sl=Fe[ft]("micon").length>0;cl=Fe[ft]("mnicon").length>0}if(!l||!l.length)return Dr(u);tl=al?l[2]:l[1];return 1};if(!Tr(location.href))return;Fe.cookie="m_dcinside_web=done; path=/; domain=.dcinside.com";pi("meta",Ve,{name:"viewport",content:"width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0"});if(al){Dr(f);return location.href=bi()}if(Fe[_t])return Fe[_t]();Fe[_t]=()=>nn(me);Fe.title=l+" :: "+Fe.title;let qr={};let Jr={};let Kr=e=>{let t=JSON.stringify(e??qr);We?.setItem(_t,t)};let jr=(e,t)=>{qr[e]=t;Jr[e]?.(t)};let Gr=(e,t)=>{jr(e,t);Kr()};let zr=e=>qr[e]??null;let Yr=()=>{let e=We?.getItem(_t)??"";if(!e)return;qr=JSON.parse(e);for(let e in qr)jr(e,qr[e])};let Sr=()=>Kr({});let Ur=()=>{let e=We?.getItem("block_all");if(!e)return{on:1,word:"",id:"",nick:"",ip:""};return JSON.parse(e)};let $r=()=>{let e=We?.getItem("block_parts");if(!e)return{};return JSON.parse(e)};let Br=(e,t)=>$r()[e]??{on:1,word:"",id:"",nick:"",ip:"",name:t};let Zr=e=>We?.setItem("block_all",JSON.stringify(e));let Mr=e=>We?.setItem("block_parts",JSON.stringify(e));let Xr=(e,t)=>{if(!t.on)return false;return Nr(e,"title",t,"word",true)||Nr(e,"nickname",t,"nick")||Nr(e,"id",t,"id")||Nr(e,"ip",t,"ip")};let Nr=(e,t,l,i,r=false)=>{if(!l[i])return false;let n=ei(l[i]);for(let l of n){if(r){if(e[t].includes(l))return true}else{if(e[t]==l)return true}}return false};let Qr=e=>{e.on=1;Zr(e);for(let t of La){if(Xr(t,e))mi(t.chat,"block");else _i(t.chat,"block")}};let Pr=(e,t)=>{e.on=1;let l=$r();l[t]=e;Mr(l);for(let t of La){if(Xr(t,e))mi(t.chat,"block");else _i(t.chat,"block")}};let Rr=(e,t,l)=>{let i=ei(e[t]).filter((e=>e!=""));if(!i.includes(l))i.push(l);e[t]=i.join("||")};let Fr=(e,t,l)=>{let i=ei(e[t]).filter((e=>e!=""));for(let e=0;e<i.length;e++){let t=i[e];if(t==l){i.splice(e,1);break}}e[t]=i.join("||")};(async()=>{let e=await Pi(bi()).catch($l);let t=ji(e,bt,"login_box");if(DEBUG)$l("login",t);if(t){let e=ji(t,"button","btn_inout");if(DEBUG)$l("string",e);if(e&&e==p){ol=true;let e=Yi(t,"strong","nickname");if(e)pl=e;let l=Gi(t,"strong","writer_nikcon");if(l){let e=Ui(l,"onClick").match(/\/([a-zA-Z0-9_-]+)['"]/);if(e)dl=e[1];e=l.match(/src=["']([^"']+)["']/);if(e){hl=e[1];gl=$i(e[1])}}}}if(DEBUG)$l("login",ol);Dl?.();nl=Xi(e,"gallery_name");lc[ht]=Ne+" - "+nl})();hi(He);mi(He,kt);for(var Hr=1;Hr<99999;Hr++)window.clearInterval(Hr);for(var Hr=1;Hr<99999;Hr++)window.clearTimeout(Hr);let Vr=STYLESHEET.r(/_w/g,"width").r(/_h/g,"height").r(/_b/g,"background").r(/_m/g,"margin").r(/_p/g,"padding").r(/_d/g,"display").r(/_i/g,"!important").r(/_P/g,"position").r(/_T/g,"top").r(/_B/g,"bottom").r(/_L/g,"left").r(/_R/g,"right").r(/_r/g,"relative").r(/_a/g,"absolute").r(/_o/g,"overflow").r(/_f/g,"flex").r(/_F/g,"font").r(/_j/g,"justify-content").r(/_g/g,"grid-").r(/_c/g,"calc").r(/_x/g,"100%");if(it){Vr=Vr.r(/_s/g,"")}else{Vr=Vr.r(/_s/g," or (max-width:700px)")}pi("style",Ve,{[ht]:Vr});pi("link",Ve,{rel:"stylesheet",href:zt+"fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"});if(lt)ni();if(DEBUG)$l("ui");Ul=pi(bt,He,"log",kt);yi();let Wr=pi(bt,He,"o");pi(bt,Wr,{[ht]:ye},"drop");let en=pi(bt,He,"o");let tn=(e=false)=>{if(DEBUG)$l("render overlay",e&&en.childNodes.length==1,en.childNodes.length);if(e&&en.childNodes.length==1||!en.lastChild)_i(en,"wait");else mi(en,"wait");if(en.childNodes.length===0)wi=false;else wi=true};let ln=true;Fe.addEventListener("keyup",(e=>{if(e.key!="Enter")return;ln=true}));Fe.addEventListener("keypress",(e=>{if(!ln)return;if(e.key!=="Enter")return;if(!wi)return;if(en.lastChild)en.lastChild.enter?.();ln=false}));let rn=({title:e,desc:t,options:l,close:i,html:r,input:n,nowrap:a})=>{if(!l)l=[{text:d,[mt]:e=>e()}];let s=pi(bt,en,"modal");if(e)pi(bt,s,{[ht]:e},"tt");let c=pi(bt,s,"desc");s.content=c;if(t){if(r)c.innerHTML=t;else c[ht]=t}let o=()=>{mi(s,kt);s.remove();tn()};if(i)di(pi("a",s,{[mt]:o},"b.close.abs-tr"),"close");if(n!==undefined){if(a)s.input=pi("input",s,{type:"password",value:n},"nowrap");else s.input=pi("textarea",s,{value:n})}let u=pi(bt,s,"opts.fr");if(l.length===1)l[0].enter=true;for(let e of l){let t=()=>{i[ht]="";di(i,"progress_activity","progress")};let l=e.icon!=undefined;let i=pi("a",u,{[ht]:l?"":e.text??e,[mt]:e.onclick?()=>e.onclick(o,t):o},"sb.r");if(l){di(i,e.icon);pi(It,i,{[ht]:e.text})}if(e.enter)Ft((()=>{s.enter=()=>i.click();if(a)Oi(s.input,i,false,true)}),100)}tn();return s};let nn=e=>rn({desc:e});let an=(e,t)=>{let l=document[dt]("#"+t);if(!l)return;let i=l[ft]("img");let r=[];let n=0;for(let t=0;t<i.length;t++){let l=i[t];if(l.classList.contains(kt))continue;if(l.classList.contains("d"))continue;let a=l.getAttribute("data-osrc");if(a==e)n=t;r.push(a)}if(DEBUG)$l(r,e,n);let a;let s=false;let c=pi(bt,en,{[mt]:()=>{if(s)return;mi(a,"fo");Ft((()=>{c.remove()}),200);tn(true)}},"ipvs");let o=()=>r[n];a=pi("img",c,{src:o(),draggable:false,[mt]:()=>{s=true;Rt((()=>s=false))}},"ipv");let u=pi(bt,c,"fr");let f=pi("a",u,{[mt]:()=>{s=true;let e=pi("a",null,{href:a.src,download:""});e.click();e.remove();Rt((()=>s=false))}},"b");di(f,"download");pi(It,f,{innerText:Le});tn()};let sn=(e,{text:t,top:l=false},...i)=>{mi(e,"has-tooltip");let r=pi(bt,e,"tooltip",l?"tp":"bt",...i);pi(It,r,{innerText:t});return r};let cn;let on=(e,t=[])=>{e.oncontextmenu=e=>{e.preventDefault();let l=e.clientX;let i=e.clientY;if(cn)cn.remove();cn=pi(bt,He,"p.ctx");cn.style.left=l+"px";cn.style.top=i+"px";for(option of t){if(option.hr){pi("hr",cn);continue}let e=pi("a",cn,"fr.b");if(option.icon)di(e,option.icon);if(option.text)pi(It,e,{[ht]:option.text});if(option[mt])e[mt]=option[mt]}return cn}};Fe.addEventListener("click",(()=>{if(cn)cn.remove();cn=null}));let un=pi("main",He);if(DEBUG)$l("video");let fn=pi(bt,un,"video");let pn=pi(bt,fn,"menu");let dn=pi(bt,fn,"main");let hn=true;let gn;let mn=e=>{if(typeof e==="boolean")hn=e;else hn=!hn;if(hn){_i(pn,"e");gn[ht]="expand_less"}else{if(yn)wn.click();mi(pn,"e");gn[ht]="expand_more"}};pi(bt,pn,{[mt]:mn},"stretch");let _n=pi("a",pn,{[mt]:()=>{mi(dn,"go");_i(bn,kt)}},"b");di(_n,"add");pi(It,_n,{[ht]:be});let yn=false;let wn=pi("a",pn,"b",vt);let On=di(wn,"pan_tool");let kn=pi(It,wn,{[ht]:Ie});wn.onclick=()=>{yn=!yn;if(yn){mi(wn,".t");On[ht]="check";kn[ht]=xe;mi(dn,"rlc")}else{_i(wn,".t");On[ht]="pan_tool";kn[ht]=Ie;_i(dn,"rlc")}};let vn=pi("a",pn,"b",vt);di(vn,"close");pi(It,vn,{[ht]:Ae});gn=di(pi("a",pn,{[mt]:mn},"b.fix-tl"),"expand_less");let bn=pi(bt,dn,"p.fr.blank");let In=pi("a",bn,{[mt]:()=>{_i(dn,"go");mi(bn,kt)}},"b.abs-tr",kt);di(In,"close");di(bn,"link","ph").onclick=()=>Cn.focus();let xn=()=>{if(Cn.value!=="")_i(bn,"blank");else mi(bn,"blank")};let Cn=pi("textarea",bn,{[gt]:w,oninput:xn,onchange:xn},"src");let An=pi("a",bn,{[mt]:()=>qn(Cn.value)},"sb");pi(It,An,{[ht]:d});Oi(Cn,An);let Ln=[];let En=[];let Dn=()=>{if(!fl){let e=Math.min(En.length,1);mi(pn,kt);Ln.length=e;for(let e=1;e<En.length;e++){En[e]?.remove()}En.length=e;if(yn)wn.click()}else _i(pn,kt);mi(wn,vt);_i(wn,".t");_i(dn,"go");if(!En.length){if(yn)wn.click();mi(vn,vt);mi(In,kt);_i(bn,kt);return}_i(vn,vt);_i(wn,vt);_i(In,kt);mi(bn,kt);if(En.length==1)ri("--r2t","0px");else ri("--r2t","50%");let e=(En.length-1)/2;let t=0;let l=0;for(let i=0;i<En.length;i++){let r=En[i];_i(r,..."r1.r2.c1.c2.c3.c4".split("."));if(i<e){mi(r,"r1");t++;mi(r,"c"+t)}else{mi(r,"r2");l++;mi(r,"c"+l)}}ri("--rw1",t);ri("--rw2",l)};let Tn=e=>{let t=e.match(Jt);if(t)return zn(t[2]);let l=e.match(jt);if(l){let t=0;let i=e.match(/t=([0-9]+)/);if(i)t=i[1];return Yn(l[2],t)}Xn(e)};let qn=e=>{if(DEBUG)$l("step 1",e);if(!e)return nn(m);if(e=="show log")return _i(Ul,kt);if(e=="clear options")return Sr();if(e=="show options")return $l(qr);if(e=="refresh update")return Dc();let t=Ln.length;if(!/[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\+.~#?&//=]*)/.test(e))return nn(m);if(!/^[A-Za-z]+:\/\//.test(e))e="https://"+e;if(DEBUG)$l("step 2",e);Tn(e);if(t===0&&Ln.length===1)mn(false);Dn()};let Jn=e=>{let t=decodeURIComponent(e).r(/&amp;/g,"&");rn({title:_,desc:t,options:[{text:y,icon:"open_in_new",[mt]:e=>{let l=pi("a",null,{href:t,target:"_blank"});l.click();l.remove();e()}},{text:d,[mt]:e=>{qn(t);e()},enter:true}],close:true})};let Kn=e=>{let t=Fe[dt]("#"+e).parentNode;let l=t.classList.contains("d");let i=t.getAttribute("data-src");let r=pi("img",null,{src:i,draggable:false},l?"d":"_");if(!l)r[mt]=()=>onImageClick(i);t.insertAdjacentElement("beforebegin",r);mi(t,kt)};onmessage=e=>{let t;if(typeof e.data=="object")t=e.data;else t=JSON.parse(e.data);if(t){if(t.type==wt)Kn(t.id);else if(t.type==yt)Jn(t.url);else if(t.type==Ot)an(t.src,t.id)}};let jn=(e,t)=>{Pl(Ln,e);Pl(En,t);Kr();t.remove();Dn()};let Gn=()=>{Ln.length=0;for(let e of En)e.remove();En.length=0;Kr();Dn()};let zn=e=>{let t=zt+"player.twitch.tv/?channel="+e+"&parent=gall.dcinside.com";Xn(t)};let Yn=(e,t=0)=>{let l=zt+"www.youtube.com/embed/"+e+"?start="+t;Xn(l,{allow:"autoplay; picture-in-picture"})};let Sn=null;let Un=()=>En.indexOf(Sn);let $n="";let Bn=false;let Zn=0,Mn=0;let Xn=(e,t={})=>{Cn.value="";if(Ln.includes(e)){let t=En[Ln.indexOf(e)];mi(t,"hl-alt");Ft((()=>_i(t,"hl-alt")),ut);return}if(!fl){Ln.length=0;En[0]?.remove();En.length=0}Ln.push(e);Gr("videos-"+tl,Ln);let l;let i=pi(bt,dn);En.push(i);l=()=>En.indexOf(i);let r=(t,l)=>{if(Sn)return;mi(i,"drg");Zn=()=>i.getClientRects()[0].width/2;Mn=()=>i.getClientRects()[0].height/2+50;ri("--mx",t-Zn()+"px");ri("--my",l-Mn()+"px");Sn=i;$n=e};let n=(e,t)=>{Rt((()=>{ri("--mx",e-Zn()+"px");ri("--my",t-Mn()+"px")}))};let a=()=>{if(!Sn||Bn)return;let e=l(),t=Un();if(e==t)return;En.splice(t,1);En.splice(e,0,Sn);Ln.splice(t,1);Ln.splice(e,0,$n);Bn=true;Kr();Ft((()=>Bn=false),200);Dn()};let s=pi(bt,i,{onmousedown:e=>{r(e.clientX,e.clientY);onmouseup=()=>{_i(i,"drg");Sn=null;onmouseup=null;onmousemove=null};onmousemove=e=>n(e.clientX,e.clientY)},onmousemove:a,ontouchstart:e=>{r(e.touches[0].clientX,e.touches[0].clientY);let t=()=>{_i(i,"drg");Sn=null;ontouchend=null;ontouchcancel=null;ontouchmove=null};ontouchend=t;ontouchcancel=t;ontouchmove=e=>{n(e.touches[0].clientX,e.touches[0].clientY);let t=Fe.elementFromPoint(e.touches[0].pageX,e.touches[0].pageY);t?.onmousemove?.()}}},"grab.fr");di(s,"drag_indicator");t.sandbox="allow-same-origin allow-scripts";let c=pi("iframe",i,t);Dn();c.src=e;let o=pi("a",i,{[mt]:()=>jn(e,i)},"close.b.abs-tr");di(o,"close");sn(o,{text:Ee})};Jr["videos-"+tl]=e=>{for(let t of e)if(!Ln.includes(t))Tn(t)};vn[mt]=Gn;if(DEBUG)$l("chat");let Nn=[];let Qn=()=>{if(Nn.length>ct)Nn.shift().click()};let Pn=pi(bt,un,"chat");let Rn=pi(bt,Pn,"hd");pi(It,Rn,{[ht]:b},"h");let Fn=false;let Hn=pi("a",Rn,{[mt]:()=>{if(Fn)return;Fn=true;Dc("button");mi(Vn,"rotate-ccw-half");Ft((()=>{Fn=false;_i(Vn,"rotate-ccw-half")}),800)}},"help.b.abs-tl");let Vn=di(Hn,"sync");let Wn=pi("a",Rn,{href:Ut,target:"_blank"},"help.b.abs-tr");di(Wn,"help");let ea=pi(bt,Pn,"vp");let ta=pi(bt,ea,"page");let la=pi(bt,Pn,"cb-c");let ia=pi("a",la,{[mt]:()=>{while(Nn.length)Nn.shift().click()}},"r.b.ca.right.sd");di(ia,"close");let ra=()=>{if(Nn.length)_i(ia,"sd");else mi(ia,"sd")};let na={};let aa={};let sa=[];let ca=pi("a",la,{[mt]:()=>{if(!sa.length)return;let e=sa.shift();for(let t of e[1]){na[e[0]](t)}let t=pi("a",null,{href:"#"+e[0]});t.click();t.remove();ua()}},"r.b.nt.right.sd");di(ca,"notifications");let oa=pi(It,ca,"cnt.abs-tl.fade");let ua=()=>{if(!sa.length){mi(ca,"sd");mi(oa,"fade")}else{_i(ca,"sd");_i(oa,"fade");oa[ht]=sa.length<10?sa.length:"9+"}};let fa=(e,t)=>"n"+e+"_"+t;let pa=(e,t,l=null)=>{if(!aa[e]){if(DEBUG)$l("post",e,"is not my post");return}let i=fa(e,t);if(!na[i]){if(DEBUG)$l("comment",t,"is not a comment in interest");return}let r=sa.find((e=>e[0]==i));if(!r){r=[i,[]];sa.push(r)}r[1].push(l);ua()};let da=(e,t,l)=>{aa[e]=true;na[fa(e,t)]=l};let ha=pi("a",la,{[mt]:()=>Kl(),onscroll:e=>e.preventDefault()},"r.pd.fr",lt?"m":"_",kt);let ga=pi(bt,ha,"not-hover");di(ga,lt?Et:"pause");pi(It,ga,{[ht]:I},"text",lt?kt:"_");let ma=pi(bt,ha,"hover");di(ma,Et);let _a=pi(It,ma,{[ht]:x},"text",lt?kt:"_");let ya=()=>Math.abs(ta.scrollHeight-ea.clientHeight-ea.scrollTop);let wa=0;ea.onscroll=()=>{let e=ya();let t=wa-e;wa=e;if(e<2)xa();if(t==0)return;if(t<0&&Il&&e>2){if(Al==0)return Kl();Al=Math.max(Al-1,0);return}if(!Il&&e<2)Kl()};let Oa={};let ka=(e,t,l)=>{if(l)return e+l;return e+t};let va=async(e,t,l,...i)=>{let r=ka(e,t,l);let n;if(Oa[r]!=undefined){n=Oa[r]}else{n=await Fl(r).catch($l);Oa[r]=n}if(true)n=Hl(n);for(let e of i){if(e)e.style.color=n}};let ba=(e,t,l,i,r,n)=>{if(r)pi("img",e,{src:r},"nikcon");let a=pi(It,e,{[ht]:t},"name");let s=null;if(l){if(!n)s=pi(It,e,{[ht]:l},"ip.id")}else if(i){s=pi(It,e,{[ht]:i},"ip")}pi(It,e,{[ht]:": "});va(t,l,i,a,s)};let Ia=e=>{bl=e;let t=C;if(e!=0){if(e>20)t=A;else t=e+L}_a.innerText=E+t};let xa=()=>{let e=ta.childNodes;while(e.length>at){let t=e[0];Ca(t)}};let Ca=e=>{for(let t=0;t<La.length;t++){let l=La[t];if(l.chat==e){La.splice(t,1);break}}let t=e[ft]("removed");if(t&&t.length)t[0].value=true;e.remove();Jl(true)};let Aa=()=>ea.scrollTop=ta.scrollHeight;Jl=(e=false)=>{Al=e?1:0;if(!Il)return;return Aa()};Kl=()=>{Il=!Il;if(Il){mi(ha,kt);Ia(0);Jl(true)}else{_i(ha,kt)}};let La=[];let Ea={};let Da={};let Ta={};let qa={};let Ja=e=>{if(!Il)Ia(bl+1);_i(e,kt);Jl(true)};let Ka=async e=>{let t=e.num;let l=pi(bt,ta,"chl",kt);let i=pi("input",l,{type:kt,value:false},"removed");let r=pi(bt,l,"tt.r");let n=pi(It,r);let a=e.nickname;let c=e.ip;let o=Xl(decodeURIComponent(e.title));let u=e.id;let f=e.img;let p=e.fix;let g=e.my??false;let m=Ur();let _=Br(tl,nl);let w=Xr(e,m)||Xr(e,_);if(w)mi(l,"block");La.push({chat:l,title:o,id:u,ip:c,nickname:a});if(a)ba(n,a,u,c,f,p);else mi(l,"notify");let O=pi(It,n,{[ht]:o},"tt");let k=false;let v=[];for(let t of o.matchAll(Tt)){let l=t[0];let i=t[1];let r=t[2];let n=dr(i,r);if(n){wr(O,l,n);Jl(true);continue}v.push([l,i,r]);if(k)continue;k=true;(async()=>{let{write:t}=await kc(e.num).catch($l);if(!t)return;let l=zi(t,"img","written_dccon");for(let e of l){let t=Ui(e,"src").match(qt);if(t)await or(t[1]).catch($l);else{let t=Ui(e,"data-src").match(qt);if(t)await or(t[1]).catch($l)}}for(let e of v){let t=dr(e[1],e[2]);if(t)wr(O,Dt(e[0]),t)}Jl(true)})()}let b;if(t){r.id=fa(t,0);let e=pi(bt,l,"w.zero");b=pi(bt,e,"vp.post");let a=pi(bt,b,{id:"pc-"+t},"page.pc");let o=true;if(g){da(t,0,(()=>{if(o)r.click()}))}let u=()=>{mi(l,"open");_i(e,"zero");ql(0);if(Il)Kl();D();Pl(Nn,r);Nn.push(r);Qn();ra();kc(t).catch($l).then((({text:e})=>{const t=e.matchAll(/<iframe[^>]*id="movieIcon([^"]*)"[^>]*>[^<]*<\/iframe>/g);if(t&&true)(async()=>{for(const l of t){const t=St+"board/movie/movie_view?no="+l[1];const i=await Pi(t);if(!i)continue;const r=i.match(/<video[^>]*poster="([^"]*)"[^>]*>[^<]*<source[^>]*src="([^"]*)"[^>]*type="([^"]*)"[^>]*>/);if(!r)continue;const n=pi(bt,null,"v-container");const a=pi(bt,n,"video_wrap");pi("source",pi("video",pi(bt,a,"video_inbox"),{controls:true,playsinline:true,controlslist:"nodownload",poster:r[1],"data-no":l[1]},"dc_mv"),{src:r[2],type:r[3]});e=e.r(l[0],n.outerHTML);n.remove()}a.innerHTML=e})();else a.innerHTML=e}))};r.onclick=()=>{o=!o;if(yl==t)ql(0);if(o){Pl(Nn,r);mi(e,"zero");_i(l,"open");while(a.lastChild){a.lastChild.remove()}Jl();ra();return}u()};let f=pi(bt,e,"cm",kt);let p=pi(bt,f,"vp");let m=pi(bt,p,"page");let _;let y;let w=pi("a",f,{[mt]:()=>_()},"ex.sm.r");di(w,"more_vert");let O=pi("a",e,{[mt]:()=>{if(yl==t)ql(0);else ql(t,l,k)}},"ic.r");let k=pi(It,O,{[ht]:j});let v=pi("a",e,{[mt]:()=>r.click()},"ex.alt");di(v,"expand_less");let I={};let x=[];let C=[];let A=pi(bt,m,"w");let L=0;let E=0;let D=async()=>{if(i.value!="false")return;let e=await bc(t).catch($l);if(!e)return;if(e.count)_i(f,kt);else mi(f,kt);let n=L;for(let i in e.comments){if(x.includes(i))continue;x.push(i);if(E>st){A=pi(bt,m,"w",kt);n++;E=0}let a=e.comments[i];let u=pi(bt,null,"w");let f=pi("a",null,"cml.r");f.id=fa(t,i);let p=a.text;let _=a.target;let y=a.name;if(_){let t=e.comments[_];if(t)y=t.name;mi(f,"re");di(pi(bt,f,"re-icon"),Lt)}let w=p.length>ot&&p.substring(p.length-ot)==Ol;if(w){Ol="";da(t,_?_:i,(e=>{if(o)r.click();mi(e,"hl");Ft((()=>_i(e,"hl")),ut)}))}else{pa(t,_,f)}f.onclick=()=>ql(t,l,k,f,_?_:a.num,a.name,y);if(I[_]==undefined){I[a.num]=u;u.appendChild(f);A.appendChild(u);if(C.length==n){C.push(A)}}else{let e=I[_];e.insertAdjacentElement("beforeend",f)}let O=pi(bt,f,"writer-dlc");ba(O,a.name,a.id,a.ip,a.img,a.fix);pi(bt,f,{innerHTML:p},"text");E++;let v=[{text:Ge,icon:"delete",[mt]:async()=>{let e="";let{delId:l,delValue:r,vCurT:n}=await kc(t).catch($l);if(c||a.ip){let{r:t,p:l}=Bl();let i=rn({title:T,input:e,nowrap:true,options:[{text:d,[mt]:l=>{e=i.input.value;if(e.length<2)return nn(s);l();t(true)}},{text:h,[mt]:e=>{e();t(false)}}]});if(!await l)return}let o=await er(i,{num:t,id:l,value:r,vCurT:n},e);if(!o)nn(ae);let u=o.split("||");if(u[0]=="true"){f.remove();return D()}if(u.length==1)return nn(o);nn(ae)}}];if(g||c||w||a.ip||a.id==dl)on(f,v)}y();Jl(true)};_=()=>{L++;let e=C[L];if(e)_i(e,kt);y()};y=()=>{if(L+1==C.length)mi(w,kt);else _i(w,kt)};let q=pi(It,n,"cm.fr",kt);di(q,Lt,"f");let J=pi(bt,q,"nc.gray-div");let K=pi(It,q,{[ht]:"+"});let G=[];let z=[];let Y=[];for(let e=0;e<3;e++){let t=pi(bt,J,"num-"+e);z.push(pi(It,t,"old"));Y.push(pi(It,t,"new"));G.push(t)}let S=(e,t,l)=>{let i=3-t+e;let r=Y[i][ht];z[i][ht]=r;Y[i][ht]=l;if(l!=r){mi(G[i],"changed");Ft((()=>_i(G[i],"changed")),500)}};let U=e=>{let t=e+"";return t.split("").reverse()};Ta[t]=(e=-1,l=false)=>{if(i.value!="false"){delete Ta[t];return}let r=()=>{if(e==-1)e=Da[t]+1;Da[t]=e;let l=U(e);if(l.length>3){l="999".split("");_i(K,kt)}else{mi(K,kt)}for(let e=0;e<l.length;e++){S(e,l.length,l[e])}if(e){_i(q,kt);Jl(true)}else{mi(q,kt)}if(!o||aa[t])D().catch($l)};if(l)r();else Ft(r,Ml(1,kl))}}if(e.date){let t=Wt()-e.date;if(t>kl||!Cl)Ja(l);Ft((()=>Ja(l)),kl-t)}else{Ja(l)}if(!Il)xa();let I=[];if(g||c||ol&&u==dl)I.push({text:Ge,icon:"delete",[mt]:()=>{rn({title:ze,desc:Ye,options:[{text:d,enter:true,[mt]:async(e,i)=>{i();let r="";if(c){let{r:t,p:l}=Bl();let i=rn({title:T,input:r,nowrap:true,options:[{text:d,enter:true,[mt]:(e,l)=>{r=i.input.value;if(r.length<2)return nn(s);t(true);e()}},{text:h,[mt]:e=>{t(false);e()}}]});if(!await l)return e()}let n=await Vi(t,r);e();let a=n.split("||");if(a[0]=="false")return nn(a[1]);Ca(l)}},{text:h}]})}},{hr:true});if(t){I.push({text:y,icon:"open_in_new",[mt]:()=>{let e=pi("a",null,{href:xi(t),target:"_blank"});e.click();e.remove()}},{text:Se,[mt]:()=>{window.navigator.clipboard.writeText(xi(t))}});if(!g&&(c||u!=dl)){I.push({hr:true});if(!c){I.push({text:Ue,[mt]:()=>{rn({title:Ze,desc:"ID: "+u,options:[{text:Ne,[mt]:e=>{let t=Br(tl,nl);t.on=1;Rr(t,"id",u);Pr(t,tl);e()}},{text:Xe,[mt]:e=>{let t=Ur();t.on=1;Rr(t,"id",u);Qr(t);e()}},{text:h}]})}})}else{I.push({text:$e,[mt]:()=>{rn({title:Ze,desc:"IP: "+c,options:[{text:Ne,[mt]:e=>{let t=Br(tl,nl);t.on=1;Rr(t,"ip",c);Pr(t,tl);e()}},{text:Xe,[mt]:e=>{let t=Ur();t.on=1;Rr(t,"ip",c);Qr(t);e()}},{text:h}]})}})}I.push({text:Be,[mt]:()=>{rn({title:Ze,desc:a,options:[{text:Ne,[mt]:e=>{let t=Br(tl,nl);t.on=1;Rr(t,"nick",a);Pr(t,tl);e()}},{text:Xe,[mt]:e=>{let t=Ur();t.on=1;Rr(t,"nick",a);Qr(t);e()}},{text:h}]})}})}}if(I.length){on(r,I);on(b,I)}};if(DEBUG)$l("input login");let ja=pi(bt,Pn,"li-c");let Ga=pi("a",ja,{[mt]:()=>jl()},kt,"ex.tab");let za=di(Ga,"expand_more");jl=()=>{Ll=!Ll;if(Ll){za.innerText="expand_more";_i(Ya,kt)}else{za.innerText="expand_less";mi(Ya,kt)}Jl(true)};let Ya=pi(bt,ja,"fr",kt);let Sa=pi("input",Ya,{type:"text",[gt]:D,maxlength:15,name:"name"});let Ua=pi("input",Ya,{type:"password",[gt]:T,maxlength:20,name:"password"});let $a=pi(bt,ja,"fr",kt);let Ba=pi("a",$a);let Za=pi("img",Ba,{[mt]:()=>Na()},"captcha");let Ma=pi("input",$a,{type:"text",[gt]:q,maxlength:20});let Xa=()=>{if(!cl)return;if(El){Sa.value=El;mi(Sa,vt)}else{_i(Sa,vt)}};let Na=async()=>{Ma.value="";if(Sl()){let e=Yl();let t={ci_t:ti("ci_c"),gall_id:tl,kcaptcha_type:e?"write":"comment",_GALLTYPE_:ll};let l=St+"kcaptcha/session";if(e)await Hi(l,t).catch($l);else await Wi(yl,l,t).catch($l);Za.src=St+"kcaptcha/image/?gall_id="+tl+"&kcaptcha_type="+(e?"write":"comment")+"&time="+Wt()+"&_GALLTYPE_="+ll;_i($a,kt)}else{mi($a,kt)}};let Qa;Dl=()=>{if(!ol&&!zr(Q)){_i(Ya,kt);_i(Ga,kt);Jl(true)}else{mi(ja,kt)}Qa?.()};let Pa=()=>Sa.value??"";let Ra=()=>El?El:ol?pl:Pa();let Fa=()=>Ua.value??"";let Ha=()=>Ma.value??"";let Va=pi(bt,Pn,"ri-c",kt);let Wa=pi(bt,Va,"tab");let es=pi(It,Wa,"name");let ts=di(Wa,"more_horiz",kt);let ls=pi(It,Wa,"name",kt);let is=pi(It,Wa,{[ht]:J});if(DEBUG)$l("input chat");let rs=pi(bt,Pn,"ci-c");let ns=pi(bt,rs,"f");let as=pi(bt,ns,"i");let ss="--ih";let cs=pi("textarea",as,{[gt]:O,oninput:()=>{ri(ss,cs.clientHeight+12+"px");cs.style.height=0;cs.style.height=cs.scrollHeight-19+"px";Jl(true);Rt((()=>ri(ss,0)))},onblur:yi},vt);let os=null;let us=null;let fs=null;ql=(e,t,l,i=null,r=0,n="",a="")=>{if(i!=null&&i==fs){e=0;r=0}if(os&&us){if(fs)_i(fs,"rp");_i(os,"wr");_i(os,"rp");us[ht]=j;_i(us,"f-white");mi(Va,kt);_i(ea,"r");mi(ts,kt);mi(ls,kt)}yl=e;wl=r;if(Yl()){if(ul){mi(cs,vt);mi(Ss,vt);mi(Os,vt);mi(wc,vt);if(!ol)mi(ja,kt)}_i(rs,"wr");cs[gt]=O;os=null;us=null;fs=null}else{if(ul){_i(cs,vt);_i(Ss,vt);_i(Os,vt);_i(wc,vt);if(!ol)_i(ja,kt)}mi(rs,"wr");mi(t,"wr");if(i&&r){mi(i,"rp");mi(t,"rp");cs[gt]=k;es[ht]=n;if(n!=a){ls[ht]=a;_i(ts,kt);_i(ls,kt)}is[ht]=J;l[ht]=h;_i(l,"f-white")}else{let t=Ea[e];es[ht]=t.name;cs[gt]=v;is[ht]=K;l[ht]=G;mi(l,"f-white")}_i(Va,kt);mi(ea,"r");os=t;us=l;fs=i??null;cs.focus()}Tl();Na();Es();Xa();Jl(true)};if(DEBUG)$l("dccon");let ps=pi(bt,rs,"p.p-dccon",kt);let ds=pi(bt,pi(bt,pi(bt,ps,"dcl"),"vp"),"page");let hs=pi(bt,pi(bt,pi(bt,ps,"dcc"),"vp"),"page");let gs=e=>{let t=e.idx;let l=e.title;let r="dc"+t;let n=pi(bt,null,"package");let a=Fe[dt]("#"+r);if(a){hs.replaceChild(n,a)}else{hs.appendChild(n);let t=pi("a",ds,{href:"#"+r,[mt]:()=>{cs.focus();yi()}});if(l==i)di(t,"history");else pi("img",t,{src:hr(e.code)})}n.setAttribute("id",r);pi(It,pi(bt,n,"hd.r"),{[ht]:l});let s=pi(bt,n,"flex.fr");for(let t of e.detail){let e=t.code;let r=t.title;let n=t.package_title;pi("img",s,{loading:"lazy",src:hr(e),[mt]:async()=>{let t=await or(e);if(DEBUG)$l(n,r,t);if(Yl()){_r(t);let n=l;if(l==i){if(rr[e]!=undefined)n=rr[e].package_title;else{await or(e);n=rr[e].package_title}}cs.focus();cs.value+=":"+n+", "+r+": "}else{yr(t,yl)}}},"d")}};let ms=async e=>{await mr(e).catch($l)};Jr["dccon-pk"]=e=>{for(let t in e){if(nr.includes(t))continue;let l=e[t];for(let e of l.detail)rr[e.code]=e;nr.push(l.title)}};let _s=true;let ys=false;let ws=()=>{_s=!_s;if(_s){_i(ks,"f");mi(ps,kt)}else{cs.focus();mi(ks,"f");_i(ps,kt);if(!ys){ys=true;ms("recent");ms("icon")}}Rt((()=>cs.focus()))};let Os=pi("a",ns,{onmousedown:()=>ws()},"d.b",vt);let ks=di(Os,"mood");if(DEBUG)$l("upload");let vs=pi(bt,ns,"p.up.abs.vp.pv-vp",kt);let bs=pi(bt,vs,"fr.page");let Is=pi("a",bs,{[mt]:()=>Ys.click()},"pv.r.b.o-l");di(Is,"add_photo_alternate");pi(It,Is,{[ht]:Te});let xs=null;let Cs=false;let As=[];let Ls=false;let Es=()=>{if(xs!==null){if(!nc)mi(xs.preview,kt);else{_i(xs.preview,kt);if(Cs)_i(xs.preview,"up");else mi(xs.preview,"up")}}$s[ht]=As.length;if(As.length==0){mi($s,kt)}else{_i($s,kt)}if(!Ls||!Yl()){mi(vs,kt);_i(Us,"f")}else{_i(vs,kt);mi(Us,"f")}};let Ds=(e=null)=>{if(e===null)Ls=!Ls;else Ls=e;Es()};let Ts=(e,t)=>{let l=pi(bt,e,"pv.r");let i=pi(bt,l,"image");let r=pi("img",i);let n=pi(bt,l,"desc");let a=pi(It,n,{[ht]:t.name},"file-name");pi(It,n,{[ht]:"("+fi(t.size)+")"},"size");return{p:l,c:i,i:r,n:a}};let qs=e=>{let{p:t,c:l,i:i}=Ts(bs,e);let r=di(l,"pending","pending.abs");let n=di(l,"warning","error.abs",kt);let a=new FileReader;a.onload=()=>i.src=a.result;a.readAsDataURL(e);let{r:s,p:c}=Bl();let o={preview:t,img:i,original:e.name,name:"",size:e.size,type:e.type,upload:false,file:e,error:false,num:0,url:"",close:async()=>{t.remove();for(let e=0;e<As.length;e++){let t=As[e];if(o===t){As.splice(e,1);break}}Es();if(o.upload)ir(o.num);else{await c.catch($l);if(!o.error)ir(o.num)}},p:c};As.push(o);let u=pi("a",t,"close.abs-tr.b");di(u,"delete","f");u.onclick=()=>o.close();let f=(e,...l)=>{nn(e);$l(e,...l);o.error=true;mi(t,"error");_i(n,kt)};lr(e).catch($l).then((e=>{mi(r,kt);if(!e)return f(ue);if(e.error)return f(e.error,e);o.upload=true;mi(t,"up");o.name=e["name"];o.url=e["url"];o.num=e["file_temp_no"];s()}));return o};let Js=e=>({name:e.name,size:e.size,type:e.type,url:e.url,src:e.img.src});let Ks=e=>{let{p:t,i:l}=Ts(bs,e);mi(t,"up");l.src=e.src;let i={preview:t,img:l,original:e.name,name:e.name,size:e.size,type:e.type,upload:true,file:null,error:false,num:null,url:e.url,close:()=>{t.remove();for(let t=0;t<As.length;t++){let l=As[t];if(e===l){As.splice(t,1);break}}Es()}};let r=pi("a",t,"close.abs-tr.b");di(r,"delete","f");r.onclick=()=>i.close();return i};let js=(e=null)=>{if(xs!==null)xs.close();if(e===null){xs?.preview.remove();Gr("zzal","");_i(rc,kt);xs=null;return}xs=e;mi(xs.preview,"o-f","z");for(let t=0;t<As.length;t++){if(As[t]===e){As.splice(t,1)}}e.close=()=>{Cs=true};let{p:t,i:l,n:i}=Ts(Rs,e);mi(t,"up","o-f");mi(rc,kt);let r=pi("a",t,"close.abs-tr.b");di(r,"delete","f");r.onclick=()=>{rn({desc:De,options:[{text:g,[mt]:e=>{js(null);t.remove();e()},enter:true},{text:h}]})};let n=()=>{l.src=e.img.src;i.innerText=e.name;let t=Js(e);Gr("zzal",JSON.stringify(t))};if(e.upload)n();else(async()=>{await e.p;n()})();Es()};let Gs=()=>{let e=zr("zzal");if(e===null)return;if(e==="")return;try{let t=JSON.parse(e);let l=Ks(t);js(l)}catch{js(null)}};let zs=e=>{if(e.size>2e7)return nn(oe);if(ul)return nn(Oe);qs(e);Es();Ds(true)};let Ys=pi("input",null,{type:"file",accept:"image/*",multiple:"true",onchange:()=>{for(let e of Ys.files){zs(e)}}});let Ss=pi("a",ns,{[mt]:()=>Ds()},"up.b.abs-tl",vt);sn(Ss,{text:_e,top:true});ondragenter=async e=>{if(e.dataTransfer&&e.dataTransfer.files){let t=e.dataTransfer.files.length>0?e.dataTransfer.files:e.dataTransfer.items;let l=t[0];if(!l.type||l.type.split("/")[0]!="image")return;mi(Wr,"drag")}};Wr.ondragenter=e=>{e.preventDefault()};Wr.ondragover=e=>e.preventDefault();Wr.ondragleave=()=>{Rt((()=>_i(Wr,"drag")))};Wr.ondrop=e=>{e.preventDefault();_i(Wr,"drag");if(e.dataTransfer.files){let t=false;for(let l of e.dataTransfer.files){if(!l.type||l.type.split("/")[0]!="image")t=true;else zs(l)}if(t)nn(we)}};if(tt)Fe.addEventListener("paste",(async()=>{let e=await window.navigator.clipboard.read();let t=0;for(let l of e){$l(l);let e=null;for(let t of l.types){e=t.match(/image\/(.+)$/);$l(e);if(e)break}$l(e);if(!e)continue;let i=await l.getType(e[0]);let r=new File([i],`image_${t}.${e[1]}`);zs(r);t+=1}}));let Us=di(Ss,"add_circle");let $s=pi("span",Ss,{[ht]:0},"cnt.abs-tr",kt);Tl=()=>{if(Yl()&&!ul)_i(Ss,vt);else mi(Ss,vt)};if(DEBUG)$l("settings");let Bs,Zs;let Ms=pi(bt,rs,"p.p-settings",kt);pi(It,pi(bt,Ms,"hd"),{[ht]:Y},"h");di(pi("a",Ms,{[mt]:()=>Bs()},"b.abs-tr"),"close");let Xs=pi("a",Ms,{[mt]:()=>Zs()},"b.abs-tl",kt);di(Xs,"navigate_before");let Ns=pi(bt,Ms);let Qs=pi(bt,Ns,"opts");let Ps=pi(bt,Ns,"opts",kt);let Rs=pi(bt,Ns,"opts",kt);let Fs=pi(bt,Ns,"opts",kt);let Hs=Qs;Zs=(e=Qs)=>{mi(Hs,kt);_i(e,kt);Hs=e;if(e==Qs)mi(Xs,kt);else _i(Xs,kt)};let Vs=(e,t,l,i,r=false,n=Qs)=>{let a=r;let s=pi(bt,n,"opt");if(a)mi(s,"chk");let c=pi(bt,s,"label.fr");if(t)di(c,t);pi(It,c,{[ht]:e});let o=e=>{a=e;if(a){mi(s,"chk");l?.()}else{_i(s,"chk");i?.()}};di(pi(It,s,"value"),"check_small");s.onclick=()=>Gr(e,!a);Jr[e]=o;jr(e,r);return s};let Ws=(e,t,l,i,r,n,a)=>Vs(e,t,(()=>ri(l,i)),(()=>ri(l,r)),n,a);let ec=(e,t,l="")=>{let i=pi(bt,Qs,{[mt]:()=>Zs(t)},"opt.r");let r=pi(bt,i,"label.fr");if(l)di(r,l);pi(It,r,{[ht]:e});di(i,"navigate_next","abs-r");return i};ec(Pe,Ps,"block");let tc=(e,t,l,i)=>{let r=pi("a",t,{[mt]:()=>{let t=rn({title:e,options:[],close:true});let r=t.content;let n=pi(bt,r,"b-entry.fr");let a=()=>{hi(n);let e=l?Ur():Br(tl,nl);let t=e[i].split("||");for(let r of t){if(r=="")continue;let t=pi(bt,n,"entry.fr");pi(It,t,{[ht]:'"'+r+'"'});let s=pi("a",t,{[mt]:()=>{Fr(e,i,r);if(l)Qr(e);else Pr(e,tl);a()}});di(s,"close","sml")}};a();let s=pi(bt,r,"b-wrap.fr");let c=pi("input",s,"nowrap");let o=pi("a",s,{[mt]:()=>{if(!c.value)return;let e=l?Ur():Br(tl,nl);Rr(e,i,c.value);if(l)Qr(e);else Pr(e,tl);a();c.value=""},[ht]:Qe},"sb");Oi(c,o,false,true)}},"opt.r");let n=pi(bt,r,"label.fr");pi(It,n,{[ht]:e});di(r,"navigate_next","abs-r")};pi(bt,Ps,{[ht]:Xe},"opt.hr");tc(Me,Ps,true,"word");tc(Ue,Ps,true,"id");tc($e,Ps,true,"ip");tc(Be,Ps,true,"nick");let lc=pi(bt,Ps,{[ht]:Ne},"opt.hr");tc(Me,Ps,false,"word");tc(Ue,Ps,false,"id");tc($e,Ps,false,"ip");tc(Be,Ps,false,"nick");ec(F,Rs);let ic=pi("input",null,{type:"file",accept:"image/*",multiple:"true",onchange:()=>{if(ic.files.length===0)return;let e=qs(ic.files[0]);js(e);if(!nc)ac.click()}});let rc=pi("a",Rs,{[mt]:()=>ic.click()},"pv.r.b.o-f");di(rc,"add_photo_alternate");pi(It,rc,{[ht]:qe});let nc=false;let ac=Vs(H,null,(()=>{nc=true;if(xs===null)return;_i(xs.preview,kt)}),(()=>{nc=false;if(xs===null)return;mi(xs.preview,kt)}),false,Rs);let sc="";let cc=pi("a",Rs,{[mt]:()=>{let e=rn({title:V,input:sc,options:[{text:d,[mt]:t=>{sc=e.input.value;Gr("footer",sc);t()}},{text:h}]});let t=e.input;mi(t,"ft");let i=pi(It,null,{[ht]:"- "+l,[mt]:()=>t.focus()},"footer-static");t.insertAdjacentElement("afterend",i)}},"opt.r");pi(It,cc,{[ht]:V},"label");di(cc,"navigate_next","abs-r");Vs(P,"dark_mode",(()=>_i(He,"light")),(()=>mi(He,"light")),true);let oc=Vs(S,"splitscreen",(()=>{fl=true;if(lt&&!zr("mado")){rn({title:d,desc:Ce,options:[{text:g,[mt]:e=>{Dn();Gr("mado",true);e()},enter:true},{text:h,[mt]:e=>{oc.click();e()}}]})}else{Dn()}}),(()=>{fl=false;Dn()}),!lt);ec(R,Fs);let uc=true;Vs(M,null,(()=>uc=true),(()=>uc=false),true);Vs(Q,null,(()=>{mi(Ya,kt);mi(Ga,kt)}),(()=>{if(ol)return;_i(Ya,kt);_i(Ga,kt)}));Vs(X,null,(()=>Ar(1)),(()=>Ar(0)));Vs(N,null,(()=>mi(un,"co")),(()=>_i(un,"co")));Vs(W,null,(()=>_i(ta,"hn")),(()=>mi(ta,"hn")),false,Fs);Vs(B,null,(()=>{_i(ta,"hu");Jl(true)}),(()=>{mi(ta,"hu");Jl(true)}),true,Fs);let fc="--cc";Ws(ve,null,fc,"#fc5","var(--cf)",true,Fs);let pc="--sb";Ws(U,null,pc,"smooth","auto",true,Fs);let dc="--fs";Vs($,null,(()=>{ri(dc,"15px");Jl(true)}),(()=>{ri(dc,"13px");Jl(true)}),false,Fs);let hc="--ds";Ws(Z,null,hc,"60px","80px",false,Fs);pi(It,Ms,{[ht]:"version: "+VERSION},"version");let gc=true;Bs=()=>{gc=!gc;if(gc){_i(yc,"f");mi(Ms,kt)}else{mi(yc,"f");_i(Ms,kt)}};let mc=pi(bt,rs,"fr.sc");let _c=pi("a",mc,{[mt]:Bs},"b.gray");let yc=di(_c,"settings");let wc=pi("a",mc,"sb",vt);pi(It,wc,{[ht]:ee});Oi(cs,wc,true);if(DEBUG)$l("funcs");let Oc={};let kc=async(e,t=false)=>{if(!t&&Ea[e]!=undefined)return Ea[e];let l={num:e,name:"",text:te,write:"",esno:"",string:"",delId:"",delValue:"",vCurT:""};let i=await Pi(xi(e)).catch($l);let r=()=>l;if(new RegExp(`id="code_${e}"`).test(i))_l=true;else _l=false;let n=ji(i,bt,"write_div");if(!n)return r();let a=ji(i,bt,"gallview_head");if(!a)return r();let s=Gi(a,bt,"gall_writer");if(!s)return r();l.name=Ui(s,"data-nick");l.write=n;l.text=Cr(Ir(Nl(kr(n))),"pc-"+e);let c=Xi(i,"e_s_n_o");if(c)l.esno=c;l.string=qi(i);Ea[e]=l;let o={};if(Ni(i,"_cmt_del_form_",o)){for(let e in o){l.delId=e;l.delValue=o[e]}}let u=Xi(i,"v_cur_t");if(u)l.vCurT=u;let f={cur_t:"",check_6:"",check_7:"",check_8:"",check_9:"",check_10:"",recommend:"0",user_ip:"",t_vch2:"",t_vch2_chk:"",service_code:""};Lr(i,f);f.service_code=Ji(f.service_code,l.string);Oc[e]=f;return r()};let vc=async(e,t,l)=>{let i=await Wi(e,vi()+"comment/",t).catch($l);if(!i)return false;let r;try{r=JSON.parse(i)}catch(e){$l(e,i);return false}let n=r["total_cnt"];l.count=n;let a=r["comments"];if(!a||!a.length)return false;for(let e of a){let t=Pt(e["no"]);if(t==0)continue;let i={num:t,id:"",ip:"",name:"",img:"",fix:false,text:"",target:0};if(l.comments[t]!=undefined)continue;else l.comments[t]=i;i.id=e["user_id"];i.ip=e["ip"];i.name=e["name"];i.text=Ir(kr(e["memo"]).r(/\n/g,"<br />"));let r=e["c_no"];if(r)i.target=Pt(r);let n=e["gallog_icon"];let a=n.match(/\<img src='([^']+)'/);if(a){let e=a[1];i.img=e;i.fix=$i(e)}}return true};let bc=async e=>{let{esno:t}=await kc(e).catch($l);let l=Da[e];let i={count:l,num:0,comments:{}};if(qa[e]!=undefined)i=qa[e];let r={id:tl,no:e,cmt_id:tl,cmt_no:e,focus_cno:"",focus_pno:"",e_s_n_o:t,comment_page:1,sort:"D",prevCnt:"0",board_type:"",_GALLTYPE_:ll};let n=true;while(n){n=await vc(e,r,i).catch($l);r.comment_page++}if(l!=i.count)Ta[e](i.count,true);qa[e]=i;return i};let Ic=[];let xc=async(e,t=false)=>{if(e.length==0)return;if(!Cl)t=true;else if(xl)Ka({title:ne});e=e.sort(((e,t)=>e.num-t.num));let l=0;for(let i of e){if(!Ic.includes(i.num)){await Ka(i).catch($l);if(i.count)Ta[i.num]?.(i.count,t)}l=Math.max(l,i.num)}vl=Math.max(vl,l);if(zl)zl.postMessage({type:"ln",n:vl});if(!Cl){Ka({title:re});Cl=true;if(ul)Ka({title:ge})}xl=false};let Cc=()=>{let e,t,l,i;let r,n;let a,s,c,o,u,f;let p,d;let h;let g;try{e=_DEBUG;t=_URL;l=_TEXT;i={};r=(e,t)=>{i[e]=t;self.postMessage({type:"cc",n:e,c:t})};n=async e=>self.postMessage({type:"pd",d:e});a=_IT;s=_IH;c=_OH;o=_AT;u=_A;f=_TF;p=_SS;d=_SN;h=Number.parseInt;g=()=>_LN}catch{e=$l;t=bi();l=Pi;i=Da;r=(e,t)=>Ta[e]?.(t,xl);n=xc;a=Yi;s=ji;c=Gi;o=Si;u=Ui;f=$i;p=ie;d=le;h=Pt;g=()=>vl}let m=e=>e.replace(/&amp;/g,"&").replace(/&nbsp;/g," ").replace(/&#035;/g,"#").replace(/&#039;/g,`'`).replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"');let _=async()=>{let _=await l(t);if(!_)return;try{_=_.replace(/(\n|\r|\t)/g,"");let e=[];let t=_.matchAll(/<tr[^>]*class="[^"]*us-post[^"]*"[^>]*data-no="([^"]*)".+?<\/tr>/g);if(!t)return;for(let l of t){let t=l[0];let n={num:0,subject:"",title:"",nickname:"",id:"",ip:"",date:0,img:"",fix:false,count:0};let _=h(l[1]);n.num=_;let y=t.match(/<span[^>]*class="[^"]*reply_num[^>]*"[^>]*>\[([0-9]+)\]<\/span>/);let w=i[_]??0;let O=0;if(y){O=h(y[1]);if(O)n.count=O}if(_<=g()){if(O!=w)r(_,O);continue}let k=a(t,"td","gall_tit");if(y)k=k.slice(0,k.length-y[1].length-2);n.title=m(k);let v=s(t,"td","gall_num");if(v==p||v==d||v=="AD")continue;let b=a(t,"td","gall_subject");n.subject=m(b);if(b==p||b==d||b=="AD")continue;let I=c(t,"td","gall_writer");if(I){o(I,"data-nick",n,"nickname");o(I,"data-uid",n,"id");o(I,"data-ip",n,"ip");let e=I.match(/<img[^>]*src=["']([^"']+)["']/);if(e){let t=e[1];n.img=t;n.fix=f(t)}}let x=c(t,"td","gall_date");let C=u(x,"title");if(C!==null)n.date=Date.parse(C);e.push(n)}await n(e)}catch(t){e(t)}};return{_UL:_}};let{_UL:Ac}=Cc();let Lc=()=>{let e=async()=>{let t,l,i,r;try{t=_UL;l=_IV;i=()=>{};r=_DEBUG}catch{l=kl;t=Ac;i=e=>Gl=e;r=$l}await t().catch((e=>{r(e);postMessage({type:"err"})}));i(setTimeout(e,l))};return{_UC:e}};let{_UC:Ec}=Lc();let Dc=(...e)=>{$l("init update",...e);xl=true;if(et){if(zl)zl.terminate();let e=new Blob([`let _URL='${bi()}';`,`let _IV=${kl};`,`let _LN=${vl};`,`let _SS='${ie}';`,`let _SN='${le}';`,`let{_IH,_OH,_IT,_AT,_A,_TF,_DEBUG}=(${Ki.toString()})();`,`let{_TEXT}=(${Qi.toString()})();`,`let{_UL}=(${Cc.toString()})();`,`let{_UC}=(${Lc.toString()})();`,`self.onmessage=async(e)=>{switch(e.data.type){case'iv':_IV=e.data.iv;break;case'ln':_LN=e.data.n;break;}};`,`_UC();`],{type:"text/javascript"});let t=URL.createObjectURL(e);zl=new Worker(t);zl.onerror=(...e)=>{$l(...e);Dc("error",...e)};zl.onmessage=async e=>{let t=e.data;if(t&&t.type){if(t.type=="pd")return await xc(t.d);if(t.type=="cc")return Ta[t.n]?.(t.c,xl);if(t.type=="err")return Dc("worker err")}}}else{if(Gl)clearTimeout(Gl);Ec()}};Dc();let Tc={id:"",_GALLTYPE_:"",gallery_no:0,r_key:"",upload_status:"",clickbutton:"",user_ip:"",block_key:"",tempIdx:"",headtext:"",use_headtext:"",poll:"",service_code:"",use_html:"",subject:"",adult_article_yn:"N",adult_auth_yn:"N",ci_t:undefined,mode:"W",movieIdx:"",series_title:"[]",series_data:"",headTail:'""'};if(cl)Tc.fix="";let qc="";let Jc=(e=true)=>{if(!ul&&e&&Cl)Ka({title:ge});ul=e;if(e){if(Yl()){mi(cs,vt);mi(Ss,vt);mi(Os,vt);mi(wc,vt)}if(!ol)mi(ja,kt)}else{_i(cs,vt);_i(Ss,vt);_i(Os,vt);_i(wc,vt);if(!ol)_i(ja,kt)}};Qa=async()=>{let e=await Pi(Ii()).catch($l);if(!/id="write"/.test(e))return Jc();Jc(false);Lr(e,Tc);Ei=qi(e);ml=/id="code"/.test(e);if(cl){Tc.headtext=0;let t=ol?"nickname":"name";let l=Xi(e,t);if(l)El=l;else El=""}Na();Xa();Jl(true)};let Kc=e=>"false||"+e;let jc=(e,t,l)=>`<img class="written_dccon" src="${e}" conalt="${t}" alt="${t}" con_alt="${t}" title="${t}" detail="${l}">`;let Gc=0;let zc=async(e,t=true)=>{let l=`<p><a href="${e}" target="_blank">${e}</a></p>`;let i=await Hi(St+"api/ogp",{url:e});if(!i)return l;let r=JSON.parse(i);if(!r.result)return l;let n=`{{_OG_START::${e}^#^${r.og_title}^#^${r.og_description}^#^${r.og_image}::OG_END_}}`;if(t)n=`<p><span class="og-url" style="color:#3b4890">${e}</span></p><p></p>`+n;return n};let Yc=async(e,t)=>{Tc.subject=Ht(e);let l={};if(!ol){let e=Pa();let t=Fa();if(e.length==0)return Kc(a);if(t.length<2)return Kc(s);l.name=e;l.password=t}if(ml){let e=Ha();if(e.length==0)return Kc(c);l.kcaptcha_code=e}let i=Wt();let n=i-Gc;if(n<nt){let e=nt-n;Gc=i+e;await Zl(e)}else{Gc=i}qc=await Hi("/block/block/",Tc,l).catch($l);if(!qc)return Kc(se);Tc.service_code=Ji(Tc.service_code);let o={block_key:qc,memo:"",code:ml?Ha():undefined,bgm:"0"};let u="";if(As.length!==0|(nc&&xs!==null&&!Cs))u+=r;if(nc&&xs!==null&&!Cs){u+=`<img src="${xs.url}"/>`+r}for(let e=0;e<As.length;e++){let t=As[e];if(!t.upload)return Kc(pe);u+=`<img src="${t.url}" class="txc-image "/>`+r;o["file_write["+e+"][file_no]"]=t.num}let f="";if(uc&&Ln.length){for(let e=0;e<Ln.length;e++){let t=Ln[e];let l=t.match(jt);let i=t.match(Jt);let r,n;if(l){r=l[2];n="https://youtu.be/"+r;if(e==0){f+=`<p><span class="og-url" style="color:#3b4890" <div=""></span></p><div class="yt_movie"><embed src="https://www.youtube.com/v/${r}?version=3" type="application/x-shockwave-flash" width="560" height="315" allowfullscreen="true"></div><a class="yt_link" href="${n}" target="_blank">${n}</a></div>`;f+=await zc(n,false);continue}}else if(i){r=i[2];n="https://www.twitch.tv/"+r}else{n=t}f+=await zc(n)}}if(f)f+=r;let p="";for(let t of e.matchAll(Tt)){let e=t[1];let l=t[2];let i=dr(e,l);if(!i)continue;let r=pr(e,l);if(!r)continue;if(!r.buy)continue;p+=jc(i,l,r.idx)}if(p)p+=r;for(let e of t.matchAll(Tt)){let l=e[0];let i=e[1];let r=e[2];let n=dr(i,r);if(!n)continue;let a=pr(i,r);if(!a)continue;if(!a.buy)continue;t=t.r(l,jc(n,r,a.idx))}o.memo=Ht(u+f+r+p+t);return await ci(Hi,[Bt,Tc,l],o,"comment_submit")};let Sc=e=>{Ft(Qa,500);let t=ei(e);if(t.length==1){$l(e);return nn(ae)}if(t[0]=="false"){nn(t[1]);return $l(e)}let l=Pt(t[1].trim());Ic.push(l);Ka({num:l,nickname:Ra(),id:ol?dl:"",ip:ol?"":li(Tc.user_ip),title:Tc.subject,img:hl,fix:gl,my:true});Cs=false;for(let e=0;e<As.length;e++){As[e].close()}As.length=0;Ds(false)};let Uc=(e,t)=>{Ft(Na,500);let l=ei(e);if(l.length<2){$l(e);return nn(ae)}if(l[0]=="false"){$l(e);return nn(l[1])}ql(0);Ta[t](-1,true)};let $c=async(e,t,l=0)=>{let i=Oc[e];if(!i)return 0;let r={};if(l){r.c_no=l}if(!ol){if(El){r.nickname=El}else{let e=Pa();if(e.length==0)return Kc(a);r.name=e}let e=Fa();if(e.length<2)return Kc(s);r.password=e}else{r.name=pl}if(_l){let e=Ha();if(e.length==0)return Kc(c);r.code=e}r.memo=Ht(t);let n={id:tl,no:e,c_gall_id:tl,c_gall_no:e,[Ct]:"",_GALLTYPE_:ll,headTail:'""'};let o=await ci(Wi,[e,Zt,i,r],n,"comment_submit");try{let e=Pt(o);if(e)return"true||"+e}catch{$l(o)}return o};wc.onclick=async()=>{if(!cs.value)return;let e=cs.value??"";cs.value="";cs.oninput();if(yl==0){let{r:t,p:i}=Bl();if(As.length!==0){let e=false;let l=false;for(let t of As){if(!t.upload)e=true;if(t.error)l=true}if(l){rn({title:de,desc:he,options:[{text:g,[mt]:e=>{t(true);e()},enter:true},{text:h,[mt]:e=>{t(false);e()}}]});if(!await i.catch($l))return}else if(e){return nn(pe)}}let n=e.split("\n");e=n[0];let a=r;for(let e=1;e<n.length;e++){a+=`<p>${n[e]}</p>`}if(sc!==""){n=sc.split("\n");for(let e of n)a+=`<p style="color:#ABABAB;">${e}</p>`}a+=`<p style="color:#ABABAB;">- ${l} ${Wl(20)}</p>`;Sc(await Yc(e,a).catch($l))}else{Ol=Wl(ot);Uc(await $c(yl,e+Ol,wl).catch($l),yl)}if(lt)cs.focus()};Yr();if(Ln.length!==0)mn(false);let Bc=zr("version")??"";if(typeof VERSION!=="undefined"){let e=e=>{let t=e.split(".");return t[0]+"."+t[1]};let t=e(Bc);let l=e(VERSION);if(t!==l){let e=rn({title:Je+": "+VERSION,desc:Re+'<a href="https://joh1ah.github.io/dclivechat/change.log" target="_blank">'+Ke+"</a>",html:true});on(e.content,[{text:Ge,icon:"delete"},{hr:true},{text:y,icon:"open_in_new"},{text:Se},{hr:true},{text:Ue},{text:Be}]);let t=e.content.oncontextmenu({preventDefault:()=>{},clientX:0,clientY:0});cn=null;gi(t);e.content.appendChild(t);t.style.position="relative";t.style.marginTop="1em"}}Gr("version",VERSION);Gs();sc=zr("footer")??"";Rt((()=>_i(He,kt)));$l("INIT done")})().catch((e=>console.log(e)));